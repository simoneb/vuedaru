(function(e){function t(t){for(var n,s,o=t[0],c=t[1],u=t[2],d=0,m=[];d<o.length;d++)s=o[d],r[s]&&m.push(r[s][0]),r[s]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(e[n]=c[n]);l&&l(t);while(m.length)m.shift()();return i.push.apply(i,u||[]),a()}function a(){for(var e,t=0;t<i.length;t++){for(var a=i[t],n=!0,o=1;o<a.length;o++){var c=a[o];0!==r[c]&&(n=!1)}n&&(i.splice(t--,1),e=s(s.s=a[0]))}return e}var n={},r={app:0},i=[];function s(t){if(n[t])return n[t].exports;var a=n[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,s),a.l=!0,a.exports}s.m=e,s.c=n,s.d=function(e,t,a){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(s.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)s.d(a,n,function(t){return e[t]}.bind(null,n));return a},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/vuedaru/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],c=o.push.bind(o);o.push=t,o=o.slice();for(var u=0;u<o.length;u++)t(o[u]);var l=c;i.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("56d7")},"0d37":function(e,t,a){},"14ab":function(e,t,a){},"14ba":function(e,t,a){},"1a43":function(e,t,a){},"21a7":function(e,t,a){},2669:function(e,t,a){"use strict";var n=a("75c7"),r=a.n(n);r.a},"26de":function(e,t,a){"use strict";var n=a("5d06"),r=a.n(n);r.a},2816:function(e,t,a){"use strict";var n=a("eb21"),r=a.n(n);r.a},"56d7":function(e,t,a){"use strict";a.r(t);a("cadf"),a("551c"),a("097d");var n=a("2b0e"),r=a("43f9"),i=a.n(r),s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("router-view")},o=[],c={name:"root"},u=c,l=a("2877"),d=Object(l["a"])(u,s,o,!1,null,null,null);d.options.__file="Root.vue";var m=d.exports,p=a("bc3a"),h=a.n(p),v={install:function(e){var t=h.a.create();t.interceptors.request.use(function(t){return t.baseURL=e.settings.getUrl(),t.headers.authorization||(t.headers.authorization=e.settings.getUserId()),t}),e.prototype.$axios=e.axios=t}},f={install:function(e){e.filter("json",function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return JSON.stringify(e,null,t?2:0)})}},g="user_id",b="udaru_url",y={install:function(e){e.prototype.$settings=e.settings={isConfigured:function(){return!!this.getUserId()&&!!this.getUrl()},setUserId:function(e){localStorage.setItem(g,e)},getUserId:function(){return localStorage.getItem(g)},setUrl:function(e){localStorage.setItem(b,e)},getUrl:function(){return localStorage.getItem(b)}}}},_=(a("96cf"),a("3040")),I={install:function(e){e.prototype.$udaru=e.udaru={getOrganizations:function(){var t=Object(_["a"])(regeneratorRuntime.mark(function t(){var a,n;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.axios.get("/authorization/organizations");case 2:return a=t.sent,n=a.data,t.abrupt("return",n);case 5:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),getOrganization:function(){var t=Object(_["a"])(regeneratorRuntime.mark(function t(a){var n,r;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.axios.get("/authorization/organizations/".concat(encodeURIComponent(a)));case 2:return n=t.sent,r=n.data,t.abrupt("return",r);case 5:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),deleteOrganization:function(){var t=Object(_["a"])(regeneratorRuntime.mark(function t(a){var n,r;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.axios.delete("/authorization/organizations/".concat(encodeURIComponent(a)));case 2:return n=t.sent,r=n.data,t.abrupt("return",r);case 5:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),createOrganization:function(){var t=Object(_["a"])(regeneratorRuntime.mark(function t(a){var n,r;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.axios.post("/authorization/organizations",a);case 2:return n=t.sent,r=n.data,t.abrupt("return",r);case 5:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),updateOrganization:function(){var t=Object(_["a"])(regeneratorRuntime.mark(function t(a,n){var r,i;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.axios.put("/authorization/organizations/".concat(encodeURIComponent(a)),n,{headers:{org:a}});case 2:return r=t.sent,i=r.data,t.abrupt("return",i);case 5:case"end":return t.stop()}},t,this)}));return function(e,a){return t.apply(this,arguments)}}(),createUser:function(){var t=Object(_["a"])(regeneratorRuntime.mark(function t(a,n){var r,i;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.axios.post("/authorization/users",n,{headers:{org:a}});case 2:return r=t.sent,i=r.data,t.abrupt("return",i);case 5:case"end":return t.stop()}},t,this)}));return function(e,a){return t.apply(this,arguments)}}(),deleteUser:function(){var t=Object(_["a"])(regeneratorRuntime.mark(function t(a){var n,r;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.axios.delete("/authorization/users/".concat(encodeURIComponent(a)));case 2:return n=t.sent,r=n.data,t.abrupt("return",r);case 5:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),createTeam:function(){var t=Object(_["a"])(regeneratorRuntime.mark(function t(a,n){var r,i;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.axios.post("/authorization/teams",n,{headers:{org:a}});case 2:return r=t.sent,i=r.data,t.abrupt("return",i);case 5:case"end":return t.stop()}},t,this)}));return function(e,a){return t.apply(this,arguments)}}(),createPolicy:function(){var t=Object(_["a"])(regeneratorRuntime.mark(function t(a,n,r){var i,s;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.axios.post("/authorization/policies",n,{headers:{org:a},params:{sig:r}});case 2:return i=t.sent,s=i.data,t.abrupt("return",s);case 5:case"end":return t.stop()}},t,this)}));return function(e,a,n){return t.apply(this,arguments)}}(),updatePolicy:function(){var t=Object(_["a"])(regeneratorRuntime.mark(function t(a,n,r,i){var s,o;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.axios.put("/authorization/policies/".concat(encodeURIComponent(n)),r,{headers:{org:a},params:{sig:i}});case 2:return s=t.sent,o=s.data,t.abrupt("return",o);case 5:case"end":return t.stop()}},t,this)}));return function(e,a,n,r){return t.apply(this,arguments)}}(),deleteTeam:function(){var t=Object(_["a"])(regeneratorRuntime.mark(function t(a){var n,r;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.axios.delete("/authorization/teams/".concat(encodeURIComponent(a)));case 2:return n=t.sent,r=n.data,t.abrupt("return",r);case 5:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),updateTeam:function(){var t=Object(_["a"])(regeneratorRuntime.mark(function t(a,n,r){var i,s;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.axios.put("/authorization/teams/".concat(encodeURIComponent(n)),r,{headers:{org:a}});case 2:return i=t.sent,s=i.data,t.abrupt("return",s);case 5:case"end":return t.stop()}},t,this)}));return function(e,a,n){return t.apply(this,arguments)}}(),getUsers:function(){var t=Object(_["a"])(regeneratorRuntime.mark(function t(a){var n,r;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.axios.get("/authorization/users",{headers:{org:a}});case 2:return n=t.sent,r=n.data,t.abrupt("return",r);case 5:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),getTeams:function(){var t=Object(_["a"])(regeneratorRuntime.mark(function t(a){var n,r;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.axios.get("/authorization/teams",{headers:{org:a}});case 2:return n=t.sent,r=n.data,t.abrupt("return",r);case 5:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),getUser:function(){var t=Object(_["a"])(regeneratorRuntime.mark(function t(a,n){var r,i;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.axios.get("/authorization/users/".concat(encodeURIComponent(n)),{headers:{org:a}});case 2:return r=t.sent,i=r.data,t.abrupt("return",i);case 5:case"end":return t.stop()}},t,this)}));return function(e,a){return t.apply(this,arguments)}}(),updateUser:function(){var t=Object(_["a"])(regeneratorRuntime.mark(function t(a,n,r){var i,s;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.axios.put("/authorization/users/".concat(encodeURIComponent(n)),r,{headers:{org:a}});case 2:return i=t.sent,s=i.data,t.abrupt("return",s);case 5:case"end":return t.stop()}},t,this)}));return function(e,a,n){return t.apply(this,arguments)}}(),canAccess:function(){var t=Object(_["a"])(regeneratorRuntime.mark(function t(a,n,r,i){var s,o;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.axios.get("/authorization/access/".concat(encodeURIComponent(n),"/").concat(encodeURIComponent(r),"/").concat(encodeURIComponent(i)),{headers:{org:a}});case 2:return s=t.sent,o=s.data,t.abrupt("return",o);case 5:case"end":return t.stop()}},t,this)}));return function(e,a,n,r){return t.apply(this,arguments)}}(),listUserActionsOnResources:function(){var t=Object(_["a"])(regeneratorRuntime.mark(function t(a,n,r){var i,s;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.axios.get("/authorization/list/".concat(encodeURIComponent(n)),{headers:{org:a},params:{resources:r}});case 2:return i=t.sent,s=i.data,t.abrupt("return",s);case 5:case"end":return t.stop()}},t,this)}));return function(e,a,n){return t.apply(this,arguments)}}(),listUserActionsOnResource:function(){var t=Object(_["a"])(regeneratorRuntime.mark(function t(a,n,r){var i,s;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.axios.get("/authorization/list/".concat(encodeURIComponent(n),"/").concat(encodeURIComponent(r)),{headers:{org:a}});case 2:return i=t.sent,s=i.data,t.abrupt("return",s);case 5:case"end":return t.stop()}},t,this)}));return function(e,a,n){return t.apply(this,arguments)}}(),getTeam:function(){var t=Object(_["a"])(regeneratorRuntime.mark(function t(a,n){var r,i;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.axios.get("/authorization/teams/".concat(encodeURIComponent(n)),{headers:{org:a}});case 2:return r=t.sent,i=r.data,t.abrupt("return",i);case 5:case"end":return t.stop()}},t,this)}));return function(e,a){return t.apply(this,arguments)}}(),getCurrentUser:function(){var t=Object(_["a"])(regeneratorRuntime.mark(function t(){var a,n;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.axios.get("/authorization/users/".concat(encodeURIComponent(e.settings.getUserId())));case 2:return a=t.sent,n=a.data,t.abrupt("return",n);case 5:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),getPolicies:function(){var t=Object(_["a"])(regeneratorRuntime.mark(function t(a){var n,r;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.axios.get("/authorization/policies",{headers:{org:a}});case 2:return n=t.sent,r=n.data,t.abrupt("return",r);case 5:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),getPolicy:function(){var t=Object(_["a"])(regeneratorRuntime.mark(function t(a,n){var r,i;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.axios.get("/authorization/policies/".concat(encodeURIComponent(n)),{headers:{org:a}});case 2:return r=t.sent,i=r.data,t.abrupt("return",i);case 5:case"end":return t.stop()}},t,this)}));return function(e,a){return t.apply(this,arguments)}}(),deletePolicy:function(){var t=Object(_["a"])(regeneratorRuntime.mark(function t(a,n,r){var i,s;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.axios.delete("/authorization/policies/".concat(encodeURIComponent(n)),{params:{sig:r},headers:{org:a}});case 2:return i=t.sent,s=i.data,t.abrupt("return",s);case 5:case"end":return t.stop()}},t,this)}));return function(e,a,n){return t.apply(this,arguments)}}(),addUsersToTeam:function(){var t=Object(_["a"])(regeneratorRuntime.mark(function t(a,n){var r,i,s,o,c,u=arguments;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:for(r=u.length,i=new Array(r>2?r-2:0),s=2;s<r;s++)i[s-2]=u[s];return t.next=3,e.axios.put("/authorization/teams/".concat(encodeURIComponent(n),"/users"),{users:i},{headers:{org:a}});case 3:return o=t.sent,c=o.data,t.abrupt("return",c);case 6:case"end":return t.stop()}},t,this)}));return function(e,a){return t.apply(this,arguments)}}(),removeUserFromTeam:function(){var t=Object(_["a"])(regeneratorRuntime.mark(function t(a,n,r){var i,s;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.axios.delete("/authorization/teams/".concat(encodeURIComponent(n),"/users/").concat(encodeURIComponent(r)),{headers:{org:a}});case 2:return i=t.sent,s=i.data,t.abrupt("return",s);case 5:case"end":return t.stop()}},t,this)}));return function(e,a,n){return t.apply(this,arguments)}}(),removeUserPolicy:function(){var t=Object(_["a"])(regeneratorRuntime.mark(function t(a,n,r){var i,s;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.axios.delete("/authorization/users/".concat(encodeURIComponent(n),"/policies/").concat(encodeURIComponent(r)),{headers:{org:a}});case 2:return i=t.sent,s=i.data,t.abrupt("return",s);case 5:case"end":return t.stop()}},t,this)}));return function(e,a,n){return t.apply(this,arguments)}}(),addOrUpdateUserPolicy:function(){var t=Object(_["a"])(regeneratorRuntime.mark(function t(a,n,r){var i,s;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.axios.put("/authorization/users/".concat(encodeURIComponent(n),"/policies"),{policies:[r]},{headers:{org:a}});case 2:return i=t.sent,s=i.data,t.abrupt("return",s);case 5:case"end":return t.stop()}},t,this)}));return function(e,a,n){return t.apply(this,arguments)}}(),removeTeamPolicy:function(){var t=Object(_["a"])(regeneratorRuntime.mark(function t(a,n,r){var i,s;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.axios.delete("/authorization/teams/".concat(encodeURIComponent(n),"/policies/").concat(encodeURIComponent(r)),{headers:{org:a}});case 2:return i=t.sent,s=i.data,t.abrupt("return",s);case 5:case"end":return t.stop()}},t,this)}));return function(e,a,n){return t.apply(this,arguments)}}(),addOrUpdateTeamPolicy:function(){var t=Object(_["a"])(regeneratorRuntime.mark(function t(a,n,r){var i,s;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.axios.put("/authorization/teams/".concat(encodeURIComponent(n),"/policies"),{policies:[r]},{headers:{org:a}});case 2:return i=t.sent,s=i.data,t.abrupt("return",s);case 5:case"end":return t.stop()}},t,this)}));return function(e,a,n){return t.apply(this,arguments)}}(),removeOrganizationPolicy:function(){var t=Object(_["a"])(regeneratorRuntime.mark(function t(a,n){var r,i;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.axios.delete("/authorization/organizations/".concat(encodeURIComponent(a),"/policies/").concat(encodeURIComponent(n)),{headers:{org:a}});case 2:return r=t.sent,i=r.data,t.abrupt("return",i);case 5:case"end":return t.stop()}},t,this)}));return function(e,a){return t.apply(this,arguments)}}(),addOrUpdateOrganizationPolicy:function(){var t=Object(_["a"])(regeneratorRuntime.mark(function t(a,n){var r,i;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.axios.put("/authorization/organizations/".concat(encodeURIComponent(a),"/policies"),{policies:[n]},{headers:{org:a}});case 2:return r=t.sent,i=r.data,t.abrupt("return",i);case 5:case"end":return t.stop()}},t,this)}));return function(e,a){return t.apply(this,arguments)}}(),loadPolicyInstances:function(){var t=Object(_["a"])(regeneratorRuntime.mark(function t(a,n){var r,i;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.axios.get("/authorization/policies/".concat(encodeURIComponent(n),"/instances"),{headers:{org:a}});case 2:return r=t.sent,i=r.data,t.abrupt("return",i);case 5:case"end":return t.stop()}},t,this)}));return function(e,a){return t.apply(this,arguments)}}(),ping:function(){return e.axios.get("/ping")}}}},x=a("7bb1"),O={install:function(e){x["a"].extend("json",{getMessage:function(e){return"The "+e+" value is not valid JSON"},validate:function(e){try{return JSON.parse(e),!0}catch(e){return!1}}}),x["a"].extend("udaru_id",{getMessage:function(e){return"The "+e+" value can only contain letters, numbers or the special characters - and _"},validate:function(e){return/^[A-Za-z0-9_-]+$/.test(e)}}),e.use(x["b"])}},w=a("8c4f"),z=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app"},[a("health-check"),a("router-view"),a("snackbar")],1)},k=[],j=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{class:["health-check",{error:this.error,fixed:this.fixed}]},[a("span",{directives:[{name:"show",rawName:"v-show",value:e.error,expression:"error"}]},[e._v("Disconnected from server")]),a("span",{directives:[{name:"show",rawName:"v-show",value:e.fixed,expression:"fixed"}]},[e._v("Connected")])])},C=[],R={name:"health-check",data:function(){return{interval:null,error:null,fixed:null,count:0}},methods:{checkStatus:function(){var e=Object(_["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.$udaru.ping();case 3:this.fixed=this.error,this.error=!1,e.next=11;break;case 7:e.prev=7,e.t0=e["catch"](0),this.fixed=!1,this.error=!0;case 11:case"end":return e.stop()}},e,this,[[0,7]])}));return function(){return e.apply(this,arguments)}}()},created:function(){var e=this;this.interval=setInterval(function(){return e.checkStatus()},5e3),this.checkStatus()},destroyed:function(){clearInterval(this.interval)}},S=R,U=(a("cdd5"),Object(l["a"])(S,j,C,!1,null,"159a53f2",null));U.options.__file="HealthCheck.vue";var T=U.exports,P=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("md-snackbar",{attrs:{"md-active":e.showSnackbar},on:{"update:mdActive":function(t){e.showSnackbar=t}}},[a("span",[e._v(e._s(e.snackbarMessage))]),a("md-button",{staticClass:"md-primary",on:{click:function(t){e.showSnackbar=!1}}},[e._v("Ok")])],1)},D=[],$=a("c93e"),A=a("2f62"),E=a("a322"),N=a("612d"),M=function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return Object(N["flatten"])(t).reduce(function(e,t){return Object($["a"])({},e,Object(E["a"])({},t,t))},{})},q=function(e,t){var a=function(a,n){return a&&n?t(a,n):(n=a,Object($["a"])({type:e},n))};return a.toString=function(){return e},a.type=e,a},B=function(e,t){return t.type=e,t},K=function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return Object(A["b"])(Object(N["flatten"])(t).reduce(function(e,t){if(!t)throw new Error("Expected an action with shape {type: String, ...args} but got null or undefined");return Object($["a"])({},e,Object(E["a"])({},t.type,t.type))},{}))},F=q("organizations",function(e,t){var a=t.organizations;e.organizations=a}),L=q("organization",function(e,t){var a=t.organizationId,n=t.organization;e.organizationsById=Object($["a"])({},e.organizationsById,Object(E["a"])({},a,n))}),V=q("users",function(e,t){var a=t.organizationId,n=t.users;e.usersByOrganizationId=Object($["a"])({},e.usersByOrganizationId,Object(E["a"])({},a,n))}),J=q("teams",function(e,t){var a=t.organizationId,n=t.teams;e.teamsByOrganizationId=Object($["a"])({},e.teamsByOrganizationId,Object(E["a"])({},a,n))}),H=q("team",function(e,t){var a=t.organizationId,n=t.teamId,r=t.team;e.teamsById=Object($["a"])({},e.teamsById,Object(E["a"])({},a,Object($["a"])({},e.teamsById[a],Object(E["a"])({},n,r))))}),Y=q("user",function(e,t){var a=t.organizationId,n=t.userId,r=t.user;e.usersById=Object($["a"])({},e.usersById,Object(E["a"])({},a,Object($["a"])({},e.usersById[a],Object(E["a"])({},n,r))))}),G=q("policy",function(e,t){var a=t.organizationId,n=t.policyId,r=t.policy;e.policiesById=Object($["a"])({},e.policiesById,Object(E["a"])({},a,Object($["a"])({},e.policiesById[a],Object(E["a"])({},n,r))))}),W=q("policyInstances",function(e,t){var a=t.organizationId,n=t.policyId,r=t.policyInstances;e.policyInstancesById=Object($["a"])({},e.policyInstancesById,Object(E["a"])({},a,Object($["a"])({},e.policyInstancesById[a],Object(E["a"])({},n,r))))}),Z=q("policies",function(e,t){var a=t.organizationId,n=t.policies;e.policiesByOrganizationId=Object($["a"])({},e.policiesByOrganizationId,Object(E["a"])({},a,n))}),Q=q("setLoading",function(e){e.loading++}),X=q("unsetLoading",function(e){e.loading=Math.max(0,e.loading-1)}),ee=q("snackbarMessage",function(e,t){var a=t.message;e.snackbarMessage=a}),te=q("currentUser",function(e,t){var a=t.currentUser;e.currentUser=a}),ae=function(e){var t=e.dispatch;return e.dispatch=function(a){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return"function"===typeof a&&"string"===typeof a.type?t.call.apply(t,[e,a.type].concat(r)):t.call.apply(t,[e,a].concat(r))},e},ne=function(e,t){return B(e,function(){var e=Object(_["a"])(regeneratorRuntime.mark(function e(a){var n,r,i,s=arguments;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:for(e.prev=0,a.commit(Q()),n=s.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=s[i];return e.next=5,t.apply(void 0,[ae(a)].concat(r));case 5:return e.prev=5,a.commit(X()),e.finish(5);case 8:case"end":return e.stop()}},e,this,[[0,,5,8]])}));return function(t){return e.apply(this,arguments)}}())},re=ne("loadOrganizations",function(){var e=Object(_["a"])(regeneratorRuntime.mark(function e(t){var a,r,i;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return a=t.commit,e.next=3,n["default"].udaru.getOrganizations();case 3:r=e.sent,i=r.data,a(F({organizations:i}));case 6:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()),ie=ne("loadOrganization",function(){var e=Object(_["a"])(regeneratorRuntime.mark(function e(t,a){var r,i;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=t.commit,e.next=3,n["default"].udaru.getOrganization(a);case 3:i=e.sent,r(L({organizationId:a,organization:i}));case 5:case"end":return e.stop()}},e,this)}));return function(t,a){return e.apply(this,arguments)}}()),se=ne("loadUsers",function(){var e=Object(_["a"])(regeneratorRuntime.mark(function e(t,a){var r,i,s;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=t.commit,e.next=3,n["default"].udaru.getUsers(a);case 3:i=e.sent,s=i.data,r(V({organizationId:a,users:s}));case 6:case"end":return e.stop()}},e,this)}));return function(t,a){return e.apply(this,arguments)}}()),oe=ne("loadUser",function(){var e=Object(_["a"])(regeneratorRuntime.mark(function e(t,a){var r,i,s,o;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=t.commit,i=a.organizationId,s=a.userId,e.next=4,n["default"].udaru.getUser(i,s);case 4:o=e.sent,r(Y({organizationId:i,userId:s,user:o}));case 6:case"end":return e.stop()}},e,this)}));return function(t,a){return e.apply(this,arguments)}}()),ce=ne("loadTeams",function(){var e=Object(_["a"])(regeneratorRuntime.mark(function e(t,a){var r,i,s;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=t.commit,e.next=3,n["default"].udaru.getTeams(a);case 3:i=e.sent,s=i.data,r(J({organizationId:a,teams:s}));case 6:case"end":return e.stop()}},e,this)}));return function(t,a){return e.apply(this,arguments)}}()),ue=ne("loadTeam",function(){var e=Object(_["a"])(regeneratorRuntime.mark(function e(t,a){var r,i,s,o;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=t.commit,i=a.organizationId,s=a.teamId,e.next=4,n["default"].udaru.getTeam(i,s);case 4:o=e.sent,r(H({organizationId:i,teamId:s,team:o}));case 6:case"end":return e.stop()}},e,this)}));return function(t,a){return e.apply(this,arguments)}}()),le=ne("loadPolicies",function(){var e=Object(_["a"])(regeneratorRuntime.mark(function e(t,a){var r,i,s;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=t.commit,e.next=3,n["default"].udaru.getPolicies(a);case 3:i=e.sent,s=i.data,r(Z({organizationId:a,policies:s}));case 6:case"end":return e.stop()}},e,this)}));return function(t,a){return e.apply(this,arguments)}}()),de=ne("loadPolicyInstances",function(){var e=Object(_["a"])(regeneratorRuntime.mark(function e(t,a){var r,i,s,o;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=t.commit,i=a.organizationId,s=a.policyId,e.next=4,n["default"].udaru.loadPolicyInstances(i,s);case 4:o=e.sent,r(W({organizationId:i,policyId:s,policyInstances:o}));case 6:case"end":return e.stop()}},e,this)}));return function(t,a){return e.apply(this,arguments)}}()),me=ne("loadPolicy",function(){var e=Object(_["a"])(regeneratorRuntime.mark(function e(t,a){var r,i,s,o;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=t.commit,i=a.organizationId,s=a.policyId,e.next=4,n["default"].udaru.getPolicy(i,s);case 4:o=e.sent,r(G({organizationId:i,policyId:s,policy:o}));case 6:case"end":return e.stop()}},e,this)}));return function(t,a){return e.apply(this,arguments)}}()),pe=ne("addUserToTeam",function(){var e=Object(_["a"])(regeneratorRuntime.mark(function e(t,a){var r,i,s;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=a.organizationId,i=a.teamId,s=a.userId,e.next=3,n["default"].udaru.addUsersToTeam(r,i,s);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}},e,this)}));return function(t,a){return e.apply(this,arguments)}}()),he=ne("removeUserFromTeam",function(){var e=Object(_["a"])(regeneratorRuntime.mark(function e(t,a){var r,i,s;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=a.organizationId,i=a.teamId,s=a.userId,e.next=3,n["default"].udaru.removeUserFromTeam(r,i,s);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}},e,this)}));return function(t,a){return e.apply(this,arguments)}}()),ve=B("changeSnackbarMessage",function(e,t){var a=e.commit,n=t.message;a(ee({message:n}))}),fe=ne("createTeam",function(e,t){var a=t.organizationId,r=t.team;return n["default"].udaru.createTeam(a,r)}),ge=ne("createUser",function(e,t){var a=t.organizationId,r=t.user;return n["default"].udaru.createUser(a,r)}),be=ne("createPolicy",function(e,t){var a=t.organizationId,r=t.policy,i=t.serviceKey;return n["default"].udaru.createPolicy(a,r,i)}),ye=ne("createOrganization",function(e,t){var a=t.organization;return n["default"].udaru.createOrganization(a)}),_e=ne("loadCurrentUser",function(){var e=Object(_["a"])(regeneratorRuntime.mark(function e(t){var a,r;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return a=t.commit,e.next=3,n["default"].udaru.getCurrentUser();case 3:r=e.sent,a(te({currentUser:r}));case 5:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()),Ie={name:"snackbar",computed:Object($["a"])({},Object(A["d"])(["snackbarMessage"]),{showSnackbar:{get:function(){return!!this.snackbarMessage},set:function(e){e||this.changeSnackbarMessage({message:null})}}}),methods:Object($["a"])({},K(ve))},xe=Ie,Oe=Object(l["a"])(xe,P,D,!1,null,null,null);Oe.options.__file="Snackbar.vue";var we=Oe.exports,ze={name:"app",components:{HealthCheck:T,Snackbar:we}},ke=ze,je=(a("26de"),Object(l["a"])(ke,z,k,!1,null,"635e8e62",null));je.options.__file="App.vue";var Ce=je.exports,Re=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("md-app",[a("md-app-toolbar",{staticClass:"md-transparent"},[a("div",{staticClass:"md-toolbar-section-start"},[a("organization-selector",{attrs:{organizationId:e.organizationId}}),a("toolbar-logo")],1),a("div",{staticClass:"md-toolbar-section-end"},[a("md-progress-spinner",{directives:[{name:"show",rawName:"v-show",value:e.loading,expression:"loading"}],staticClass:"md-accent",attrs:{"md-diameter":30,"md-stroke":3,"md-mode":"indeterminate"}}),a("md-button",{staticClass:"md-icon-button",attrs:{to:{name:"settings"}}},[a("md-icon",[e._v("settings")])],1)],1)]),a("md-app-drawer",{attrs:{"md-permanent":"clipped"}},[a("md-list",[a("md-list-item",{attrs:{to:{name:"organization",params:{organizationId:e.organizationId}}}},[a("md-icon",[e._v("group_work")]),a("span",{staticClass:"md-list-item-text"},[e._v("Organization")])],1),a("md-list-item",{attrs:{to:{name:"users",params:{organizationId:e.organizationId}}}},[a("md-icon",[e._v("person_outline")]),a("span",{staticClass:"md-list-item-text"},[e._v("Users")])],1),a("md-list-item",{attrs:{to:{name:"teams",params:{organizationId:e.organizationId}}}},[a("md-icon",[e._v("group")]),a("span",{staticClass:"md-list-item-text"},[e._v("Teams")])],1),a("md-list-item",{attrs:{to:{name:"policies",params:{organizationId:e.organizationId}}}},[a("md-icon",[e._v("lock_open")]),a("span",{staticClass:"md-list-item-text"},[e._v("Policies")])],1),a("md-divider",{staticClass:"md-inset"}),a("md-subheader",[e._v("Tools")]),a("md-list-item",{attrs:{to:{name:"authorization-check",params:{organizationId:e.organizationId}}}},[a("md-icon",[e._v("how_to_reg")]),a("span",{staticClass:"md-list-item-text"},[e._v("Authorization check")])],1)],1)],1),a("md-app-content",[a("router-view")],1)],1)},Se=[],Ue=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("md-menu",[a("md-button",{attrs:{"md-menu-trigger":""}},[e._v(e._s(e.organizationId))]),a("md-menu-content",[e._l(e.organizations,function(t){return a("md-menu-item",{key:t.id,attrs:{to:{name:"organization",params:{organizationId:t.id}}}},[e._v("\n      "+e._s(t.id)+"\n    ")])}),a("md-divider"),a("md-menu-item",{attrs:{to:"/"}},[a("md-icon",[e._v("home")]),a("span",[e._v("Organizations manager")])],1)],2)],1)},Te=[],Pe={name:"organization-selector",props:{organizationId:String},computed:Object($["a"])({},Object(A["d"])(["organizations"])),methods:Object($["a"])({},K([re])),created:function(){var e=Object(_["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:this.loadOrganizations();case 1:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},De=Pe,$e=Object(l["a"])(De,Ue,Te,!1,null,null,null);$e.options.__file="OrganizationSelector.vue";var Ae=$e.exports,Ee=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("img",{staticClass:"logo",attrs:{src:"https://nearform.github.io/udaru/logo.jpg"}})},Ne=[],Me={name:"toolbar-logo"},qe=Me,Be=(a("2816"),Object(l["a"])(qe,Ee,Ne,!1,null,"2f24e166",null));Be.options.__file="ToolbarLogo.vue";var Ke=Be.exports,Fe={name:"home",props:{organizationId:String},computed:Object(A["d"])(["loading"]),components:{OrganizationSelector:Ae,ToolbarLogo:Ke}},Le=Fe,Ve=(a("fe07"),Object(l["a"])(Le,Re,Se,!1,null,"515d7381",null));Ve.options.__file="Home.vue";var Je=Ve.exports,He=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"md-layout md-alignment-center-center"},[e.idToDelete?a("md-dialog-confirm",{attrs:{"md-active":!!e.idToDelete,"md-title":"Confirm delete","md-content":"Delete organization "+e.idToDelete+"?"},on:{"md-cancel":e.onCancel,"md-confirm":e.onConfirm}}):e._e(),a("div",{staticClass:"md-layout-item md-size-60"},[a("md-list",{staticClass:"md-double-line"},[e._l(e.organizations,function(t){var n=t.id,r=t.name;return[a("md-list-item",{key:n+"item",class:{"md-inset":!e.isCurrentOrganization(n)},attrs:{to:{name:"organization",params:{organizationId:n}}}},[e.isCurrentOrganization(n)?[a("md-icon",{staticClass:"md-primary"},[e._v("check_circle_outline")]),a("md-tooltip",[e._v("Current organization")])]:e._e(),a("div",{staticClass:"md-list-item-text"},[a("span",[e._v(e._s(n))]),a("span",[e._v(e._s(r))])]),a("md-button",{staticClass:"md-icon-button md-list-action md-primary",on:{click:function(t){t.preventDefault(),e.deleteOrganization(n)}}},[a("md-icon",[e._v("delete")]),a("md-tooltip",[e._v("Delete organization")])],1)],2),a("md-divider",{key:n+"divider"})]})],2)],1)],1)},Ye=[],Ge={name:"organizations",data:function(){return{idToDelete:null}},created:function(){this.loadOrganizations(),this.loadCurrentUser()},computed:Object($["a"])({},Object(A["d"])(["organizations","currentUser"])),methods:Object($["a"])({},K(re,_e,ve),{deleteOrganization:function(e){if(this.isCurrentOrganization(e))return this.changeSnackbarMessage({message:"You cannot delete the organization you belong to!"});this.idToDelete=e},onConfirm:function(){var e=Object(_["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.$udaru.deleteOrganization(this.idToDelete);case 3:this.idToDelete=null,this.changeSnackbarMessage({message:"Organization deleted"}),this.loadOrganizations(),e.next=11;break;case 8:e.prev=8,e.t0=e["catch"](0),this.changeSnackbarMessage({message:"Error deleting organization: ".concat(e.t0)});case 11:case"end":return e.stop()}},e,this,[[0,8]])}));return function(){return e.apply(this,arguments)}}(),onCancel:function(){this.idToDelete=null},isCurrentOrganization:function(e){return this.currentUser&&this.currentUser.organizationId===e}})},We=Ge,Ze=Object(l["a"])(We,He,Ye,!1,null,null,null);Ze.options.__file="OrganizationSelect.vue";var Qe=Ze.exports,Xe=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("organization-details",{on:{submit:e.doCreateOrganization}})},et=[],tt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("form",{attrs:{novalidate:"",autocomplete:"off"},on:{submit:function(t){return t.preventDefault(),e.validate(t)}}},[a("div",{staticClass:"section"},[a("md-toolbar",{attrs:{"md-elevation":"0"}},[a("span",{staticClass:"md-title",staticStyle:{flex:"1"}},[e._v(e._s(e.creating?"Create organization":"Organization"))]),a("md-button",{attrs:{disabled:!e.isFormChanged,type:"submit"}},[e._v(e._s(e.creating?"Create":"Save"))])],1),a("md-content",[a("div",{staticClass:"md-layout md-alignment-center-center"},[a("div",{staticClass:"md-layout-item md-size-50"},[a("div",[a("md-field",{class:{"md-invalid":e.errors.has("id")}},[a("label",{attrs:{for:"id"}},[e._v("Orgnanization ID")]),a("md-input",{directives:[{name:"validate",rawName:"v-validate",value:"required|udaru_id",expression:"'required|udaru_id'"}],attrs:{id:"id",name:"id",autofocus:"",readonly:!e.creating},model:{value:e.localOrganization.id,callback:function(t){e.$set(e.localOrganization,"id",t)},expression:"localOrganization.id"}}),a("span",{staticClass:"md-error"},[e._v(e._s(e.errors.first("id")))])],1)],1),a("div",[a("md-field",{class:{"md-invalid":e.errors.has("name")}},[a("label",{attrs:{for:"name"}},[e._v("Organization name")]),a("md-input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{id:"name",name:"name"},model:{value:e.localOrganization.name,callback:function(t){e.$set(e.localOrganization,"name",t)},expression:"localOrganization.name"}}),a("span",{staticClass:"md-error"},[e._v(e._s(e.errors.first("name")))])],1)],1),a("div",[a("md-field",{class:{"md-invalid":e.errors.has("description")}},[a("label",{attrs:{for:"description"}},[e._v("Organization description")]),a("md-input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{id:"description",name:"description"},model:{value:e.localOrganization.description,callback:function(t){e.$set(e.localOrganization,"description",t)},expression:"localOrganization.description"}}),a("span",{staticClass:"md-error"},[e._v(e._s(e.errors.first("description")))])],1)],1),a("div",[a("md-field",{class:{"md-invalid":e.errors.has("metadata")}},[a("label",{attrs:{for:"metadata"}},[e._v("Metadata")]),a("md-textarea",{directives:[{name:"validate",rawName:"v-validate",value:"json",expression:"'json'"}],attrs:{id:"metadata",name:"metadata"},model:{value:e.localOrganization.metadata,callback:function(t){e.$set(e.localOrganization,"metadata",t)},expression:"localOrganization.metadata"}}),a("span",{staticClass:"md-error"},[e._v(e._s(e.errors.first("metadata")))])],1)],1),e.creating?a("div",[a("md-field",{class:{"md-invalid":e.errors.has("userId")}},[a("label",{attrs:{for:"userId"}},[e._v("Administrator ID")]),a("md-input",{directives:[{name:"validate",rawName:"v-validate",value:"udaru_id",expression:"'udaru_id'"}],attrs:{id:"userId",name:"userId",autofocus:"",readonly:!e.creating},model:{value:e.localOrganization.user.id,callback:function(t){e.$set(e.localOrganization.user,"id",t)},expression:"localOrganization.user.id"}}),a("span",{staticClass:"md-error"},[e._v(e._s(e.errors.first("userId")))])],1)],1):e._e(),e.creating?a("div",[a("md-field",{class:{"md-invalid":e.errors.has("userName")}},[a("label",{attrs:{for:"userName"}},[e._v("Administrator name")]),a("md-input",{attrs:{id:"userName",name:"userName"},model:{value:e.localOrganization.user.name,callback:function(t){e.$set(e.localOrganization.user,"name",t)},expression:"localOrganization.user.name"}}),a("span",{staticClass:"md-error"},[e._v(e._s(e.errors.first("userName")))])],1)],1):e._e()])])])],1)])},at=[],nt=(a("7f7f"),a("ac6a"),a("456d"),{computed:{isFormChanged:function(){var e=this;return Object.keys(this.fields).some(function(t){return e.fields[t].changed})}}}),rt=nt,it={name:"organization-details",mixins:[rt],props:{organization:{type:Object,default:function(){return{id:null,name:null,description:null,metadata:{},user:{}}}}},computed:{creating:function(){return!this.organization.id}},methods:{validate:function(){var e=Object(_["a"])(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$validator.validateAll();case 2:if(!e.sent){e.next=6;break}t=Object($["a"])({},this.localOrganization),!this.creating||this.localOrganization.user.id&&this.localOrganization.user.name||delete t.user,this.$emit("submit",t);case 6:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},data:function(){return{localOrganization:Object($["a"])({},this.organization,{metadata:JSON.stringify(this.organization.metadata,null,2)})}}},st=it,ot=Object(l["a"])(st,tt,at,!1,null,null,null);ot.options.__file="OrganizationDetails.vue";var ct=ot.exports,ut={name:"organization-create",components:{OrganizationDetails:ct},methods:Object($["a"])({},K(ye,ve),{doCreateOrganization:function(){var e=Object(_["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.createOrganization({organization:t});case 3:this.changeSnackbarMessage({message:"Organization saved!"}),this.$router.push({name:"select-organization"}),e.next=10;break;case 7:e.prev=7,e.t0=e["catch"](0),this.changeSnackbarMessage({message:"Error creating organization: ".concat(e.t0)});case 10:case"end":return e.stop()}},e,this,[[0,7]])}));return function(t){return e.apply(this,arguments)}}()})},lt=ut,dt=Object(l["a"])(lt,Xe,et,!1,null,null,null);dt.options.__file="OrganizationCreate.vue";var mt=dt.exports,pt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.organization?a("div",[a("organization-details",{attrs:{organization:e.organization},on:{submit:e.updateOrganization}}),a("policy-associations",{attrs:{policies:e.organization.policies,organizationId:e.organizationId,deleteAssociation:e.removePolicyInstance,addAssociation:e.addPolicyInstance}})],1):e._e()},ht=[],vt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"section"},[e.idToDelete?a("md-dialog-confirm",{attrs:{"md-active":!!e.idToDelete,"md-title":"Confirm remove","md-content":"Remove policy association "+e.idToDelete+"?"},on:{"md-cancel":e.cancelRemove,"md-confirm":e.confirmRemove}}):e._e(),a("add-policy-association",{attrs:{organizationId:e.organizationId,active:e.addingAssociation},on:{"update:active":function(t){e.addingAssociation=t},"add-association":e.confirmAdd}}),a("md-toolbar",{attrs:{"md-elevation":"0"}},[a("span",{staticClass:"md-title",staticStyle:{flex:"1"}},[e._v("Policies")]),a("md-button",{on:{click:function(t){e.addingAssociation=!0}}},[e._v("Assign policy")])],1),a("md-table",{attrs:{"md-model-id":""},scopedSlots:e._u([{key:"md-table-row",fn:function(t){var n=t.item;return a("md-table-row",{},[a("md-table-cell",{attrs:{"md-label":"ID"}},[a("router-link",{attrs:{to:{name:"policy",params:{organizationId:e.organizationId,policyId:n.id}}}},[e._v("\r\n          "+e._s(n.id)+"\r\n        ")])],1),a("md-table-cell",{attrs:{"md-label":"Name"}},[e._v(e._s(n.name))]),a("md-table-cell",{attrs:{"md-label":"Variables"}},[a("metadata",{attrs:{value:n.variables}})],1),a("md-table-cell",{attrs:{"md-label":"Version","md-numeric":""}},[e._v(e._s(n.version))]),a("md-table-cell",{attrs:{"md-label":"Instance","md-numeric":""}},[e._v(e._s(n.instance))]),a("md-table-cell",{attrs:{"md-label":"Actions"}},[a("md-button",{staticClass:"md-icon-button md-primary",on:{click:function(t){e.removePolicyInstance(n.id)}}},[a("md-icon",[e._v("delete")]),a("md-tooltip",[e._v("Remove policy association")])],1)],1)],1)}}]),model:{value:e.policies,callback:function(t){e.policies=t},expression:"policies"}},[a("md-table-empty-state",{attrs:{"md-label":"No policies","md-description":"No associated policies"}},[a("md-button",{staticClass:"md-primary",on:{click:function(t){e.addingAssociation=!0}}},[e._v("Assign policy")])],1)],1)],1)},ft=[],gt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("md-dialog",{attrs:{"md-active":e.localActive},on:{"update:mdActive":function(t){e.localActive=t}}},[a("md-dialog-title",{staticClass:"md-primary"},[e._v("Add policy")]),a("md-dialog-content",[a("policy-select",{attrs:{organizationId:e.organizationId},on:{selected:function(t){return e.selectedPolicy=t}}}),e.variableNames.length?a("form",{attrs:{novalidate:"",autocomplete:"false"}},[a("div",{staticClass:"md-subheading"},[e._v("Variables")]),a("div",{staticClass:"md-caption"},[e._v("This policy contains variables")]),e._l(e.variableNames,function(t){return a("md-field",{key:t,class:{"md-invalid":e.errors.has(t)}},[a("label",{attrs:{for:t}},[e._v(e._s(t))]),a("md-input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{id:t,name:t},model:{value:e.variables[t],callback:function(a){e.$set(e.variables,t,a)},expression:"variables[variable]"}})],1)})],2):e._e()],1),a("md-dialog-actions",[a("md-button",{on:{click:function(t){e.localActive=!1}}},[e._v("Cancel")]),a("md-button",{staticClass:"md-raised md-primary",on:{click:e.confirm}},[e._v("Ok")])],1)],1)},bt=[],yt=(a("1c4c"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("md-field",{staticClass:"policy-select-field"},[a("md-select",{attrs:{disabled:!e.anyPolicies,placeholder:e.anyPolicies?"Select a policy":"No available policies"},on:{"md-selected":e.policySelected},model:{value:e.selectedPolicyId,callback:function(t){e.selectedPolicyId=t},expression:"selectedPolicyId"}},e._l(e.policies,function(t){return a("md-option",{key:t.id,attrs:{value:t.id}},[e._v(e._s(t.name))])}))],1)}),_t=[],It=(a("7514"),{name:"policy-select",props:{organizationId:String},data:function(){return{selectedPolicyId:null}},computed:Object($["a"])({},Object(A["c"])(["getPolicies"]),{policies:function(){return Object(N["differenceBy"])("id",this.getPolicies(this.organizationId))(this.exclude)},anyPolicies:function(){return!!this.policies.length},selectedPolicy:function(){var e=this;return this.selectedPolicyId&&this.policies.find(function(t){var a=t.id;return a===e.selectedPolicyId})}}),methods:Object($["a"])({},K([le]),{policySelected:function(){this.$emit("selected",this.selectedPolicy)}}),created:function(){var e=Object(_["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:this.loadPolicies(this.organizationId);case 1:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()}),xt=It,Ot=(a("7e20"),Object(l["a"])(xt,yt,_t,!1,null,null,null));Ot.options.__file="PolicySelect.vue";var wt=Ot.exports,zt=regeneratorRuntime.mark(kt);function kt(e){var t,a;return regeneratorRuntime.wrap(function(n){while(1)switch(n.prev=n.next){case 0:t=/\{(\w+)\}?/g;case 1:if(!(a=t.exec(e))){n.next=6;break}return n.next=4,a[1];case 4:n.next=1;break;case 6:case"end":return n.stop()}},zt,this)}var jt=Object(N["flow"])(Object(N["get"])("statements.Statement"),Object(N["flatMap"])(Object(N["flow"])(Object(N["pick"])(["Action","Resource"]),N["values"],N["flatten"])),Object(N["map"])(Object(N["flow"])(kt,Array.from)),N["flatten"],N["compact"],N["uniq"]),Ct={name:"add-policy-association",props:{active:{type:Boolean},organizationId:{type:String,required:!0}},components:{PolicySelect:wt},data:function(){return{selectedPolicy:null,variables:{}}},computed:{localActive:{get:function(){return this.active},set:function(e){this.$emit("update:active",e)}},variableNames:function(){return jt(this.selectedPolicy)}},methods:{confirm:function(){var e=Object(_["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$validator.validateAll();case 2:if(e.sent){e.next=4;break}return e.abrupt("return");case 4:this.$emit("add-association",{id:this.selectedPolicy.id,variables:this.variables});case 5:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()}},Rt=Ct,St=Object(l["a"])(Rt,gt,bt,!1,null,null,null);St.options.__file="AddPolicyAssociation.vue";var Ut=St.exports,Tt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.value&&Object.keys(e.value).length>0?a("ul",e._l(e.value,function(t,n){return a("li",{key:n},[a("code",[e._v(e._s(n))]),e._v(": "),a("strong",[a("code",[e._v(e._s(t))])])])})):a("span",[e._v(" - ")])},Pt=[],Dt={name:"metadata",props:{value:Object}},$t=Dt,At=(a("a72b"),Object(l["a"])($t,Tt,Pt,!1,null,"2e68a735",null));At.options.__file="Metadata.vue";var Et=At.exports,Nt={name:"policy-associations",props:{policies:{type:Array,required:!0},organizationId:{type:String,required:!0},deleteAssociation:{type:Function,required:!0},addAssociation:{type:Function,required:!0}},components:{AddPolicyAssociation:Ut,Metadata:Et},data:function(){return{addingAssociation:!1,idToDelete:null}},methods:Object($["a"])({},K(ve),{removePolicyInstance:function(e){this.idToDelete=e},confirmRemove:function(){var e=Object(_["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.deleteAssociation(this.idToDelete);case 3:this.idToDelete=null,this.changeSnackbarMessage({message:"Policy association removed successfully"}),e.next=10;break;case 7:e.prev=7,e.t0=e["catch"](0),this.changeSnackbarMessage({message:"Error removing policy association: ".concat(e.t0)});case 10:case"end":return e.stop()}},e,this,[[0,7]])}));return function(){return e.apply(this,arguments)}}(),cancelRemove:function(){this.idToDelete=null},confirmAdd:function(){var e=Object(_["a"])(regeneratorRuntime.mark(function e(t){var a,n;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return a=t.id,n=t.variables,e.prev=1,e.next=4,this.addAssociation({id:a,variables:n});case 4:this.addingAssociation=null,this.changeSnackbarMessage({message:"Policy association addedd successfully"}),e.next=11;break;case 8:e.prev=8,e.t0=e["catch"](1),this.changeSnackbarMessage({message:"Error adding policy association: ".concat(e.t0)});case 11:case"end":return e.stop()}},e,this,[[1,8]])}));return function(t){return e.apply(this,arguments)}}()})},Mt=Nt,qt=Object(l["a"])(Mt,vt,ft,!1,null,null,null);qt.options.__file="PolicyAssociations.vue";var Bt=qt.exports,Kt={name:"organization",props:{organizationId:String},components:{OrganizationDetails:ct,PolicyAssociations:Bt},computed:Object($["a"])({},Object(A["c"])(["getOrganization"]),{organization:function(){return this.getOrganization(this.organizationId)}}),methods:Object($["a"])({},K(ie,ve),{updateOrganization:function(){var e=Object(_["a"])(regeneratorRuntime.mark(function e(t){var a,n,r;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return a=t.name,n=t.description,r=t.metadata,e.prev=1,e.next=4,this.$udaru.updateOrganization(this.organizationId,{name:a,description:n,metadata:r});case 4:this.changeSnackbarMessage({message:"Organization saved!"}),e.next=10;break;case 7:e.prev=7,e.t0=e["catch"](1),this.changeSnackbarMessage({message:'Error saving organization: "'.concat(e.t0,'"')});case 10:this.loadOrganizationData();case 11:case"end":return e.stop()}},e,this,[[1,7]])}));return function(t){return e.apply(this,arguments)}}(),removePolicyInstance:function(){var e=Object(_["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$udaru.removeOrganizationPolicy(this.organizationId,t);case 2:return e.next=4,this.loadOrganizationData();case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),addPolicyInstance:function(){var e=Object(_["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$udaru.addOrUpdateOrganizationPolicy(this.organizationId,t);case 2:return e.next=4,this.loadOrganizationData();case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),loadOrganizationData:function(){var e=Object(_["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.loadOrganization(this.organizationId);case 2:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()}),watch:{$route:function(){this.loadOrganization(this.organizationId)}},created:function(){this.loadOrganizationData()}},Ft=Kt,Lt=Object(l["a"])(Ft,pt,ht,!1,null,null,null);Lt.options.__file="Organization.vue";var Vt=Lt.exports,Jt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("md-app",[a("md-app-toolbar",{staticClass:"md-large md-dense md-transparent"},[a("div",{staticClass:"md-toolbar-row"},[a("div",{staticClass:"md-toolbar-section-start"},[a("toolbar-logo"),a("span",{staticClass:"md-title"},[e._v("Organizations")])],1),a("div",{staticClass:"md-toolbar-section-end"},[a("md-button",{staticClass:"md-icon-button",attrs:{to:{name:"settings"}}},[a("md-icon",[e._v("settings")])],1)],1)]),a("div",{staticClass:"md-layout md-toolbar-row md-alignment-center-center"},[a("md-tabs",{staticClass:"md-transparent"},[a("md-tab",{attrs:{to:"/organizations/select","md-icon":"storage"}}),a("md-tab",{attrs:{to:"/organizations/create","md-icon":"add_box"}})],1)],1)]),a("md-app-content",[a("router-view")],1)],1)},Ht=[],Yt={name:"organizations",components:{ToolbarLogo:Ke}},Gt=Yt,Wt=Object(l["a"])(Gt,Jt,Ht,!1,null,null,null);Wt.options.__file="Organizations.vue";var Zt=Wt.exports,Qt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.team?a("div",[a("team-details",{attrs:{team:e.team},on:{submit:e.updateTeam}}),a("div",{staticClass:"section"},[a("md-toolbar",{attrs:{"md-elevation":"0"}},[a("span",{staticClass:"md-title",staticStyle:{flex:"1"}},[e._v("Users")]),a("div",{staticClass:"md-toolbar-section-end"},[a("user-select",{attrs:{layout:"box",exclude:e.team.users,organizationId:e.organizationId},model:{value:e.selectedUserId,callback:function(t){e.selectedUserId=t},expression:"selectedUserId"}}),a("md-button",{attrs:{disabled:!e.selectedUserId},on:{click:function(t){e.addUser(e.selectedUserId)}}},[e._v("Add user")])],1)]),a("md-table",{scopedSlots:e._u([{key:"md-table-row",fn:function(t){var n=t.item;return a("md-table-row",{},[a("md-table-cell",{attrs:{"md-label":"ID"}},[a("router-link",{attrs:{to:{name:"user",params:{organizationId:e.organizationId,userId:n.id}}}},[e._v("\n          "+e._s(n.id)+"\n          ")])],1),a("md-table-cell",{attrs:{"md-label":"Name"}},[e._v(e._s(n.name))]),a("md-table-cell",{attrs:{"md-label":"Actions"}},[a("md-button",{staticClass:"md-icon-button md-primary",on:{click:function(t){e.removeUser(n.id)}}},[a("md-icon",[e._v("delete")]),a("md-tooltip",[e._v("Remove user from team")])],1)],1)],1)}}]),model:{value:e.team.users,callback:function(t){e.$set(e.team,"users",t)},expression:"team.users"}},[a("md-table-empty-state",{attrs:{"md-label":"No users","md-description":"The team doesn't have any users"}})],1)],1),a("policy-associations",{attrs:{policies:e.team.policies,organizationId:e.organizationId,deleteAssociation:e.removePolicyInstance,addAssociation:e.addPolicyInstance}})],1):e._e()},Xt=[],ea=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("md-autocomplete",{attrs:{disabled:!e.anyUsers,"md-dense":"","md-options":e.users.map(function(e){var t=e.id;return t}),"md-layout":e.layout,"md-input-placeholder":e.anyUsers?"Select a user":"No available users"},model:{value:e.localValue,callback:function(t){e.localValue=t},expression:"localValue"}})},ta=[],aa={name:"user-select",props:{organizationId:String,value:String,layout:{type:String},exclude:{type:Array,default:function(){return[]}}},computed:Object($["a"])({},Object(A["c"])(["getUsers"]),{users:function(){return Object(N["differenceBy"])("id",this.getUsers(this.organizationId))(this.exclude)},anyUsers:function(){return!!this.users.length},localValue:{get:function(){return this.value},set:function(e){this.$emit("input",e)}}}),methods:Object($["a"])({},K([se])),created:function(){var e=Object(_["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:this.loadUsers(this.organizationId);case 1:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},na=aa,ra=(a("a220"),Object(l["a"])(na,ea,ta,!1,null,null,null));ra.options.__file="UserSelect.vue";var ia=ra.exports,sa=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("form",{attrs:{novalidate:"",autocomplete:"off"},on:{submit:function(t){return t.preventDefault(),e.validate(t)}}},[a("div",{staticClass:"section"},[a("md-toolbar",{attrs:{"md-elevation":"0"}},[a("span",{staticClass:"md-title",staticStyle:{flex:"1"}},[e._v(e._s(e.creating?"Create team":"Team"))]),a("md-button",{on:{click:function(t){e.$router.go(-1)}}},[e._v("Cancel")]),a("md-button",{attrs:{disabled:!e.isFormChanged,type:"submit"}},[e._v(e._s(e.creating?"Create":"Save"))])],1),a("md-content",[a("div",{staticClass:"md-layout md-alignment-center-center"},[a("div",{staticClass:"md-layout-item md-size-50"},[a("div",[a("md-field",{class:{"md-invalid":e.errors.has("id")}},[a("label",{attrs:{for:"id"}},[e._v("Team ID")]),a("md-input",{directives:[{name:"validate",rawName:"v-validate",value:"required|udaru_id",expression:"'required|udaru_id'"}],attrs:{id:"id",name:"id",autofocus:"",readonly:!e.creating},model:{value:e.localTeam.id,callback:function(t){e.$set(e.localTeam,"id",t)},expression:"localTeam.id"}}),a("span",{staticClass:"md-error"},[e._v(e._s(e.errors.first("id")))])],1)],1),a("div",[a("md-field",{class:{"md-invalid":e.errors.has("name")}},[a("label",{attrs:{for:"name"}},[e._v("Team name")]),a("md-input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{id:"name",name:"name"},model:{value:e.localTeam.name,callback:function(t){e.$set(e.localTeam,"name",t)},expression:"localTeam.name"}}),a("span",{staticClass:"md-error"},[e._v(e._s(e.errors.first("name")))])],1)],1),a("div",[a("md-field",{class:{"md-invalid":e.errors.has("description")}},[a("label",{attrs:{for:"description"}},[e._v("Team description")]),a("md-input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{id:"description",name:"description"},model:{value:e.localTeam.description,callback:function(t){e.$set(e.localTeam,"description",t)},expression:"localTeam.description"}}),a("span",{staticClass:"md-error"},[e._v(e._s(e.errors.first("description")))])],1)],1),a("div",[a("md-field",{class:{"md-invalid":e.errors.has("metadata")}},[a("label",{attrs:{for:"metadata"}},[e._v("Metadata")]),a("md-textarea",{directives:[{name:"validate",rawName:"v-validate",value:"json",expression:"'json'"}],attrs:{id:"metadata",name:"metadata"},model:{value:e.localTeam.metadata,callback:function(t){e.$set(e.localTeam,"metadata",t)},expression:"localTeam.metadata"}}),a("span",{staticClass:"md-error"},[e._v(e._s(e.errors.first("metadata")))])],1)],1),e.creating?a("div",[a("md-field",{class:{"md-invalid":e.errors.has("userId")}},[a("label",{attrs:{for:"userId"}},[e._v("Administrator ID")]),a("md-input",{directives:[{name:"validate",rawName:"v-validate",value:"udaru_id",expression:"'udaru_id'"}],attrs:{id:"userId",name:"userId",autofocus:"",readonly:!e.creating},model:{value:e.localTeam.user.id,callback:function(t){e.$set(e.localTeam.user,"id",t)},expression:"localTeam.user.id"}}),a("span",{staticClass:"md-error"},[e._v(e._s(e.errors.first("userId")))])],1)],1):e._e(),e.creating?a("div",[a("md-field",{class:{"md-invalid":e.errors.has("userName")}},[a("label",{attrs:{for:"userName"}},[e._v("Administrator name")]),a("md-input",{attrs:{id:"userName",name:"userName"},model:{value:e.localTeam.user.name,callback:function(t){e.$set(e.localTeam.user,"name",t)},expression:"localTeam.user.name"}}),a("span",{staticClass:"md-error"},[e._v(e._s(e.errors.first("userName")))])],1)],1):e._e()])])])],1)])},oa=[],ca={name:"team-details",mixins:[rt],props:{team:{type:Object,default:function(){return{id:null,name:null,description:null,metadata:{},user:{}}}}},computed:{creating:function(){return!this.team.id}},methods:{validate:function(){var e=Object(_["a"])(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$validator.validateAll();case 2:if(!e.sent){e.next=6;break}t=Object($["a"])({},this.localTeam),!this.creating||this.localTeam.user.id&&this.localTeam.user.name||delete t.user,this.$emit("submit",t);case 6:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},data:function(){return{localTeam:Object($["a"])({},this.team,{metadata:JSON.stringify(this.team.metadata,null,2)})}}},ua=ca,la=Object(l["a"])(ua,sa,oa,!1,null,null,null);la.options.__file="TeamDetails.vue";var da=la.exports,ma={name:"team",props:{organizationId:String,teamId:String},components:{PolicyAssociations:Bt,UserSelect:ia,TeamDetails:da},data:function(){return{selectedUserId:null}},computed:Object($["a"])({},Object(A["c"])(["getTeam"]),{team:function(){return this.getTeam(this.organizationId,this.teamId)}}),methods:Object($["a"])({},K([ue,pe,he,ve]),{updateTeam:function(){var e=Object(_["a"])(regeneratorRuntime.mark(function e(t){var a,n,r;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return a=t.name,n=t.description,r=t.metadata,e.prev=1,e.next=4,this.$udaru.updateTeam(this.organizationId,this.teamId,{name:a,description:n,metadata:r});case 4:this.changeSnackbarMessage({message:"Team saved!"}),e.next=10;break;case 7:e.prev=7,e.t0=e["catch"](1),this.changeSnackbarMessage({message:'Error saving team: "'.concat(e.t0,'"')});case 10:this.loadTeamData();case 11:case"end":return e.stop()}},e,this,[[1,7]])}));return function(t){return e.apply(this,arguments)}}(),addUser:function(){var e=Object(_["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.addUserToTeam({organizationId:this.organizationId,teamId:this.teamId,userId:t});case 3:this.changeSnackbarMessage({message:"User successfully added to team"}),this.loadTeamData(),e.next=10;break;case 7:e.prev=7,e.t0=e["catch"](0),this.changeSnackbarMessage({message:"Error adding user to team: ".concat(e.t0)});case 10:case"end":return e.stop()}},e,this,[[0,7]])}));return function(t){return e.apply(this,arguments)}}(),removeUser:function(){var e=Object(_["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.removeUserFromTeam({organizationId:this.organizationId,teamId:this.teamId,userId:t});case 3:this.changeSnackbarMessage({message:"User successfully removed from team"}),this.loadTeamData(),e.next=10;break;case 7:e.prev=7,e.t0=e["catch"](0),this.changeSnackbarMessage({message:"Error removing user from team: ".concat(e.t0)});case 10:case"end":return e.stop()}},e,this,[[0,7]])}));return function(t){return e.apply(this,arguments)}}(),removePolicyInstance:function(){var e=Object(_["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$udaru.removeTeamPolicy(this.organizationId,this.teamId,t);case 2:return e.next=4,this.loadTeamData();case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),addPolicyInstance:function(){var e=Object(_["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$udaru.addOrUpdateTeamPolicy(this.organizationId,this.teamId,t);case 2:return e.next=4,this.loadTeamData();case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),loadTeamData:function(){this.loadTeam({organizationId:this.organizationId,teamId:this.teamId})}}),created:function(){this.loadTeamData()}},pa=ma,ha=Object(l["a"])(pa,Qt,Xt,!1,null,null,null);ha.options.__file="Team.vue";var va=ha.exports,fa=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("team-details",{on:{submit:e.doCreateTeam}})},ga=[],ba={name:"team-create",props:{organizationId:String},components:{TeamDetails:da},methods:Object($["a"])({},K(fe,ve),{doCreateTeam:function(){var e=Object(_["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.createTeam({organizationId:this.organizationId,team:t});case 3:this.changeSnackbarMessage({message:"Team created!"}),this.$router.push({name:"teams",params:{organizationId:this.organizationId}}),e.next=10;break;case 7:e.prev=7,e.t0=e["catch"](0),this.changeSnackbarMessage({message:'Error creating team: "'.concat(e.t0,'"')});case 10:case"end":return e.stop()}},e,this,[[0,7]])}));return function(t){return e.apply(this,arguments)}}()})},ya=ba,_a=Object(l["a"])(ya,fa,ga,!1,null,null,null);_a.options.__file="TeamCreate.vue";var Ia=_a.exports,xa=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"teams"},[e.idToDelete?a("md-dialog-confirm",{attrs:{"md-active":!!e.idToDelete,"md-title":"Confirm delete","md-content":"Delete team "+e.idToDelete+"?"},on:{"md-cancel":e.onCancel,"md-confirm":e.onConfirm}}):e._e(),a("div",{staticClass:"section"},[a("md-toolbar",{attrs:{"md-elevation":"0"}},[a("span",{staticClass:"md-title",staticStyle:{flex:"1"}},[e._v("Teams")]),a("md-button",{attrs:{to:{name:"team-create",params:{organizationId:e.organizationId}}}},[e._v("\n        Create new team\n      ")])],1),e.searched?a("md-table",{scopedSlots:e._u([{key:"md-table-row",fn:function(t){var n=t.item;return a("md-table-row",{},[a("md-table-cell",{attrs:{"md-label":"ID"}},[a("router-link",{attrs:{to:{name:"team",params:{organizationId:e.organizationId,teamId:n.id}}}},[e._v("\n            "+e._s(n.id)+"\n          ")])],1),a("md-table-cell",{attrs:{"md-label":"Name"}},[e._v(e._s(n.name))]),a("md-table-cell",{attrs:{"md-label":"Metadata"}},[a("metadata",{attrs:{value:n.metadata}})],1),a("md-table-cell",{attrs:{"md-label":"# Users","md-numeric":""}},[e._v(e._s(n.usersCount||"-"))]),a("md-table-cell",{attrs:{"md-label":"Actions"}},[a("md-button",{staticClass:"md-icon-button md-dense md-primary",on:{click:function(t){e.deleteTeam(n.id)}}},[a("md-icon",[e._v("delete")]),a("md-tooltip",[e._v("Delete team")])],1)],1)],1)}}]),model:{value:e.searched,callback:function(t){e.searched=t},expression:"searched"}},[a("md-table-toolbar",[a("div",{staticClass:"md-toolbar-section-end"},[a("md-field",{attrs:{"md-clearable":""}},[a("md-input",{attrs:{placeholder:"Search teams..."},on:{input:e.searchOnTable},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})],1)],1)]),a("md-table-empty-state",{attrs:{"md-label":"No teams found","md-description":"No team found for this '"+e.search+"' query. Try a different search term or create a new team."}})],1):e._e()],1)],1)},Oa=[],wa=(a("386d"),a("6762"),a("2fdb"),a("6b54"),function(e){return e.toString().toLowerCase()}),za=function(e,t){return t?e.filter(function(e){return wa(e.name).includes(wa(t))}):e},ka={name:"teams",props:{organizationId:String},components:{Metadata:Et},computed:Object($["a"])({},Object(A["c"])(["getTeams"]),{searched:function(){return this.searchResults||this.getTeams(this.organizationId)}}),data:function(){return{idToDelete:null,search:null,searchResults:null}},methods:Object($["a"])({},K(ce,ve),{searchOnTable:function(){this.searchResults=za(this.getTeams(this.organizationId),this.search)},deleteTeam:function(e){this.idToDelete=e},onConfirm:function(){var e=Object(_["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.$udaru.deleteTeam(this.idToDelete);case 3:this.idToDelete=null,this.changeSnackbarMessage({message:"Team deleted"}),this.loadTeamsData(),e.next=11;break;case 8:e.prev=8,e.t0=e["catch"](0),this.changeSnackbarMessage({message:"Error deleting team: ".concat(e.t0)});case 11:case"end":return e.stop()}},e,this,[[0,8]])}));return function(){return e.apply(this,arguments)}}(),onCancel:function(){this.idToDelete=null},loadTeamsData:function(){this.loadTeams(this.organizationId)}}),mounted:function(){var e=Object(_["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:this.loadTeamsData();case 1:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},ja=ka,Ca=(a("7360"),Object(l["a"])(ja,xa,Oa,!1,null,"863cf0f8",null));Ca.options.__file="Teams.vue";var Ra=Ca.exports,Sa=function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.user?a("div",[a("user-details",{attrs:{user:e.user},on:{success:e.loadUserData}}),a("div",{staticClass:"section"},[a("md-toolbar",{attrs:{"md-elevation":"0"}},[a("span",{staticClass:"md-title",staticStyle:{flex:"1"}},[e._v("Teams")]),a("team-select",{attrs:{selectedTeamId:e.selectedTeamId,exclude:e.user.teams,organizationId:e.organizationId},on:{selected:function(t){return e.selectedTeamId=t}}}),a("md-button",{attrs:{disabled:!e.selectedTeamId},on:{click:function(t){e.addToTeam(e.selectedTeamId)}}},[e._v("Add to team")])],1),a("md-table",{scopedSlots:e._u([{key:"md-table-row",fn:function(t){var n=t.item;return a("md-table-row",{},[a("md-table-cell",{attrs:{"md-label":"ID"}},[a("router-link",{attrs:{to:{name:"team",params:{organizationId:e.organizationId,teamId:n.id}}}},[e._v("\n          "+e._s(n.id)+"\n          ")])],1),a("md-table-cell",{attrs:{"md-label":"Name"}},[e._v(e._s(n.name))]),a("md-table-cell",{attrs:{"md-label":"Actions"}},[a("md-button",{staticClass:"md-icon-button md-primary",on:{click:function(t){e.removeFromTeam(n.id)}}},[a("md-icon",[e._v("delete")]),a("md-tooltip",[e._v("Remove from team")])],1)],1)],1)}}]),model:{value:e.user.teams,callback:function(t){e.$set(e.user,"teams",t)},expression:"user.teams"}},[a("md-table-empty-state",{attrs:{"md-label":"No teams","md-description":"The user doesn't belong to any teams"}})],1)],1),a("policy-associations",{attrs:{policies:e.user.policies,organizationId:e.organizationId,deleteAssociation:e.removePolicyInstance,addAssociation:e.addPolicyInstance}})],1):e._e()},Ua=[],Ta=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("md-field",{staticClass:"team-select-field"},[a("md-select",{attrs:{disabled:!e.anyTeams,"md-dense":"",placeholder:e.anyTeams?"Select a team":"No available teams",value:e.selectedTeamId},on:{"md-selected":function(t){return e.$emit("selected",t)}}},e._l(e.teams,function(t){return a("md-option",{key:t.id,attrs:{value:t.id}},[e._v(e._s(t.name))])}))],1)},Pa=[],Da={name:"team-select",props:{organizationId:String,exclude:Array,selectedTeamId:String},computed:Object($["a"])({},Object(A["c"])(["getTeams"]),{teams:function(){return Object(N["differenceBy"])("id",this.getTeams(this.organizationId))(this.exclude)},anyTeams:function(){return!!this.teams.length}}),methods:Object($["a"])({},K([ce])),created:function(){var e=Object(_["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:this.loadTeams(this.organizationId);case 1:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},$a=Da,Aa=(a("5fd1"),Object(l["a"])($a,Ta,Pa,!1,null,null,null));Aa.options.__file="TeamSelect.vue";var Ea=Aa.exports,Na=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("form",{attrs:{novalidate:"",autocomplete:"off"},on:{submit:function(t){return t.preventDefault(),e.validate(t)}}},[a("div",{staticClass:"section"},[a("md-toolbar",{attrs:{"md-elevation":"0"}},[a("span",{staticClass:"md-title",staticStyle:{flex:"1"}},[e._v(e._s(e.creating?"Create user":"User"))]),a("md-button",{on:{click:function(t){e.$router.go(-1)}}},[e._v("Cancel")]),a("md-button",{attrs:{disabled:!e.isFormChanged,type:"submit"}},[e._v(e._s(e.creating?"Create":"Save"))])],1),a("md-content",[a("div",{staticClass:"md-layout md-alignment-center-center"},[a("div",{staticClass:"md-layout-item md-size-50"},[a("div",[a("md-field",{class:{"md-invalid":e.errors.has("id")}},[a("label",{attrs:{for:"id"}},[e._v("User ID")]),a("md-input",{directives:[{name:"validate",rawName:"v-validate",value:"required|udaru_id",expression:"'required|udaru_id'"}],attrs:{id:"id",name:"id",autofocus:"",readonly:!e.creating},model:{value:e.localUser.id,callback:function(t){e.$set(e.localUser,"id",t)},expression:"localUser.id"}}),a("span",{staticClass:"md-error"},[e._v(e._s(e.errors.first("id")))])],1)],1),a("div",[a("md-field",{class:{"md-invalid":e.errors.has("name")}},[a("label",{attrs:{for:"name"}},[e._v("User name")]),a("md-input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{id:"name",name:"name"},model:{value:e.localUser.name,callback:function(t){e.$set(e.localUser,"name",t)},expression:"localUser.name"}}),a("span",{staticClass:"md-error"},[e._v(e._s(e.errors.first("name")))])],1)],1),a("div",[a("md-field",{class:{"md-invalid":e.errors.has("metadata")}},[a("label",{attrs:{for:"metadata"}},[e._v("Metadata")]),a("md-textarea",{directives:[{name:"validate",rawName:"v-validate",value:"json",expression:"'json'"}],attrs:{id:"metadata",name:"metadata"},model:{value:e.localUser.metadata,callback:function(t){e.$set(e.localUser,"metadata",t)},expression:"localUser.metadata"}}),a("span",{staticClass:"md-error"},[e._v(e._s(e.errors.first("metadata")))])],1)],1)])])])],1)])},Ma=[],qa={name:"user-details",mixins:[rt],props:{user:{type:Object,default:function(){return{id:null,name:null,metadata:{}}}}},computed:{creating:function(){return!this.user.id}},methods:{validate:function(){var e=Object(_["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$validator.validateAll();case 2:if(!e.sent){e.next=4;break}this.$emit("submit",this.localUser);case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},data:function(){return{localUser:Object($["a"])({},this.user,{metadata:JSON.stringify(this.user.metadata,null,2)})}}},Ba=qa,Ka=Object(l["a"])(Ba,Na,Ma,!1,null,null,null);Ka.options.__file="UserDetails.vue";var Fa=Ka.exports,La={name:"user",props:{organizationId:String,userId:String},components:{PolicyAssociations:Bt,TeamSelect:Ea,UserDetails:Fa},data:function(){return{selectedTeamId:null}},computed:Object($["a"])({},Object(A["c"])(["getUser"]),{user:function(){return this.getUser(this.organizationId,this.userId)}}),methods:Object($["a"])({},K(oe,pe,he,ve),{updateUser:function(){var e=Object(_["a"])(regeneratorRuntime.mark(function e(t){var a,n;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return a=t.name,n=t.metadata,e.prev=1,e.next=4,this.$udaru.updateUser(this.organizationId,this.userId,{name:a,metadata:n});case 4:this.changeSnackbarMessage({message:"User saved!"}),e.next=10;break;case 7:e.prev=7,e.t0=e["catch"](1),this.changeSnackbarMessage({message:'Error saving user: "'.concat(e.t0,'"')});case 10:this.loadUserData();case 11:case"end":return e.stop()}},e,this,[[1,7]])}));return function(t){return e.apply(this,arguments)}}(),addToTeam:function(){var e=Object(_["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.addUserToTeam({organizationId:this.organizationId,userId:this.userId,teamId:t});case 2:this.selectedTeamId=null,this.loadUserData();case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),removeFromTeam:function(){var e=Object(_["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.removeUserFromTeam({organizationId:this.organizationId,userId:this.userId,teamId:t});case 2:this.selectedTeamId=null,this.loadUserData();case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),removePolicyInstance:function(){var e=Object(_["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$udaru.removeUserPolicy(this.organizationId,this.userId,t);case 2:return e.next=4,this.loadUserData();case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),addPolicyInstance:function(){var e=Object(_["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$udaru.addOrUpdateUserPolicy(this.organizationId,this.userId,t);case 2:return e.next=4,this.loadUserData();case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),loadUserData:function(){this.loadUser({organizationId:this.organizationId,userId:this.userId})}}),created:function(){this.loadUserData()}},Va=La,Ja=Object(l["a"])(Va,Sa,Ua,!1,null,null,null);Ja.options.__file="User.vue";var Ha=Ja.exports,Ya=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("user-details",{on:{submit:e.doCreateUser}})},Ga=[],Wa={name:"user-create",props:{organizationId:String},components:{UserDetails:Fa},methods:Object($["a"])({},K(ge,ve),{doCreateUser:function(){var e=Object(_["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.createUser({organizationId:this.organizationId,user:t});case 3:this.changeSnackbarMessage({message:"User created!"}),this.$router.push({name:"users",params:{organizationId:this.organizationId}}),e.next=10;break;case 7:e.prev=7,e.t0=e["catch"](0),this.changeSnackbarMessage({message:'Error creating user: "'.concat(e.t0,'"')});case 10:case"end":return e.stop()}},e,this,[[0,7]])}));return function(t){return e.apply(this,arguments)}}()})},Za=Wa,Qa=Object(l["a"])(Za,Ya,Ga,!1,null,null,null);Qa.options.__file="UserCreate.vue";var Xa=Qa.exports,en=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"users"},[e.idToDelete?a("md-dialog-confirm",{attrs:{"md-active":!!e.idToDelete,"md-title":"Confirm delete","md-content":"Delete user "+e.idToDelete+"?"},on:{"md-cancel":e.onCancel,"md-confirm":e.onConfirm}}):e._e(),a("div",{staticClass:"section"},[a("md-toolbar",{attrs:{"md-elevation":"0"}},[a("div",{staticClass:"md-title",staticStyle:{flex:"1"}},[e._v("Users")]),a("md-button",{attrs:{to:{name:"user-create",params:{organizationId:e.organizationId}}}},[e._v("\n        Create new user\n      ")])],1),e.searched?a("md-table",{scopedSlots:e._u([{key:"md-table-row",fn:function(t){var n=t.item;return a("md-table-row",{},[a("md-table-cell",{attrs:{"md-label":"ID"}},[a("router-link",{attrs:{to:{name:"user",params:{organizationId:e.organizationId,userId:n.id}}}},[e._v("\n            "+e._s(n.id)+"\n          ")])],1),a("md-table-cell",{attrs:{"md-label":"Name"}},[e._v(e._s(n.name))]),a("md-table-cell",{attrs:{"md-label":"Metadata"}},[a("metadata",{attrs:{value:n.metadata}})],1),a("md-table-cell",{attrs:{"md-label":"Actions"}},[a("md-button",{staticClass:"md-icon-button md-dense md-primary",on:{click:function(t){e.deleteUser(n.id)}}},[a("md-icon",[e._v("delete")]),a("md-tooltip",[e._v("Delete user")])],1)],1)],1)}}]),model:{value:e.searched,callback:function(t){e.searched=t},expression:"searched"}},[a("md-table-toolbar",[a("div",{staticClass:"md-toolbar-section-end"},[a("md-field",{attrs:{"md-clearable":""}},[a("md-input",{attrs:{placeholder:"Search users..."},on:{input:e.searchOnTable},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})],1)],1)]),a("md-table-empty-state",{attrs:{"md-label":"No users found","md-description":"No user found for this '"+e.search+"' query. Try a different search term or create a new user."}})],1):e._e()],1)],1)},tn=[],an=function(e){return e.toString().toLowerCase()},nn=function(e,t){return t?e.filter(function(e){return an(e.name).includes(an(t))}):e},rn={name:"users",props:{organizationId:String},components:{Metadata:Et},computed:Object($["a"])({},Object(A["c"])(["getUsers"]),Object(A["d"])(["currentUser"]),{searched:function(){return this.searchResults||this.getUsers(this.organizationId)}}),data:function(){return{idToDelete:null,search:null,searchResults:null}},methods:Object($["a"])({},K(se,ve,_e),{searchOnTable:function(){this.searchResults=nn(this.getUsers(this.organizationId),this.search)},deleteUser:function(e){if(this.isCurrentUser(e))return this.changeSnackbarMessage({message:"You cannot delete yourself!"});this.idToDelete=e},onConfirm:function(){var e=Object(_["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.$udaru.deleteUser(this.idToDelete);case 3:this.idToDelete=null,this.changeSnackbarMessage({message:"User deleted"}),this.loadUsersData(),e.next=11;break;case 8:e.prev=8,e.t0=e["catch"](0),this.changeSnackbarMessage({message:"Error deleting user: ".concat(e.t0)});case 11:case"end":return e.stop()}},e,this,[[0,8]])}));return function(){return e.apply(this,arguments)}}(),onCancel:function(){this.idToDelete=null},isCurrentUser:function(e){return this.currentUser&&this.currentUser.id===e},loadUsersData:function(){this.loadUsers(this.organizationId)}}),mounted:function(){var e=Object(_["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:this.loadUsersData(),this.loadCurrentUser();case 2:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},sn=rn,on=(a("fa08"),Object(l["a"])(sn,en,tn,!1,null,"6267bcc3",null));on.options.__file="Users.vue";var cn=on.exports,un=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"policies"},[a("service-key-dialog",{attrs:{operation:e.serviceKeyOperation},on:{cancel:e.onCancel}}),a("div",{staticClass:"section"},[a("md-toolbar",{attrs:{"md-elevation":"0"}},[a("div",{staticClass:"md-title",staticStyle:{flex:"1"}},[e._v("Policies")]),a("md-button",{attrs:{to:{name:"policy-create",params:{organizationId:e.organizationId}}}},[e._v("\n        Create new policy\n      ")])],1),e.searched?a("md-table",{scopedSlots:e._u([{key:"md-table-row",fn:function(t){var n=t.item;return a("md-table-row",{},[a("md-table-cell",{attrs:{"md-label":"ID"}},[a("router-link",{attrs:{to:{name:"policy",params:{organizationId:e.organizationId,policyId:n.id}}}},[e._v("\n            "+e._s(n.id)+"\n          ")])],1),a("md-table-cell",{attrs:{"md-label":"Name"}},[e._v(e._s(n.name))]),a("md-table-cell",{attrs:{"md-label":"Statements"}},[n.statements.Statement?a("ul",e._l(n.statements.Statement,function(t,n){var r=t.Action,i=t.Effect,s=t.Resource;return a("li",{key:n},[a("strong",[e._v(e._s(i))]),r.length>1||s.length>1?a("ul",[a("li",[e._v("\n                  action"+e._s(r.length>1?"s":"")+" "),a("code",[e._v(e._s(r.join(", ")))])]),a("li",[e._v("\n                  on resource"+e._s(s.length>1?"s":"")+" "),a("code",[e._v(e._s(s.join(", ")))])])]):a("span",[e._v("\n                action "),a("code",[e._v(e._s(r[0]))]),e._v(" on resource "),a("code",[e._v(e._s(s[0]))])])])})):a("span",[e._v(" - ")])]),a("md-table-cell",{attrs:{"md-label":"Version","md-numeric":""}},[e._v(e._s(n.version))]),a("md-table-cell",{attrs:{"md-label":"Actions"}},[a("md-button",{staticClass:"md-icon-button md-dense md-primary",on:{click:function(t){e.deletePolicy(n.id)}}},[a("md-icon",[e._v("delete")]),a("md-tooltip",[e._v("Delete policy")])],1)],1)],1)}}]),model:{value:e.searched,callback:function(t){e.searched=t},expression:"searched"}},[a("md-table-toolbar",[a("div",{staticClass:"md-toolbar-section-end"},[a("md-field",{attrs:{"md-clearable":""}},[a("md-input",{attrs:{placeholder:"Search policies..."},on:{input:e.searchOnTable},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})],1)],1)]),a("md-table-empty-state",{attrs:{"md-label":"No policies found","md-description":"No policy found for this '"+e.search+"' query. Try a different search term or create a new policy."}})],1):e._e()],1)],1)},ln=[],dn=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("md-dialog",{attrs:{"md-active":!!e.operation}},[a("md-dialog-title",[e._v("Service key required")]),a("md-dialog-content",[a("p",[e._v("This operation requires a service key. Please enter it below to proceed.")]),a("form",{attrs:{autocomplete:"off",novalidate:""},on:{submit:function(t){return t.preventDefault(),e.validate(t)}}},[a("md-field",{class:{"md-invalid":e.errors.has("serviceKey")}},[a("label",{attrs:{for:"serviceKey"}},[e._v("Service key")]),a("md-input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{type:"password",id:"serviceKey",name:"serviceKey"},model:{value:e.serviceKey,callback:function(t){e.serviceKey=t},expression:"serviceKey"}}),a("span",{staticClass:"md-error"},[e._v(e._s(e.errors.first("serviceKey")))])],1),a("md-checkbox",{attrs:{id:"remember",name:"remember"},model:{value:e.remember,callback:function(t){e.remember=t},expression:"remember"}},[e._v("Remember")])],1)]),a("md-dialog-actions",[a("md-button",{on:{click:function(t){e.$emit("cancel")}}},[e._v("Cancel")]),a("md-button",{staticClass:"md-primary",on:{click:e.validate}},[e._v("Proceed")])],1)],1)},mn=[],pn={name:"service-key-operation",props:{operation:{type:Function}},data:function(){return{remember:!0,serviceKey:sessionStorage.getItem("serviceKey")}},methods:{validate:function(){var e=Object(_["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$validator.validateAll();case 2:if(!e.sent){e.next=5;break}this.remember&&sessionStorage.setItem("serviceKey",this.serviceKey),this.operation(this.serviceKey);case 5:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()}},hn=pn,vn=Object(l["a"])(hn,dn,mn,!1,null,null,null);vn.options.__file="ServiceKeyDialog.vue";var fn=vn.exports,gn=function(e){return e.toString().toLowerCase()},bn=function(e,t){return t?e.filter(function(e){return gn(e.name).includes(gn(t))}):e},yn={name:"policies",props:{organizationId:String},components:{ServiceKeyDialog:fn},computed:Object($["a"])({},Object(A["c"])(["getPolicies"]),{searched:function(){return this.searchResults||this.getPolicies(this.organizationId)}}),data:function(){return{serviceKeyOperation:null,search:null,searchResults:null}},methods:Object($["a"])({},K(le,ve),{searchOnTable:function(){this.searchResults=bn(this.getPolicies(this.organizationId),this.search)},deletePolicy:function(e){var t=this;this.serviceKeyOperation=function(a){return t.onConfirm(e,a)}},onConfirm:function(){var e=Object(_["a"])(regeneratorRuntime.mark(function e(t,a){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.$udaru.deletePolicy(this.organizationId,t,a);case 3:this.changeSnackbarMessage({message:"Policy deleted"}),this.loadPoliciesData(),e.next=10;break;case 7:e.prev=7,e.t0=e["catch"](0),this.changeSnackbarMessage({message:"Error deleting policy: ".concat(e.t0)});case 10:return e.prev=10,this.serviceKeyOperation=null,e.finish(10);case 13:case"end":return e.stop()}},e,this,[[0,7,10,13]])}));return function(t,a){return e.apply(this,arguments)}}(),onCancel:function(){this.serviceKeyOperation=null},loadPoliciesData:function(){this.loadPolicies(this.organizationId)}}),mounted:function(){var e=Object(_["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:this.loadPoliciesData();case 1:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},_n=yn,In=(a("f113"),Object(l["a"])(_n,un,ln,!1,null,"9eef842e",null));In.options.__file="Policies.vue";var xn=In.exports,On=function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.policy?a("div",[a("service-key-dialog",{attrs:{operation:e.serviceKeyOperation},on:{cancel:e.onCancel}}),a("policy-details",{attrs:{policy:e.policy},on:{submit:e.doUpdatePolicy}}),a("policy-statements",{attrs:{policy:e.policy},on:{submit:e.doUpdatePolicy}}),a("policy-instances",{attrs:{"organization-id":e.organizationId,"policy-id":e.policyId}})],1):e._e()},wn=[],zn=a("133d"),kn=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("form",{attrs:{novalidate:"",autocomplete:"off"},on:{submit:function(t){return t.preventDefault(),e.validate(t)}}},[a("div",{staticClass:"section"},[a("md-toolbar",{attrs:{"md-elevation":"0"}},[a("span",{staticClass:"md-title",staticStyle:{flex:"1"}},[e._v(e._s(e.creating?"Create policy":"Policy"))]),a("md-button",{on:{click:function(t){e.$router.go(-1)}}},[e._v("Cancel")]),a("md-button",{attrs:{disabled:!e.isFormChanged,type:"submit"}},[e._v(e._s(e.creating?"Create":"Save"))])],1),a("md-content",[a("div",{staticClass:"md-layout md-alignment-center-center"},[a("div",{staticClass:"md-layout-item md-size-50"},[a("div",[a("md-field",{class:{"md-invalid":e.errors.has("id")}},[a("label",{attrs:{for:"id"}},[e._v("Policy ID")]),a("md-input",{directives:[{name:"validate",rawName:"v-validate",value:"required|udaru_id",expression:"'required|udaru_id'"}],attrs:{id:"id",name:"id",autofocus:"",readonly:!e.creating},model:{value:e.localPolicy.id,callback:function(t){e.$set(e.localPolicy,"id",t)},expression:"localPolicy.id"}}),a("span",{staticClass:"md-error"},[e._v(e._s(e.errors.first("id")))])],1)],1),a("div",[a("md-field",{class:{"md-invalid":e.errors.has("name")}},[a("label",{attrs:{for:"name"}},[e._v("Policy name")]),a("md-input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{id:"name",name:"name"},model:{value:e.localPolicy.name,callback:function(t){e.$set(e.localPolicy,"name",t)},expression:"localPolicy.name"}}),a("span",{staticClass:"md-error"},[e._v(e._s(e.errors.first("name")))])],1)],1),a("div",[a("md-field",{class:{"md-invalid":e.errors.has("version")}},[a("label",{attrs:{for:"version"}},[e._v("Policy version")]),a("md-input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{id:"version",name:"version"},model:{value:e.localPolicy.version,callback:function(t){e.$set(e.localPolicy,"version",t)},expression:"localPolicy.version"}}),a("span",{staticClass:"md-error"},[e._v(e._s(e.errors.first("version")))])],1)],1)])])])],1)])},jn=[],Cn={name:"policy-details",mixins:[rt],props:{policy:{type:Object,default:function(){return{id:null,version:null,name:null,statements:{}}}}},computed:{creating:function(){return!this.policy.id}},methods:{validate:function(){var e=Object(_["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$validator.validateAll();case 2:if(!e.sent){e.next=4;break}this.$emit("submit",this.localPolicy);case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},data:function(){return{localPolicy:Object($["a"])({},this.policy)}}},Rn=Cn,Sn=Object(l["a"])(Rn,kn,jn,!1,null,null,null);Sn.options.__file="PolicyDetails.vue";var Un=Sn.exports,Tn=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("form",{attrs:{novalidate:"",autocomplete:"off"},on:{submit:function(t){return t.preventDefault(),e.validate(t)}}},[a("div",{staticClass:"section"},[a("md-toolbar",{attrs:{"md-elevation":"0"}},[a("span",{staticClass:"md-title",staticStyle:{flex:"1"}},[e._v("Statements")]),a("md-button",{on:{click:e.addStatement}},[e._v("Add statement")]),a("md-button",{on:{click:e.validate}},[e._v("Save")])],1),e.localPolicy.statements.Statement?a("md-table",{scopedSlots:e._u([{key:"md-table-row",fn:function(t){var n=t.item;return a("md-table-row",{},[a("md-table-cell",{attrs:{"md-label":"Actions"}},[a("md-chips",{model:{value:n.Action,callback:function(t){e.$set(n,"Action",t)},expression:"item.Action"}})],1),a("md-table-cell",{attrs:{"md-label":"Effect"}},[a("md-field",[a("md-select",{model:{value:n.Effect,callback:function(t){e.$set(n,"Effect",t)},expression:"item.Effect"}},[a("md-option",{attrs:{value:"Allow"}},[e._v("Allow")]),a("md-option",{attrs:{value:"Deny"}},[e._v("Deny")])],1)],1)],1),a("md-table-cell",{attrs:{"md-label":"Resources"}},[a("md-chips",{model:{value:n.Resource,callback:function(t){e.$set(n,"Resource",t)},expression:"item.Resource"}})],1),a("md-table-cell",[a("md-button",{staticClass:"md-icon-button md-dense md-primary",on:{click:function(t){e.removeStatement(n)}}},[a("md-icon",[e._v("delete")]),a("md-tooltip",[e._v("Remove statement")])],1)],1)],1)}}]),model:{value:e.localPolicy.statements.Statement,callback:function(t){e.$set(e.localPolicy.statements,"Statement",t)},expression:"localPolicy.statements.Statement"}},[a("md-table-empty-state",{attrs:{"md-label":"No statements","md-description":"No policy statements."}},[a("md-button",{staticClass:"md-primary",on:{click:e.addStatement}},[e._v("Add statement")])],1)],1):e._e()],1)])},Pn=[],Dn={name:"policy-statements",props:{policy:{type:Object,required:!0}},methods:{addStatement:function(){this.localPolicy.statements.Statement.push({Action:[],Effect:"Allow",Resource:[]})},removeStatement:function(e){this.localPolicy.statements.Statement.splice(this.localPolicy.statements.Statement.indexOf(e),1)},validate:function(){var e=Object(_["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$validator.validateAll();case 2:if(!e.sent){e.next=4;break}this.$emit("submit",this.localPolicy);case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},data:function(){return{localPolicy:Object($["a"])({},this.policy,{statements:{Statement:this.policy.statements.Statement?Object(N["cloneDeep"])(this.policy.statements.Statement):[]}})}}},$n=Dn,An=Object(l["a"])($n,Tn,Pn,!1,null,null,null);An.options.__file="PolicyStatements.vue";var En=An.exports,Nn=function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.instances?a("div",{staticClass:"section"},[a("md-toolbar",{attrs:{"md-elevation":"0"}},[a("span",{staticClass:"md-title",staticStyle:{flex:"1"}},[e._v("Policy instances")])]),a("md-table",{scopedSlots:e._u([{key:"md-table-row",fn:function(t){var n,r=t.item;return a("md-table-row",{},[a("md-table-cell",{attrs:{"md-label":"Entity ID"}},[a("router-link",{attrs:{to:{name:r.entityType,params:(n={organizationId:e.organizationId},n[r.entityType+"Id"]=r.entityId,n)}}},[e._v("\r\n        "+e._s(r.entityId)+"\r\n        ")])],1),a("md-table-cell",{attrs:{"md-label":"Entity type"}},[a("md-icon",[e._v(e._s(e.mapEntityTypeToIcon(r.entityType)))]),a("span",{staticClass:"entity-type"},[e._v(" "+e._s(r.entityType))])],1),a("md-table-cell",{attrs:{"md-label":"Variables"}},[a("metadata",{attrs:{value:r.variables}})],1),a("md-table-cell",{attrs:{"md-label":"Instance","md-numeric":""}},[e._v(e._s(r.instance))])],1)}}]),model:{value:e.instances,callback:function(t){e.instances=t},expression:"instances"}},[a("md-table-empty-state",{attrs:{"md-label":"No instances","md-description":"Assign to Organizations, Teams or Users to create instances of this policy."}})],1)],1):e._e()},Mn=[],qn={name:"policy-instances",props:{organizationId:{type:String,required:!0},policyId:{type:String,required:!0}},components:{Metadata:Et},computed:Object($["a"])({},Object(A["c"])(["getPolicyInstances"]),{instances:function(){return this.getPolicyInstances(this.organizationId,this.policyId)}}),methods:Object($["a"])({},K(de),{mapEntityTypeToIcon:function(e){switch(e){case"organization":return"group_work";case"team":return"group";case"user":return"person_outline"}}}),created:function(){this.loadPolicyInstances({organizationId:this.organizationId,policyId:this.policyId})}},Bn=qn,Kn=(a("2669"),Object(l["a"])(Bn,Nn,Mn,!1,null,"c09eab12",null));Kn.options.__file="PolicyInstances.vue";var Fn=Kn.exports,Ln={name:"policy",props:{organizationId:String,policyId:String},components:{PolicyDetails:Un,PolicyStatements:En,PolicyInstances:Fn,ServiceKeyDialog:fn},data:function(){return{serviceKeyOperation:null}},computed:Object($["a"])({},Object(A["c"])(["getPolicy"]),{policy:function(){return this.getPolicy(this.organizationId,this.policyId)}}),methods:Object($["a"])({},K(me,ve),{doUpdatePolicy:function(e){var t=this;this.serviceKeyOperation=function(a){return t.onConfirm(e,a)}},onConfirm:function(){var e=Object(_["a"])(regeneratorRuntime.mark(function e(t,a){var n,r;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return n=t.id,r=Object(zn["a"])(t,["id"]),0===r.statements.Statement.length&&this.$delete(r.statements,"Statement"),e.prev=2,e.next=5,this.$udaru.updatePolicy(this.organizationId,n,r,a);case 5:this.changeSnackbarMessage({message:"Policy saved"}),this.loadPolicyData(),e.next=12;break;case 9:e.prev=9,e.t0=e["catch"](2),this.changeSnackbarMessage({message:"Error saving policy: ".concat(e.t0)});case 12:return e.prev=12,this.serviceKeyOperation=null,e.finish(12);case 15:case"end":return e.stop()}},e,this,[[2,9,12,15]])}));return function(t,a){return e.apply(this,arguments)}}(),onCancel:function(){this.serviceKeyOperation=null},loadPolicyData:function(){return this.loadPolicy({organizationId:this.organizationId,policyId:this.policyId})}}),created:function(){this.loadPolicyData()}},Vn=Ln,Jn=Object(l["a"])(Vn,On,wn,!1,null,null,null);Jn.options.__file="Policy.vue";var Hn=Jn.exports,Yn=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("service-key-dialog",{attrs:{operation:e.serviceKeyOperation},on:{cancel:e.onCancel}}),a("policy-details",{on:{submit:e.doCreatePolicy}})],1)},Gn=[],Wn={name:"policy-create",props:{organizationId:String},components:{PolicyDetails:Un,ServiceKeyDialog:fn},data:function(){return{serviceKeyOperation:null}},methods:Object($["a"])({},K(be,ve),{doCreatePolicy:function(e){var t=this;this.serviceKeyOperation=function(a){return t.onConfirm(e,a)}},onConfirm:function(){var e=Object(_["a"])(regeneratorRuntime.mark(function e(t,a){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.createPolicy({organizationId:this.organizationId,policy:t,serviceKey:a});case 3:this.changeSnackbarMessage({message:"Policy created"}),this.$router.push({name:"policies",params:{organizationId:this.organizationId}}),e.next=10;break;case 7:e.prev=7,e.t0=e["catch"](0),this.changeSnackbarMessage({message:"Error creating policy: ".concat(e.t0)});case 10:return e.prev=10,this.serviceKeyOperation=null,e.finish(10);case 13:case"end":return e.stop()}},e,this,[[0,7,10,13]])}));return function(t,a){return e.apply(this,arguments)}}(),onCancel:function(){this.serviceKeyOperation=null}})},Zn=Wn,Qn=Object(l["a"])(Zn,Yn,Gn,!1,null,null,null);Qn.options.__file="PolicyCreate.vue";var Xn=Qn.exports,er=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("md-app",[a("md-app-toolbar",{staticClass:"md-transparent"},[a("div",{staticClass:"md-toolbar-section-start"},[a("toolbar-logo"),a("span",{staticClass:"md-title"},[e._v("Settings")])],1)]),a("md-app-content",[a("div",{staticClass:"section"},[a("md-toolbar",{attrs:{"md-elevation":"0"}},[a("span",{staticClass:"md-title"},[e._v("Configuration wizard")])]),a("md-content",[a("div",{staticStyle:{display:"flex","justify-content":"center"}},[a("md-steppers",{attrs:{"md-active-step":e.activeStep,"md-vertical":"","md-linear":""},on:{"update:mdActiveStep":function(t){e.activeStep=t}}},[a("md-step",{attrs:{id:e.STEPS.server,"md-label":e.checkingUrl?"Checking server...":"Configure server","md-error":e.urlError,"md-done":e.urlDone}},[a("form",{attrs:{novalidate:"",autocomplete:"off"},on:{submit:function(t){return t.preventDefault(),e.configureServer(t)}}},[a("md-field",{class:{"md-invalid":e.errors.has("url")}},[a("label",{attrs:{for:"url"}},[e._v("Server url")]),a("md-input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{id:"url",name:"url",type:"url"},model:{value:e.url,callback:function(t){e.url=t},expression:"url"}}),a("span",{staticClass:"md-helper-text"},[e._v("We need to know where your Udaru server is")]),a("span",{staticClass:"md-error"},[e._v(e._s(e.errors.first("url")))])],1),a("div",{staticClass:"divider"}),a("md-button",{staticClass:"md-raised md-primary",attrs:{type:"submit"}},[e._v("Save and continue")])],1)]),a("md-step",{attrs:{id:e.STEPS.user,"md-label":e.checkingUserId?"Checking user...":"Configure user","md-error":e.userIdError,"md-done":e.userIdDone}},[a("form",{attrs:{novalidate:"",autocomplete:"off"},on:{submit:function(t){return t.preventDefault(),e.configureUser(t)}}},[a("md-field",{class:{"md-invalid":e.errors.has("userId")}},[a("label",{attrs:{for:"userId"}},[e._v("User ID")]),a("md-input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{id:"userId",name:"userId"},model:{value:e.userId,callback:function(t){e.userId=t},expression:"userId"}}),a("span",{staticClass:"md-helper-text"},[e._v("The user should be a super admin")]),a("span",{staticClass:"md-error"},[e._v(e._s(e.errors.first("userId")))])],1),a("div",{staticClass:"divider"}),a("md-button",{staticClass:"md-raised md-primary",attrs:{type:"submit"}},[e._v("Save and continue")])],1)]),a("md-step",{attrs:{id:e.STEPS.done,"md-label":"Done!","md-done":e.urlDone&&e.userIdDone}},[a("div",{staticStyle:{display:"flex","align-items":"center"}},[a("div",{staticStyle:{"margin-right":"20px"}},[a("p",{staticClass:"md-title"},[e._v("Configuration complete!")]),a("p",{staticClass:"md-body-1"},[e._v("You can now start using the application")])]),a("md-button",{staticClass:"md-raised md-primary",attrs:{to:{name:"select-organization"}}},[e._v("Go to application")])],1)])],1)],1)])],1)])],1)},tr=[],ar=(a("a481"),{server:"server",user:"user",done:"done"}),nr={name:"settings",components:{ToolbarLogo:Ke},data:function(){return{STEPS:ar,activeStep:ar.server,userId:null,userIdError:null,userIdSuccess:!1,url:null,urlError:null,urlSuccess:!1,checkingUrl:!1,checkingUserId:!1}},computed:{urlDone:function(){return this.urlSuccess&&!this.checkingUrl},userIdDone:function(){return this.urlDone&&this.userIdSuccess&&!this.checkingUserId}},created:function(){var e=Object(_["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(this.url=this.$settings.getUrl(),this.userId=this.$settings.getUserId(),!this.url){e.next=5;break}return e.next=5,this.configureServer();case 5:if(this.urlError||!this.userId){e.next=8;break}return e.next=8,this.configureUser();case 8:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),methods:{configureServer:function(){var e=Object(_["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(!this.errors.has("url")){e.next=2;break}return e.abrupt("return");case 2:return this.url=this.url.replace(/\/+$/g,""),e.prev=3,this.checkingUrl=!0,this.$settings.setUrl(this.url),e.next=8,h.a.get("".concat(this.url,"/ping"));case 8:this.urlError=null,this.urlSuccess=!0,this.activeStep=ar.user,e.next=17;break;case 13:e.prev=13,e.t0=e["catch"](3),this.urlError=e.t0.message||"Cannot reach server",this.urlSuccess=!1;case 17:return e.prev=17,this.checkingUrl=!1,e.finish(17);case 20:case"end":return e.stop()}},e,this,[[3,13,17,20]])}));return function(){return e.apply(this,arguments)}}(),configureUser:function(){var e=Object(_["a"])(regeneratorRuntime.mark(function e(){var t,a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(!this.errors.has("userId")){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,this.checkingUserId=!0,this.$settings.setUserId(this.userId),e.next=7,h.a.get("".concat(this.url,"/authorization/access/").concat(encodeURIComponent(this.userId),"/*/*"),{headers:{authorization:this.userId}});case 7:if(t=e.sent,a=t.data.access,a){e.next=11;break}throw new Error("User does not have sufficient privileges");case 11:this.userIdError=null,this.userIdSuccess=!0,this.activeStep=ar.done,e.next=20;break;case 16:e.prev=16,e.t0=e["catch"](2),this.userIdError=e.t0.message||"Cannot log in with the specified user",this.userIdSuccess=!1;case 20:return e.prev=20,this.checkingUserId=!1,e.finish(20);case 23:case"end":return e.stop()}},e,this,[[2,16,20,23]])}));return function(){return e.apply(this,arguments)}}()}},rr=nr,ir=(a("e4a3"),Object(l["a"])(rr,er,tr,!1,null,"a7eb5202",null));ir.options.__file="Settings.vue";var sr=ir.exports,or=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"section"},[a("md-toolbar",{attrs:{"md-elevation":"0"}},[a("div",{staticClass:"md-title",staticStyle:{flex:"1"}},[e._v("Authorization check")]),a("md-button",{attrs:{disabled:!e.canCheck},on:{click:e.checkAccess}},[e._v("Check access")])],1),a("md-content",[a("div",{staticClass:"md-subheading description"},[e._v("Check if a user can perform an action on a resource")]),a("div",{staticClass:"md-layout md-alignment-center-center"},[a("div",{staticClass:"md-layout-item md-size-50"},[a("form",{attrs:{novalidate:"",autocomplete:"off"}},[a("user-select",{attrs:{organizationId:e.organizationId},model:{value:e.selectedUserId,callback:function(t){e.selectedUserId=t},expression:"selectedUserId"}}),a("md-autocomplete",{attrs:{"md-options":e.actions,"md-input-placeholder":e.actions.length?"Select an action":"No available actions"},model:{value:e.selectedAction,callback:function(t){e.selectedAction=t},expression:"selectedAction"}}),a("md-autocomplete",{attrs:{"md-options":e.resources,"md-input-placeholder":e.resources.length?"Select a resource":"No available resources"},model:{value:e.selectedResource,callback:function(t){e.selectedResource=t},expression:"selectedResource"}})],1)])]),a("div",{staticClass:"md-layout md-alignment-center-center result"},[a("div",{staticClass:"md-item"},[a("md-icon",{staticClass:"md-size-4x",class:{"md-primary":!0===e.access,"md-accent":!1===e.access},style:{visibility:null!==e.access?"visible":"hidden"}},[e._v("\n          "+e._s("thumb_"+e.upOrDown)+"\n      ")])],1),a("div",{staticClass:"md-item result-text md-display-2"},[e._v("\n        "+e._s(null!==e.access?"Access "+(e.access?"granted":"denied"):"")+"\n      ")])])])],1)},cr=[],ur=a("8afe"),lr={name:"authorization-check",props:{organizationId:String},components:{UserSelect:ia},data:function(){return{access:null,actions:[],resources:[],selectedAction:null,selectedResource:null,selectedUserId:null}},computed:{upOrDown:function(){return this.access?"up":"down"},canCheck:function(){return this.selectedUserId&&this.selectedAction&&this.selectedResource}},watch:{selectedAction:function(){this.access=null},selectedResource:function(){this.access=null}},methods:{checkAccess:function(){var e=Object(_["a"])(regeneratorRuntime.mark(function e(){var t,a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$udaru.canAccess(this.organizationId,this.selectedUserId,this.selectedAction,this.selectedResource);case 2:t=e.sent,a=t.access,this.access=a;case 5:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},created:function(){var e=Object(_["a"])(regeneratorRuntime.mark(function e(){var t,a,n,r;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$udaru.getPolicies(this.organizationId);case 2:t=e.sent.data,a=Object(N["flow"])(Object(N["flatMap"])(Object(N["get"])("statements.Statement")),Object(N["reduce"])(function(e,t){var a=e.actions,n=e.resources,r=t.Action,i=t.Resource;return{actions:Object(N["uniq"])(Object(ur["a"])(a).concat(Object(ur["a"])(r))),resources:Object(N["uniq"])(Object(ur["a"])(n).concat(Object(ur["a"])(i)))}},{actions:[],resources:[]}))(t),n=a.actions,r=a.resources,this.actions=n,this.resources=r;case 6:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},dr=lr,mr=(a("652a"),Object(l["a"])(dr,or,cr,!1,null,"f78ed3f0",null));mr.options.__file="AuthorizationCheck.vue";var pr=mr.exports;n["default"].use(w["a"]);var hr=new w["a"]({routes:[{path:"/",component:Ce,meta:{requiresSettings:!0},children:[{path:"",redirect:{name:"select-organization"}},{path:"organizations",component:Zt,children:[{path:"",redirect:{name:"select-organization"}},{path:"select",name:"select-organization",component:Qe},{path:"create",name:"create-organization",component:mt}]},{path:"/organizations/:organizationId",component:Je,props:!0,children:[{path:"",redirect:function(e){var t=e.params;return{name:"organization",params:t}}},{path:"details",name:"organization",props:!0,component:Vt},{path:"users",name:"users",props:!0,component:cn},{path:"teams",name:"teams",props:!0,component:Ra},{path:"policies",name:"policies",props:!0,component:xn},{path:"users/create",name:"user-create",props:!0,component:Xa},{path:"teams/create",name:"team-create",props:!0,component:Ia},{path:"user/:userId",name:"user",props:!0,component:Ha},{path:"team/:teamId",name:"team",props:!0,component:va},{path:"policies/create",name:"policy-create",props:!0,component:Xn},{path:"policy/:policyId",name:"policy",props:!0,component:Hn},{path:"authorization-check",name:"authorization-check",props:!0,component:pr}]}]},{path:"/settings",name:"settings",component:sr}]});hr.beforeEach(function(){var e=Object(_["a"])(regeneratorRuntime.mark(function e(t,a,r){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(!t.matched.some(function(e){return e.meta.requiresSettings})||n["default"].settings.isConfigured()){e.next=2;break}return e.abrupt("return",r({name:"settings"}));case 2:r();case 3:case"end":return e.stop()}},e,this)}));return function(t,a,n){return e.apply(this,arguments)}}());var vr=hr;n["default"].use(A["a"]);var fr=new A["a"].Store({strict:!1,state:{loading:0,snackbarMessage:null,currentUser:null,organizations:[],organizationsById:{},usersByOrganizationId:{},teamsByOrganizationId:{},policiesByOrganizationId:{},teamsById:{},usersById:{},policiesById:{},policyInstancesById:{}},getters:{getOrganization:function(e){return function(t){return e.organizationsById[t]}},getUsers:function(e){return function(t){return e.usersByOrganizationId[t]}},getTeams:function(e){return function(t){return e.teamsByOrganizationId[t]}},getPolicies:function(e){return function(t){return e.policiesByOrganizationId[t]}},getUser:function(e){return function(t,a){return e.usersById[t]&&e.usersById[t][a]}},getTeam:function(e){return function(t,a){return e.teamsById[t]&&e.teamsById[t][a]}},getPolicy:function(e){return function(t,a){return e.policiesById[t]&&e.policiesById[t][a]}},getPolicyInstances:function(e){return function(t,a){return e.policyInstancesById[t]&&e.policyInstancesById[t][a]}}},mutations:M([F,L,Y,V,J,H,Z,G,W,Q,X,ee,te]),actions:{createOrganization:ye,loadOrganizations:re,loadOrganization:ie,createUser:ge,loadUser:oe,loadUsers:se,loadTeams:ce,loadTeam:ue,createTeam:fe,addUserToTeam:pe,removeUserFromTeam:he,loadPolicies:le,createPolicy:be,loadPolicy:me,loadPolicyInstances:de,changeSnackbarMessage:ve,loadCurrentUser:_e}});a("51de"),a("f843");n["default"].config.productionTip=!1,n["default"].use(v),n["default"].use(f),n["default"].use(y),n["default"].use(I),n["default"].use(O),n["default"].use(i.a),new n["default"]({router:vr,store:fr,render:function(e){return e(m)}}).$mount("#root")},"57d1":function(e,t,a){},"5b54":function(e,t,a){},"5d06":function(e,t,a){},"5fd1":function(e,t,a){"use strict";var n=a("0d37"),r=a.n(n);r.a},"652a":function(e,t,a){"use strict";var n=a("74fb"),r=a.n(n);r.a},7360:function(e,t,a){"use strict";var n=a("f666"),r=a.n(n);r.a},"74fb":function(e,t,a){},"75c7":function(e,t,a){},"7e20":function(e,t,a){"use strict";var n=a("57d1"),r=a.n(n);r.a},"85ba":function(e,t,a){},"94e7":function(e,t,a){},a220:function(e,t,a){"use strict";var n=a("14ba"),r=a.n(n);r.a},a72b:function(e,t,a){"use strict";var n=a("5b54"),r=a.n(n);r.a},cdd5:function(e,t,a){"use strict";var n=a("21a7"),r=a.n(n);r.a},e4a3:function(e,t,a){"use strict";var n=a("14ab"),r=a.n(n);r.a},eb21:function(e,t,a){},f113:function(e,t,a){"use strict";var n=a("94e7"),r=a.n(n);r.a},f666:function(e,t,a){},f843:function(e,t,a){},fa08:function(e,t,a){"use strict";var n=a("1a43"),r=a.n(n);r.a},fe07:function(e,t,a){"use strict";var n=a("85ba"),r=a.n(n);r.a}});
//# sourceMappingURL=app.3a176b20.js.map