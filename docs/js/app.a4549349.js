(function(e){function t(t){for(var n,s,o=t[0],c=t[1],u=t[2],d=0,m=[];d<o.length;d++)s=o[d],r[s]&&m.push(r[s][0]),r[s]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(e[n]=c[n]);l&&l(t);while(m.length)m.shift()();return i.push.apply(i,u||[]),a()}function a(){for(var e,t=0;t<i.length;t++){for(var a=i[t],n=!0,o=1;o<a.length;o++){var c=a[o];0!==r[c]&&(n=!1)}n&&(i.splice(t--,1),e=s(s.s=a[0]))}return e}var n={},r={app:0},i=[];function s(t){if(n[t])return n[t].exports;var a=n[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,s),a.l=!0,a.exports}s.m=e,s.c=n,s.d=function(e,t,a){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(s.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)s.d(a,n,function(t){return e[t]}.bind(null,n));return a},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/vuedaru/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],c=o.push.bind(o);o.push=t,o=o.slice();for(var u=0;u<o.length;u++)t(o[u]);var l=c;i.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("56d7")},"0d37":function(e,t,a){},1079:function(e,t,a){},"14ba":function(e,t,a){},"201b":function(e,t,a){},"21a7":function(e,t,a){},"225a":function(e,t,a){"use strict";var n=a("1079"),r=a.n(n);r.a},2816:function(e,t,a){"use strict";var n=a("eb21"),r=a.n(n);r.a},"283a":function(e,t,a){"use strict";var n=a("c4f8"),r=a.n(n);r.a},"2d5f":function(e,t,a){"use strict";var n=a("74aa"),r=a.n(n);r.a},"33c5":function(e,t,a){"use strict";var n=a("ddb1"),r=a.n(n);r.a},"3e79":function(e,t,a){},"464c":function(e,t,a){"use strict";var n=a("db7b"),r=a.n(n);r.a},4678:function(e,t,a){"use strict";var n=a("517f"),r=a.n(n);r.a},"47b5":function(e,t,a){},"517f":function(e,t,a){},"56d7":function(e,t,a){"use strict";a.r(t);a("cadf"),a("551c"),a("097d");var n=a("2b0e"),r=a("43f9"),i=a.n(r),s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("router-view")},o=[],c={name:"root"},u=c,l=a("2877"),d=Object(l["a"])(u,s,o,!1,null,null,null);d.options.__file="Root.vue";var m=d.exports,p=a("bc3a"),h=a.n(p),f={install:function(e){var t=h.a.create();t.interceptors.request.use(function(t){return t.baseURL=e.settings.getUrl(),t.headers.authorization||(t.headers.authorization=e.settings.getUserId()),t}),e.prototype.$axios=e.axios=t}},v={install:function(e){e.filter("json",function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return JSON.stringify(e,null,t?2:0)})}},g="user_id",b="udaru_url",y={install:function(e){e.prototype.$settings=e.settings={isConfigured:function(){return!!this.getUserId()&&!!this.getUrl()},setUserId:function(e){localStorage.setItem(g,e)},getUserId:function(){return localStorage.getItem(g)},setUrl:function(e){localStorage.setItem(b,e)},getUrl:function(){return localStorage.getItem(b)}}}},I=(a("96cf"),a("3040")),_={install:function(e){e.prototype.$udaru=e.udaru={getOrganizations:function(){var t=Object(I["a"])(regeneratorRuntime.mark(function t(){var a,n;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.axios.get("/authorization/organizations");case 2:return a=t.sent,n=a.data,t.abrupt("return",n);case 5:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),getOrganization:function(){var t=Object(I["a"])(regeneratorRuntime.mark(function t(a){var n,r;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.axios.get("/authorization/organizations/".concat(encodeURIComponent(a)));case 2:return n=t.sent,r=n.data,t.abrupt("return",r);case 5:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),deleteOrganization:function(){var t=Object(I["a"])(regeneratorRuntime.mark(function t(a){var n,r;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.axios.delete("/authorization/organizations/".concat(encodeURIComponent(a)));case 2:return n=t.sent,r=n.data,t.abrupt("return",r);case 5:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),createOrganization:function(){var t=Object(I["a"])(regeneratorRuntime.mark(function t(a){var n,r;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.axios.post("/authorization/organizations",a);case 2:return n=t.sent,r=n.data,t.abrupt("return",r);case 5:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),updateOrganization:function(){var t=Object(I["a"])(regeneratorRuntime.mark(function t(a,n){var r,i;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.axios.put("/authorization/organizations/".concat(encodeURIComponent(a)),n,{headers:{org:a}});case 2:return r=t.sent,i=r.data,t.abrupt("return",i);case 5:case"end":return t.stop()}},t,this)}));return function(e,a){return t.apply(this,arguments)}}(),createUser:function(){var t=Object(I["a"])(regeneratorRuntime.mark(function t(a,n){var r,i;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.axios.post("/authorization/users",n,{headers:{org:a}});case 2:return r=t.sent,i=r.data,t.abrupt("return",i);case 5:case"end":return t.stop()}},t,this)}));return function(e,a){return t.apply(this,arguments)}}(),deleteUser:function(){var t=Object(I["a"])(regeneratorRuntime.mark(function t(a){var n,r;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.axios.delete("/authorization/users/".concat(encodeURIComponent(a)));case 2:return n=t.sent,r=n.data,t.abrupt("return",r);case 5:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),createTeam:function(){var t=Object(I["a"])(regeneratorRuntime.mark(function t(a,n){var r,i;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.axios.post("/authorization/teams",n,{headers:{org:a}});case 2:return r=t.sent,i=r.data,t.abrupt("return",i);case 5:case"end":return t.stop()}},t,this)}));return function(e,a){return t.apply(this,arguments)}}(),createPolicy:function(){var t=Object(I["a"])(regeneratorRuntime.mark(function t(a,n,r){var i,s;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.axios.post("/authorization/policies",n,{headers:{org:a},params:{sig:r}});case 2:return i=t.sent,s=i.data,t.abrupt("return",s);case 5:case"end":return t.stop()}},t,this)}));return function(e,a,n){return t.apply(this,arguments)}}(),updatePolicy:function(){var t=Object(I["a"])(regeneratorRuntime.mark(function t(a,n,r,i){var s,o;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.axios.put("/authorization/policies/".concat(encodeURIComponent(n)),r,{headers:{org:a},params:{sig:i}});case 2:return s=t.sent,o=s.data,t.abrupt("return",o);case 5:case"end":return t.stop()}},t,this)}));return function(e,a,n,r){return t.apply(this,arguments)}}(),deleteTeam:function(){var t=Object(I["a"])(regeneratorRuntime.mark(function t(a){var n,r;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.axios.delete("/authorization/teams/".concat(encodeURIComponent(a)));case 2:return n=t.sent,r=n.data,t.abrupt("return",r);case 5:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),updateTeam:function(){var t=Object(I["a"])(regeneratorRuntime.mark(function t(a,n,r){var i,s;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.axios.put("/authorization/teams/".concat(encodeURIComponent(n)),r,{headers:{org:a}});case 2:return i=t.sent,s=i.data,t.abrupt("return",s);case 5:case"end":return t.stop()}},t,this)}));return function(e,a,n){return t.apply(this,arguments)}}(),getUsers:function(){var t=Object(I["a"])(regeneratorRuntime.mark(function t(a){var n,r;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.axios.get("/authorization/users",{headers:{org:a}});case 2:return n=t.sent,r=n.data,t.abrupt("return",r);case 5:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),getTeams:function(){var t=Object(I["a"])(regeneratorRuntime.mark(function t(a){var n,r;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.axios.get("/authorization/teams",{headers:{org:a}});case 2:return n=t.sent,r=n.data,t.abrupt("return",r);case 5:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),getUser:function(){var t=Object(I["a"])(regeneratorRuntime.mark(function t(a,n){var r,i;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.axios.get("/authorization/users/".concat(encodeURIComponent(n)),{headers:{org:a}});case 2:return r=t.sent,i=r.data,t.abrupt("return",i);case 5:case"end":return t.stop()}},t,this)}));return function(e,a){return t.apply(this,arguments)}}(),updateUser:function(){var t=Object(I["a"])(regeneratorRuntime.mark(function t(a,n,r){var i,s;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.axios.put("/authorization/users/".concat(encodeURIComponent(n)),r,{headers:{org:a}});case 2:return i=t.sent,s=i.data,t.abrupt("return",s);case 5:case"end":return t.stop()}},t,this)}));return function(e,a,n){return t.apply(this,arguments)}}(),canAccess:function(){var t=Object(I["a"])(regeneratorRuntime.mark(function t(a,n,r,i){var s,o;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.axios.get("/authorization/access/".concat(encodeURIComponent(n),"/").concat(encodeURIComponent(r),"/").concat(encodeURIComponent(i)),{headers:{org:a}});case 2:return s=t.sent,o=s.data,t.abrupt("return",o);case 5:case"end":return t.stop()}},t,this)}));return function(e,a,n,r){return t.apply(this,arguments)}}(),listUserActionsOnResources:function(){var t=Object(I["a"])(regeneratorRuntime.mark(function t(a,n,r){var i,s;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.axios.get("/authorization/list/".concat(encodeURIComponent(n)),{headers:{org:a},params:{resources:r}});case 2:return i=t.sent,s=i.data,t.abrupt("return",s);case 5:case"end":return t.stop()}},t,this)}));return function(e,a,n){return t.apply(this,arguments)}}(),listUserActionsOnResource:function(){var t=Object(I["a"])(regeneratorRuntime.mark(function t(a,n,r){var i,s;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.axios.get("/authorization/list/".concat(encodeURIComponent(n),"/").concat(encodeURIComponent(r)),{headers:{org:a}});case 2:return i=t.sent,s=i.data,t.abrupt("return",s);case 5:case"end":return t.stop()}},t,this)}));return function(e,a,n){return t.apply(this,arguments)}}(),getTeam:function(){var t=Object(I["a"])(regeneratorRuntime.mark(function t(a,n){var r,i;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.axios.get("/authorization/teams/".concat(encodeURIComponent(n)),{headers:{org:a}});case 2:return r=t.sent,i=r.data,t.abrupt("return",i);case 5:case"end":return t.stop()}},t,this)}));return function(e,a){return t.apply(this,arguments)}}(),getCurrentUser:function(){var t=Object(I["a"])(regeneratorRuntime.mark(function t(){var a,n;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.axios.get("/authorization/users/".concat(encodeURIComponent(e.settings.getUserId())));case 2:return a=t.sent,n=a.data,t.abrupt("return",n);case 5:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),getPolicies:function(){var t=Object(I["a"])(regeneratorRuntime.mark(function t(a){var n,r;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.axios.get("/authorization/policies",{headers:{org:a}});case 2:return n=t.sent,r=n.data,t.abrupt("return",r);case 5:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),getPolicy:function(){var t=Object(I["a"])(regeneratorRuntime.mark(function t(a,n){var r,i;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.axios.get("/authorization/policies/".concat(encodeURIComponent(n)),{headers:{org:a}});case 2:return r=t.sent,i=r.data,t.abrupt("return",i);case 5:case"end":return t.stop()}},t,this)}));return function(e,a){return t.apply(this,arguments)}}(),deletePolicy:function(){var t=Object(I["a"])(regeneratorRuntime.mark(function t(a,n,r){var i,s;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.axios.delete("/authorization/policies/".concat(encodeURIComponent(n)),{params:{sig:r},headers:{org:a}});case 2:return i=t.sent,s=i.data,t.abrupt("return",s);case 5:case"end":return t.stop()}},t,this)}));return function(e,a,n){return t.apply(this,arguments)}}(),addUsersToTeam:function(){var t=Object(I["a"])(regeneratorRuntime.mark(function t(a,n){var r,i,s,o,c,u=arguments;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:for(r=u.length,i=new Array(r>2?r-2:0),s=2;s<r;s++)i[s-2]=u[s];return t.next=3,e.axios.put("/authorization/teams/".concat(encodeURIComponent(n),"/users"),{users:i},{headers:{org:a}});case 3:return o=t.sent,c=o.data,t.abrupt("return",c);case 6:case"end":return t.stop()}},t,this)}));return function(e,a){return t.apply(this,arguments)}}(),removeUserFromTeam:function(){var t=Object(I["a"])(regeneratorRuntime.mark(function t(a,n,r){var i,s;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.axios.delete("/authorization/teams/".concat(encodeURIComponent(n),"/users/").concat(encodeURIComponent(r)),{headers:{org:a}});case 2:return i=t.sent,s=i.data,t.abrupt("return",s);case 5:case"end":return t.stop()}},t,this)}));return function(e,a,n){return t.apply(this,arguments)}}(),removeUserPolicy:function(){var t=Object(I["a"])(regeneratorRuntime.mark(function t(a,n,r){var i,s;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.axios.delete("/authorization/users/".concat(encodeURIComponent(n),"/policies/").concat(encodeURIComponent(r)),{headers:{org:a}});case 2:return i=t.sent,s=i.data,t.abrupt("return",s);case 5:case"end":return t.stop()}},t,this)}));return function(e,a,n){return t.apply(this,arguments)}}(),addOrUpdateUserPolicy:function(){var t=Object(I["a"])(regeneratorRuntime.mark(function t(a,n,r){var i,s;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.axios.put("/authorization/users/".concat(encodeURIComponent(n),"/policies"),{policies:[r]},{headers:{org:a}});case 2:return i=t.sent,s=i.data,t.abrupt("return",s);case 5:case"end":return t.stop()}},t,this)}));return function(e,a,n){return t.apply(this,arguments)}}(),removeTeamPolicy:function(){var t=Object(I["a"])(regeneratorRuntime.mark(function t(a,n,r){var i,s;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.axios.delete("/authorization/teams/".concat(encodeURIComponent(n),"/policies/").concat(encodeURIComponent(r)),{headers:{org:a}});case 2:return i=t.sent,s=i.data,t.abrupt("return",s);case 5:case"end":return t.stop()}},t,this)}));return function(e,a,n){return t.apply(this,arguments)}}(),addOrUpdateTeamPolicy:function(){var t=Object(I["a"])(regeneratorRuntime.mark(function t(a,n,r){var i,s;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.axios.put("/authorization/teams/".concat(encodeURIComponent(n),"/policies"),{policies:[r]},{headers:{org:a}});case 2:return i=t.sent,s=i.data,t.abrupt("return",s);case 5:case"end":return t.stop()}},t,this)}));return function(e,a,n){return t.apply(this,arguments)}}(),removeNestedTeam:function(){var t=Object(I["a"])(regeneratorRuntime.mark(function t(a,n){var r,i;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.axios.put("/authorization/teams/".concat(encodeURIComponent(n),"/unnest"),{},{headers:{org:a}});case 2:return r=t.sent,i=r.data,t.abrupt("return",i);case 5:case"end":return t.stop()}},t,this)}));return function(e,a){return t.apply(this,arguments)}}(),addNestedTeam:function(){var t=Object(I["a"])(regeneratorRuntime.mark(function t(a,n,r){var i,s;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.axios.put("/authorization/teams/".concat(encodeURIComponent(r),"/nest"),{parentId:n},{headers:{org:a}});case 2:return i=t.sent,s=i.data,t.abrupt("return",s);case 5:case"end":return t.stop()}},t,this)}));return function(e,a,n){return t.apply(this,arguments)}}(),removeOrganizationPolicy:function(){var t=Object(I["a"])(regeneratorRuntime.mark(function t(a,n){var r,i;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.axios.delete("/authorization/organizations/".concat(encodeURIComponent(a),"/policies/").concat(encodeURIComponent(n)),{headers:{org:a}});case 2:return r=t.sent,i=r.data,t.abrupt("return",i);case 5:case"end":return t.stop()}},t,this)}));return function(e,a){return t.apply(this,arguments)}}(),addOrUpdateOrganizationPolicy:function(){var t=Object(I["a"])(regeneratorRuntime.mark(function t(a,n){var r,i;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.axios.put("/authorization/organizations/".concat(encodeURIComponent(a),"/policies"),{policies:[n]},{headers:{org:a}});case 2:return r=t.sent,i=r.data,t.abrupt("return",i);case 5:case"end":return t.stop()}},t,this)}));return function(e,a){return t.apply(this,arguments)}}(),loadPolicyInstances:function(){var t=Object(I["a"])(regeneratorRuntime.mark(function t(a,n){var r,i;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.axios.get("/authorization/policies/".concat(encodeURIComponent(n),"/instances"),{headers:{org:a}});case 2:return r=t.sent,i=r.data,t.abrupt("return",i);case 5:case"end":return t.stop()}},t,this)}));return function(e,a){return t.apply(this,arguments)}}(),ping:function(){return e.axios.get("/ping")}}}},O=a("7bb1"),x={install:function(e){O["a"].extend("json",{getMessage:function(e){return"The "+e+" value is not valid JSON"},validate:function(e){try{return JSON.parse(e),!0}catch(e){return!1}}}),O["a"].extend("udaru_id",{getMessage:function(e){return"The "+e+" value can only contain letters, numbers or the special characters - and _"},validate:function(e){return/^[A-Za-z0-9_-]+$/.test(e)}});var t={custom:{id:{excluded:"The id field should be unique"}}};O["a"].localize("en",t),e.use(O["b"])}},z=a("8c4f"),w=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app"},[a("health-check"),a("router-view"),a("snackbar"),a("github-corner")],1)},k=[],j=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{class:["health-check",{error:this.error,fixed:this.fixed}]},[a("span",{directives:[{name:"show",rawName:"v-show",value:e.error,expression:"error"}]},[e._v("Disconnected from server")]),a("span",{directives:[{name:"show",rawName:"v-show",value:e.fixed,expression:"fixed"}]},[e._v("Connected")])])},C=[],R={name:"health-check",data:function(){return{interval:null,error:null,fixed:null,count:0}},methods:{checkStatus:function(){var e=Object(I["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.$udaru.ping();case 3:this.fixed=this.error,this.error=!1,e.next=11;break;case 7:e.prev=7,e.t0=e["catch"](0),this.fixed=!1,this.error=!0;case 11:case"end":return e.stop()}},e,this,[[0,7]])}));return function(){return e.apply(this,arguments)}}()},created:function(){var e=this;this.interval=setInterval(function(){return e.checkStatus()},5e3),this.checkStatus()},destroyed:function(){clearInterval(this.interval)}},T=R,U=(a("cdd5"),Object(l["a"])(T,j,C,!1,null,"159a53f2",null));U.options.__file="HealthCheck.vue";var S=U.exports,P=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("md-snackbar",{attrs:{"md-active":e.showSnackbar},on:{"update:mdActive":function(t){e.showSnackbar=t}}},[a("span",[e._v(e._s(e.snackbarMessage))]),a("md-button",{staticClass:"md-primary",on:{click:function(t){e.showSnackbar=!1}}},[e._v("Ok")])],1)},D=[],$=a("c93e"),A=a("2f62"),E=a("2481"),N=a("a322"),M=a("b896"),q=Object(M["a"])("organizations",function(e,t){var a=t.organizations;e.organizations=a}),B=Object(M["a"])("organization",function(e,t){var a=t.organizationId,n=t.organization;e.organizationsById=Object($["a"])({},e.organizationsById,Object(N["a"])({},a,n))}),K=Object(M["a"])("users",function(e,t){var a=t.organizationId,n=t.users;e.usersByOrganizationId=Object($["a"])({},e.usersByOrganizationId,Object(N["a"])({},a,n))}),L=Object(M["a"])("teams",function(e,t){var a=t.organizationId,n=t.teams;e.teamsByOrganizationId=Object($["a"])({},e.teamsByOrganizationId,Object(N["a"])({},a,n))}),F=Object(M["a"])("team",function(e,t){var a=t.organizationId,n=t.teamId,r=t.team;e.teamsById=Object($["a"])({},e.teamsById,Object(N["a"])({},a,Object($["a"])({},e.teamsById[a],Object(N["a"])({},n,r))))}),V=Object(M["a"])("user",function(e,t){var a=t.organizationId,n=t.userId,r=t.user;e.usersById=Object($["a"])({},e.usersById,Object(N["a"])({},a,Object($["a"])({},e.usersById[a],Object(N["a"])({},n,r))))}),J=Object(M["a"])("policy",function(e,t){var a=t.organizationId,n=t.policyId,r=t.policy;e.policiesById=Object($["a"])({},e.policiesById,Object(N["a"])({},a,Object($["a"])({},e.policiesById[a],Object(N["a"])({},n,r))))}),G=Object(M["a"])("policyInstances",function(e,t){var a=t.organizationId,n=t.policyId,r=t.policyInstances;e.policyInstancesById=Object($["a"])({},e.policyInstancesById,Object(N["a"])({},a,Object($["a"])({},e.policyInstancesById[a],Object(N["a"])({},n,r))))}),H=Object(M["a"])("policies",function(e,t){var a=t.organizationId,n=t.policies;e.policiesByOrganizationId=Object($["a"])({},e.policiesByOrganizationId,Object(N["a"])({},a,n))}),Y=Object(M["a"])("setLoading",function(e){e.loading++}),Z=Object(M["a"])("unsetLoading",function(e){e.loading=Math.max(0,e.loading-1)}),W=Object(M["a"])("snackbarMessage",function(e,t){var a=t.message;e.snackbarMessage=a}),Q=Object(M["a"])("currentUser",function(e,t){var a=t.currentUser;e.currentUser=a}),X=function(e,t){return Object(E["a"])(e,function(){var e=Object(I["a"])(regeneratorRuntime.mark(function e(a){var n,r,i,s=arguments;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:for(e.prev=0,a.commit(Y()),n=s.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=s[i];return e.next=5,t.apply(void 0,[a].concat(r));case 5:return e.prev=5,a.commit(Z()),e.finish(5);case 8:case"end":return e.stop()}},e,this,[[0,,5,8]])}));return function(t){return e.apply(this,arguments)}}())},ee=X("loadOrganizations",function(){var e=Object(I["a"])(regeneratorRuntime.mark(function e(t){var a,r,i;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return a=t.commit,e.next=3,n["default"].udaru.getOrganizations();case 3:r=e.sent,i=r.data,a(q({organizations:i}));case 6:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()),te=X("loadOrganization",function(){var e=Object(I["a"])(regeneratorRuntime.mark(function e(t,a){var r,i;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=t.commit,e.next=3,n["default"].udaru.getOrganization(a);case 3:i=e.sent,r(B({organizationId:a,organization:i}));case 5:case"end":return e.stop()}},e,this)}));return function(t,a){return e.apply(this,arguments)}}()),ae=X("loadUsers",function(){var e=Object(I["a"])(regeneratorRuntime.mark(function e(t,a){var r,i,s;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=t.commit,e.next=3,n["default"].udaru.getUsers(a);case 3:i=e.sent,s=i.data,r(K({organizationId:a,users:s}));case 6:case"end":return e.stop()}},e,this)}));return function(t,a){return e.apply(this,arguments)}}()),ne=X("loadUser",function(){var e=Object(I["a"])(regeneratorRuntime.mark(function e(t,a){var r,i,s,o;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=t.commit,i=a.organizationId,s=a.userId,e.next=4,n["default"].udaru.getUser(i,s);case 4:o=e.sent,r(V({organizationId:i,userId:s,user:o}));case 6:case"end":return e.stop()}},e,this)}));return function(t,a){return e.apply(this,arguments)}}()),re=X("loadTeams",function(){var e=Object(I["a"])(regeneratorRuntime.mark(function e(t,a){var r,i,s;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=t.commit,e.next=3,n["default"].udaru.getTeams(a);case 3:i=e.sent,s=i.data,r(L({organizationId:a,teams:s}));case 6:case"end":return e.stop()}},e,this)}));return function(t,a){return e.apply(this,arguments)}}()),ie=X("loadTeam",function(){var e=Object(I["a"])(regeneratorRuntime.mark(function e(t,a){var r,i,s,o;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=t.commit,i=a.organizationId,s=a.teamId,e.next=4,n["default"].udaru.getTeam(i,s);case 4:o=e.sent,r(F({organizationId:i,teamId:s,team:o}));case 6:case"end":return e.stop()}},e,this)}));return function(t,a){return e.apply(this,arguments)}}()),se=X("loadPolicies",function(){var e=Object(I["a"])(regeneratorRuntime.mark(function e(t,a){var r,i,s;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=t.commit,e.next=3,n["default"].udaru.getPolicies(a);case 3:i=e.sent,s=i.data,r(H({organizationId:a,policies:s}));case 6:case"end":return e.stop()}},e,this)}));return function(t,a){return e.apply(this,arguments)}}()),oe=X("loadPolicyInstances",function(){var e=Object(I["a"])(regeneratorRuntime.mark(function e(t,a){var r,i,s,o;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=t.commit,i=a.organizationId,s=a.policyId,e.next=4,n["default"].udaru.loadPolicyInstances(i,s);case 4:o=e.sent,r(G({organizationId:i,policyId:s,policyInstances:o}));case 6:case"end":return e.stop()}},e,this)}));return function(t,a){return e.apply(this,arguments)}}()),ce=X("loadPolicy",function(){var e=Object(I["a"])(regeneratorRuntime.mark(function e(t,a){var r,i,s,o;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=t.commit,i=a.organizationId,s=a.policyId,e.next=4,n["default"].udaru.getPolicy(i,s);case 4:o=e.sent,r(J({organizationId:i,policyId:s,policy:o}));case 6:case"end":return e.stop()}},e,this)}));return function(t,a){return e.apply(this,arguments)}}()),ue=X("addUserToTeam",function(){var e=Object(I["a"])(regeneratorRuntime.mark(function e(t,a){var r,i,s;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=a.organizationId,i=a.teamId,s=a.userId,e.next=3,n["default"].udaru.addUsersToTeam(r,i,s);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}},e,this)}));return function(t,a){return e.apply(this,arguments)}}()),le=X("removeUserFromTeam",function(){var e=Object(I["a"])(regeneratorRuntime.mark(function e(t,a){var r,i,s;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=a.organizationId,i=a.teamId,s=a.userId,e.next=3,n["default"].udaru.removeUserFromTeam(r,i,s);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}},e,this)}));return function(t,a){return e.apply(this,arguments)}}()),de=Object(E["a"])("changeSnackbarMessage",function(e,t){var a=e.commit,n=t.message;a(W({message:n}))}),me=X("createTeam",function(e,t){var a=t.organizationId,r=t.team;return n["default"].udaru.createTeam(a,r)}),pe=X("createUser",function(e,t){var a=t.organizationId,r=t.user;return n["default"].udaru.createUser(a,r)}),he=X("createPolicy",function(e,t){var a=t.organizationId,r=t.policy,i=t.serviceKey;return n["default"].udaru.createPolicy(a,r,i)}),fe=X("createOrganization",function(e,t){var a=t.organization;return n["default"].udaru.createOrganization(a)}),ve=X("loadCurrentUser",function(){var e=Object(I["a"])(regeneratorRuntime.mark(function e(t){var a,r;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return a=t.commit,e.next=3,n["default"].udaru.getCurrentUser();case 3:r=e.sent,a(Q({currentUser:r}));case 5:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()),ge=a("642b"),be={name:"snackbar",computed:Object($["a"])({},Object(A["d"])(["snackbarMessage"]),{showSnackbar:{get:function(){return!!this.snackbarMessage},set:function(e){e||this.changeSnackbarMessage({message:null})}}}),methods:Object($["a"])({},Object(ge["a"])(de))},ye=be,Ie=Object(l["a"])(ye,P,D,!1,null,null,null);Ie.options.__file="Snackbar.vue";var _e=Ie.exports,Oe=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a",{staticClass:"github-corner",attrs:{href:e.homepage,target:"_blank","aria-label":"View source on Github"}},[a("svg",{staticStyle:{fill:"#0D924F",color:"#fff",position:"absolute",top:"0",border:"0",right:"0"},attrs:{width:"80",height:"80",viewBox:"0 0 250 250","aria-hidden":"true"}},[a("path",{attrs:{d:"M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"}}),a("path",{staticClass:"octo-arm",staticStyle:{"transform-origin":"130px 106px"},attrs:{d:"M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2",fill:"currentColor"}}),a("path",{staticClass:"octo-body",attrs:{d:"M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z",fill:"currentColor"}})])])},xe=[],ze=a("9224"),we={name:"github-corner",data:function(){return{homepage:ze["a"]}}},ke=we,je=(a("aaef"),Object(l["a"])(ke,Oe,xe,!1,null,"3c16bf02",null));je.options.__file="GithubCorner.vue";var Ce=je.exports,Re={name:"app",components:{HealthCheck:S,Snackbar:_e,GithubCorner:Ce}},Te=Re,Ue=(a("225a"),Object(l["a"])(Te,w,k,!1,null,"26122316",null));Ue.options.__file="App.vue";var Se=Ue.exports,Pe=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("md-app",[a("md-app-toolbar",{staticClass:"md-transparent"},[a("div",{staticClass:"md-toolbar-section-start"},[a("organization-selector",{attrs:{organizationId:e.organizationId}}),a("toolbar-logo")],1),a("div",{staticClass:"md-toolbar-section-end"},[a("md-progress-spinner",{directives:[{name:"show",rawName:"v-show",value:e.loading,expression:"loading"}],staticClass:"md-accent",attrs:{"md-diameter":30,"md-stroke":3,"md-mode":"indeterminate"}}),a("md-button",{staticClass:"md-icon-button",attrs:{to:{name:"settings"}}},[a("md-icon",[e._v("settings")]),a("md-tooltip",[e._v("Settings")])],1)],1)]),a("md-app-drawer",{attrs:{"md-permanent":"clipped"}},[a("md-list",[a("md-list-item",{attrs:{to:{name:"organization",params:{organizationId:e.organizationId}}}},[a("md-icon",[e._v("group_work")]),a("span",{staticClass:"md-list-item-text"},[e._v("Organization")])],1),a("md-list-item",{attrs:{to:{name:"users",params:{organizationId:e.organizationId}}}},[a("md-icon",[e._v("person_outline")]),a("span",{staticClass:"md-list-item-text"},[e._v("Users")])],1),a("md-list-item",{attrs:{to:{name:"teams",params:{organizationId:e.organizationId}}}},[a("md-icon",[e._v("group")]),a("span",{staticClass:"md-list-item-text"},[e._v("Teams")])],1),a("md-list-item",{attrs:{to:{name:"policies",params:{organizationId:e.organizationId}}}},[a("md-icon",[e._v("lock_open")]),a("span",{staticClass:"md-list-item-text"},[e._v("Policies")])],1),a("md-divider",{staticClass:"md-inset"}),a("md-subheader",[e._v("Tools")]),a("md-list-item",{attrs:{to:{name:"authorization-check",params:{organizationId:e.organizationId}}}},[a("md-icon",[e._v("how_to_reg")]),a("span",{staticClass:"md-list-item-text"},[e._v("Authorization check")])],1)],1)],1),a("md-app-content",[a("router-view")],1)],1)},De=[],$e=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("md-menu",[a("md-button",{attrs:{"md-menu-trigger":""}},[e._v(e._s(e.organizationId))]),a("md-menu-content",[e._l(e.organizations,function(t){return a("md-menu-item",{key:t.id,attrs:{to:{name:"organization",params:{organizationId:t.id}}}},[e._v("\n      "+e._s(t.id)+"\n    ")])}),a("md-divider"),a("md-menu-item",{attrs:{to:"/"}},[a("md-icon",[e._v("home")]),a("span",[e._v("Organizations manager")])],1)],2)],1)},Ae=[],Ee={name:"organization-selector",props:{organizationId:String},computed:Object($["a"])({},Object(A["d"])(["organizations"])),methods:Object($["a"])({},Object(ge["a"])([ee])),created:function(){var e=Object(I["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:this.loadOrganizations();case 1:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},Ne=Ee,Me=Object(l["a"])(Ne,$e,Ae,!1,null,null,null);Me.options.__file="OrganizationSelector.vue";var qe=Me.exports,Be=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("img",{staticClass:"logo",attrs:{src:"https://nearform.github.io/udaru/logo.jpg"}})},Ke=[],Le={name:"toolbar-logo"},Fe=Le,Ve=(a("2816"),Object(l["a"])(Fe,Be,Ke,!1,null,"2f24e166",null));Ve.options.__file="ToolbarLogo.vue";var Je=Ve.exports,Ge={name:"home",props:{organizationId:String},computed:Object(A["d"])(["loading"]),components:{OrganizationSelector:qe,ToolbarLogo:Je}},He=Ge,Ye=(a("8493"),Object(l["a"])(He,Pe,De,!1,null,"a4c4fe58",null));Ye.options.__file="Home.vue";var Ze=Ye.exports,We=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"md-layout md-alignment-center-center"},[e.idToDelete?a("md-dialog-confirm",{attrs:{"md-active":!!e.idToDelete,"md-title":"Confirm delete","md-content":"Delete organization "+e.idToDelete+"?"},on:{"md-cancel":e.onCancel,"md-confirm":e.onConfirm}}):e._e(),a("div",{staticClass:"md-layout-item md-size-60"},[a("md-list",{staticClass:"md-double-line"},[e._l(e.organizations,function(t){var n=t.id,r=t.name;return[a("md-list-item",{key:n+"item",class:{"md-inset":!e.isCurrentOrganization(n)},attrs:{to:{name:"organization",params:{organizationId:n}}}},[e.isCurrentOrganization(n)?[a("md-icon",{staticClass:"md-primary"},[e._v("check_circle_outline")]),a("md-tooltip",[e._v("Current user organization")])]:e._e(),a("div",{staticClass:"md-list-item-text"},[a("span",[e._v(e._s(n))]),a("span",[e._v(e._s(r))])]),a("md-button",{staticClass:"md-icon-button md-list-action md-primary",on:{click:function(t){t.preventDefault(),e.deleteOrganization(n)}}},[a("md-icon",[e._v("delete")]),a("md-tooltip",[e._v("Delete organization")])],1)],2),a("md-divider",{key:n+"divider"})]})],2)],1)],1)},Qe=[],Xe={name:"organizations",data:function(){return{idToDelete:null}},created:function(){this.loadOrganizations(),this.loadCurrentUser()},computed:Object($["a"])({},Object(A["d"])(["organizations","currentUser"])),methods:Object($["a"])({},Object(ge["a"])(ee,ve,de),{deleteOrganization:function(e){if(this.isCurrentOrganization(e))return this.changeSnackbarMessage({message:"You cannot delete the organization you belong to!"});this.idToDelete=e},onConfirm:function(){var e=Object(I["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.$udaru.deleteOrganization(this.idToDelete);case 3:this.idToDelete=null,this.changeSnackbarMessage({message:"Organization deleted"}),this.loadOrganizations(),e.next=11;break;case 8:e.prev=8,e.t0=e["catch"](0),this.changeSnackbarMessage({message:"Error deleting organization: ".concat(e.t0)});case 11:case"end":return e.stop()}},e,this,[[0,8]])}));return function(){return e.apply(this,arguments)}}(),onCancel:function(){this.idToDelete=null},isCurrentOrganization:function(e){return this.currentUser&&this.currentUser.organizationId===e}})},et=Xe,tt=Object(l["a"])(et,We,Qe,!1,null,null,null);tt.options.__file="OrganizationSelect.vue";var at=tt.exports,nt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("organization-details",{on:{submit:e.doCreateOrganization}})},rt=[],it=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("form",{key:e.organization.id,attrs:{"data-vv-scope":e.organization.id,novalidate:"",autocomplete:"off"},on:{submit:function(t){return t.preventDefault(),e.validate(t)}}},[a("div",{staticClass:"section"},[a("md-toolbar",{attrs:{"md-elevation":"0"}},[a("span",{staticClass:"md-title",staticStyle:{flex:"1"}},[e._v(e._s(e.creating?"Create organization":"Organization"))]),a("md-button",{attrs:{disabled:!e.isFormChanged(e.organization.id),type:"submit"}},[e._v(e._s(e.creating?"Create":"Save"))])],1),a("md-content",[a("div",{staticClass:"md-layout md-alignment-center-center"},[a("div",{staticClass:"md-layout-item md-size-50"},[a("div",[a("md-field",{class:{"md-invalid":e.errors.has("id")}},[a("label",{attrs:{for:"id"}},[e._v("Orgnanization ID")]),a("md-input",{directives:[{name:"validate",rawName:"v-validate",value:{required:!0,udaru_id:!0,excluded:e.organizationIds},expression:"{required: true, udaru_id: true, excluded: organizationIds}"}],attrs:{id:"id",name:"id",autofocus:"",readonly:!e.creating},model:{value:e.localOrganization.id,callback:function(t){e.$set(e.localOrganization,"id",t)},expression:"localOrganization.id"}}),a("span",{staticClass:"md-error"},[e._v(e._s(e.errors.first("id")))])],1)],1),a("div",[a("md-field",{class:{"md-invalid":e.errors.has("name")}},[a("label",{attrs:{for:"name"}},[e._v("Organization name")]),a("md-input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{id:"name",name:"name"},model:{value:e.localOrganization.name,callback:function(t){e.$set(e.localOrganization,"name",t)},expression:"localOrganization.name"}}),a("span",{staticClass:"md-error"},[e._v(e._s(e.errors.first("name")))])],1)],1),a("div",[a("md-field",{class:{"md-invalid":e.errors.has("description")}},[a("label",{attrs:{for:"description"}},[e._v("Organization description")]),a("md-input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{id:"description",name:"description"},model:{value:e.localOrganization.description,callback:function(t){e.$set(e.localOrganization,"description",t)},expression:"localOrganization.description"}}),a("span",{staticClass:"md-error"},[e._v(e._s(e.errors.first("description")))])],1)],1),a("div",[a("md-field",{class:{"md-invalid":e.errors.has("metadata")}},[a("label",{attrs:{for:"metadata"}},[e._v("Metadata")]),a("md-textarea",{directives:[{name:"validate",rawName:"v-validate",value:"json",expression:"'json'"}],attrs:{id:"metadata",name:"metadata"},model:{value:e.localOrganization.metadata,callback:function(t){e.$set(e.localOrganization,"metadata",t)},expression:"localOrganization.metadata"}}),a("span",{staticClass:"md-error"},[e._v(e._s(e.errors.first("metadata")))])],1)],1),e.creating?a("div",[a("md-field",{class:{"md-invalid":e.errors.has("userId")}},[a("label",{attrs:{for:"userId"}},[e._v("Administrator ID")]),a("md-input",{directives:[{name:"validate",rawName:"v-validate",value:"udaru_id",expression:"'udaru_id'"}],attrs:{id:"userId",name:"userId",autofocus:"",readonly:!e.creating},model:{value:e.localOrganization.user.id,callback:function(t){e.$set(e.localOrganization.user,"id",t)},expression:"localOrganization.user.id"}}),a("span",{staticClass:"md-error"},[e._v(e._s(e.errors.first("userId")))])],1)],1):e._e(),e.creating?a("div",[a("md-field",{class:{"md-invalid":e.errors.has("userName")}},[a("label",{attrs:{for:"userName"}},[e._v("Administrator name")]),a("md-input",{attrs:{id:"userName",name:"userName"},model:{value:e.localOrganization.user.name,callback:function(t){e.$set(e.localOrganization.user,"name",t)},expression:"localOrganization.user.name"}}),a("span",{staticClass:"md-error"},[e._v(e._s(e.errors.first("userName")))])],1)],1):e._e()])])])],1)])},st=[],ot=(a("7f7f"),a("ac6a"),a("456d"),{methods:{isFormChanged:function(e){var t=e?this.fields&&this.fields["$".concat(e)]||{}:this.fields;return Object.keys(t).some(function(e){return t[e].changed})}}}),ct=ot,ut={name:"organization-details",mixins:[ct],props:{organization:{type:Object,default:function(){return{id:null,name:null,description:null,metadata:{},user:{}}}}},computed:Object($["a"])({},Object(A["d"])(["organizations"]),{organizationIds:function(){return this.creating&&(this.organizations||[]).map(function(e){var t=e.id;return t})},creating:function(){return!this.organization.id}}),watch:{organization:function(){this.createLocalOrganization()}},methods:Object($["a"])({},Object(ge["a"])(ee),{validate:function(){var e=Object(I["a"])(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$validator.validateAll();case 2:if(!e.sent){e.next=6;break}t=Object($["a"])({},this.localOrganization),!this.creating||this.localOrganization.user.id&&this.localOrganization.user.name||delete t.user,this.$emit("submit",t);case 6:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),createLocalOrganization:function(){return this.localOrganization=Object($["a"])({},this.organization,{metadata:JSON.stringify(this.organization.metadata,null,2)})}}),data:function(){return{localOrganization:this.createLocalOrganization()}},created:function(){this.loadOrganizations()}},lt=ut,dt=Object(l["a"])(lt,it,st,!1,null,null,null);dt.options.__file="OrganizationDetails.vue";var mt=dt.exports,pt={name:"organization-create",components:{OrganizationDetails:mt},methods:Object($["a"])({},Object(ge["a"])(fe,de),{doCreateOrganization:function(){var e=Object(I["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.createOrganization({organization:t});case 3:this.changeSnackbarMessage({message:"Organization saved!"}),this.$router.push({name:"select-organization"}),e.next=10;break;case 7:e.prev=7,e.t0=e["catch"](0),this.changeSnackbarMessage({message:"Error creating organization: ".concat(e.t0)});case 10:case"end":return e.stop()}},e,this,[[0,7]])}));return function(t){return e.apply(this,arguments)}}()})},ht=pt,ft=Object(l["a"])(ht,nt,rt,!1,null,null,null);ft.options.__file="OrganizationCreate.vue";var vt=ft.exports,gt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.organization?a("div",[a("organization-details",{attrs:{organization:e.organization},on:{submit:e.updateOrganization}}),a("policy-associations",{attrs:{policies:e.organization.policies,organizationId:e.organizationId,deleteAssociation:e.removePolicyInstance,addAssociation:e.addPolicyInstance}})],1):e._e()},bt=[],yt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"section"},[e.idToDelete?a("md-dialog-confirm",{attrs:{"md-active":!!e.idToDelete,"md-title":"Confirm remove","md-content":"Remove policy association "+e.idToDelete+"?"},on:{"md-cancel":e.cancelRemove,"md-confirm":e.confirmRemove}}):e._e(),a("add-policy-association",{attrs:{organizationId:e.organizationId,active:e.addingAssociation},on:{"update:active":function(t){e.addingAssociation=t},"add-association":e.confirmAdd}}),a("md-toolbar",{attrs:{"md-elevation":"0"}},[a("span",{staticClass:"md-title",staticStyle:{flex:"1"}},[e._v("Policies")]),a("md-button",{on:{click:function(t){e.addingAssociation=!0}}},[e._v("Assign policy")])],1),a("md-table",{attrs:{"md-model-id":""},scopedSlots:e._u([{key:"md-table-row",fn:function(t){var n=t.item;return a("md-table-row",{},[a("md-table-cell",{attrs:{"md-label":"ID"}},[a("router-link",{attrs:{to:{name:"policy",params:{organizationId:e.organizationId,policyId:n.id}}}},[e._v("\r\n          "+e._s(n.id)+"\r\n        ")])],1),a("md-table-cell",{attrs:{"md-label":"Name"}},[e._v(e._s(n.name))]),a("md-table-cell",{attrs:{"md-label":"Variables"}},[a("metadata",{attrs:{value:n.variables}})],1),a("md-table-cell",{attrs:{"md-label":"Version","md-numeric":""}},[e._v(e._s(n.version))]),a("md-table-cell",{attrs:{"md-label":"Instance","md-numeric":""}},[e._v(e._s(n.instance))]),a("md-table-cell",{attrs:{"md-label":"Actions"}},[a("md-button",{staticClass:"md-icon-button md-primary",on:{click:function(t){e.removePolicyInstance(n.id)}}},[a("md-icon",[e._v("delete")]),a("md-tooltip",[e._v("Remove policy association")])],1)],1)],1)}}]),model:{value:e.policies,callback:function(t){e.policies=t},expression:"policies"}},[a("md-table-empty-state",{attrs:{"md-label":"No policies","md-description":"No associated policies"}},[a("md-button",{staticClass:"md-primary",on:{click:function(t){e.addingAssociation=!0}}},[e._v("Assign policy")])],1)],1)],1)},It=[],_t=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("md-dialog",{attrs:{"md-active":e.localActive},on:{"update:mdActive":function(t){e.localActive=t}}},[a("md-dialog-title",{staticClass:"md-primary"},[e._v("Add policy")]),a("md-dialog-content",[a("policy-select",{attrs:{organizationId:e.organizationId},on:{selected:function(t){return e.selectedPolicy=t}}}),e.variableNames.length?a("form",{attrs:{novalidate:"",autocomplete:"false"}},[a("div",{staticClass:"md-subheading"},[e._v("Variables")]),a("div",{staticClass:"md-caption"},[e._v("This policy contains variables")]),e._l(e.variableNames,function(t){return a("md-field",{key:t,class:{"md-invalid":e.errors.has(t)}},[a("label",{attrs:{for:t}},[e._v(e._s(t))]),a("md-input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{id:t,name:t},model:{value:e.variables[t],callback:function(a){e.$set(e.variables,t,a)},expression:"variables[variable]"}})],1)})],2):e._e()],1),a("md-dialog-actions",[a("md-button",{on:{click:function(t){e.localActive=!1}}},[e._v("Cancel")]),a("md-button",{staticClass:"md-raised md-primary",on:{click:e.confirm}},[e._v("Ok")])],1)],1)},Ot=[],xt=(a("1c4c"),a("612d")),zt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("md-field",{staticClass:"policy-select-field"},[a("md-select",{attrs:{disabled:!e.anyPolicies,placeholder:e.anyPolicies?"Select a policy":"No available policies"},on:{"md-selected":e.policySelected},model:{value:e.selectedPolicyId,callback:function(t){e.selectedPolicyId=t},expression:"selectedPolicyId"}},e._l(e.policies,function(t){return a("md-option",{key:t.id,attrs:{value:t.id}},[e._v(e._s(t.name))])}))],1)},wt=[],kt=(a("7514"),{name:"policy-select",props:{organizationId:String},data:function(){return{selectedPolicyId:null}},computed:Object($["a"])({},Object(A["c"])(["getPolicies"]),{policies:function(){return Object(xt["differenceBy"])("id",this.getPolicies(this.organizationId))(this.exclude)},anyPolicies:function(){return!!this.policies.length},selectedPolicy:function(){var e=this;return this.selectedPolicyId&&this.policies.find(function(t){var a=t.id;return a===e.selectedPolicyId})}}),methods:Object($["a"])({},Object(ge["a"])([se]),{policySelected:function(){this.$emit("selected",this.selectedPolicy)}}),created:function(){var e=Object(I["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:this.loadPolicies(this.organizationId);case 1:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()}),jt=kt,Ct=(a("7e20"),Object(l["a"])(jt,zt,wt,!1,null,null,null));Ct.options.__file="PolicySelect.vue";var Rt=Ct.exports,Tt=regeneratorRuntime.mark(Ut);function Ut(e){var t,a;return regeneratorRuntime.wrap(function(n){while(1)switch(n.prev=n.next){case 0:t=/\{(\w+)\}?/g;case 1:if(!(a=t.exec(e))){n.next=6;break}return n.next=4,a[1];case 4:n.next=1;break;case 6:case"end":return n.stop()}},Tt,this)}var St=Object(xt["flow"])(Object(xt["get"])("statements.Statement"),Object(xt["flatMap"])(Object(xt["flow"])(Object(xt["pick"])(["Action","Resource"]),xt["values"],xt["flatten"])),Object(xt["map"])(Object(xt["flow"])(Ut,Array.from)),xt["flatten"],xt["compact"],xt["uniq"]),Pt={name:"add-policy-association",props:{active:{type:Boolean},organizationId:{type:String,required:!0}},components:{PolicySelect:Rt},data:function(){return{selectedPolicy:null,variables:{}}},computed:{localActive:{get:function(){return this.active},set:function(e){this.$emit("update:active",e)}},variableNames:function(){return St(this.selectedPolicy)}},methods:{confirm:function(){var e=Object(I["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$validator.validateAll();case 2:if(e.sent){e.next=4;break}return e.abrupt("return");case 4:this.$emit("add-association",{id:this.selectedPolicy.id,variables:this.variables});case 5:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()}},Dt=Pt,$t=Object(l["a"])(Dt,_t,Ot,!1,null,null,null);$t.options.__file="AddPolicyAssociation.vue";var At=$t.exports,Et=function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.value&&Object.keys(e.value).length>0?a("ul",e._l(e.value,function(t,n){return a("li",{key:n},[a("code",[e._v(e._s(n))]),e._v(": "),a("strong",[a("code",[e._v(e._s(t))])])])})):a("span",[e._v(" - ")])},Nt=[],Mt={name:"metadata",props:{value:Object}},qt=Mt,Bt=(a("7870"),Object(l["a"])(qt,Et,Nt,!1,null,"ee6099f4",null));Bt.options.__file="Metadata.vue";var Kt=Bt.exports,Lt={name:"policy-associations",props:{policies:{type:Array,required:!0},organizationId:{type:String,required:!0},deleteAssociation:{type:Function,required:!0},addAssociation:{type:Function,required:!0}},components:{AddPolicyAssociation:At,Metadata:Kt},data:function(){return{addingAssociation:!1,idToDelete:null}},methods:Object($["a"])({},Object(ge["a"])(de),{removePolicyInstance:function(e){this.idToDelete=e},confirmRemove:function(){var e=Object(I["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.deleteAssociation(this.idToDelete);case 3:this.idToDelete=null,this.changeSnackbarMessage({message:"Policy association removed successfully"}),e.next=10;break;case 7:e.prev=7,e.t0=e["catch"](0),this.changeSnackbarMessage({message:"Error removing policy association: ".concat(e.t0)});case 10:case"end":return e.stop()}},e,this,[[0,7]])}));return function(){return e.apply(this,arguments)}}(),cancelRemove:function(){this.idToDelete=null},confirmAdd:function(){var e=Object(I["a"])(regeneratorRuntime.mark(function e(t){var a,n;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return a=t.id,n=t.variables,e.prev=1,e.next=4,this.addAssociation({id:a,variables:n});case 4:this.addingAssociation=null,this.changeSnackbarMessage({message:"Policy association addedd successfully"}),e.next=11;break;case 8:e.prev=8,e.t0=e["catch"](1),this.changeSnackbarMessage({message:"Error adding policy association: ".concat(e.t0)});case 11:case"end":return e.stop()}},e,this,[[1,8]])}));return function(t){return e.apply(this,arguments)}}()})},Ft=Lt,Vt=Object(l["a"])(Ft,yt,It,!1,null,null,null);Vt.options.__file="PolicyAssociations.vue";var Jt=Vt.exports,Gt={name:"organization",props:{organizationId:String},components:{OrganizationDetails:mt,PolicyAssociations:Jt},computed:Object($["a"])({},Object(A["c"])(["getOrganization"]),{organization:function(){return this.getOrganization(this.organizationId)}}),methods:Object($["a"])({},Object(ge["a"])(te,de),{updateOrganization:function(){var e=Object(I["a"])(regeneratorRuntime.mark(function e(t){var a,n,r;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return a=t.name,n=t.description,r=t.metadata,e.prev=1,e.next=4,this.$udaru.updateOrganization(this.organizationId,{name:a,description:n,metadata:r});case 4:this.changeSnackbarMessage({message:"Organization saved!"}),e.next=10;break;case 7:e.prev=7,e.t0=e["catch"](1),this.changeSnackbarMessage({message:'Error saving organization: "'.concat(e.t0,'"')});case 10:this.loadOrganizationData();case 11:case"end":return e.stop()}},e,this,[[1,7]])}));return function(t){return e.apply(this,arguments)}}(),removePolicyInstance:function(){var e=Object(I["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$udaru.removeOrganizationPolicy(this.organizationId,t);case 2:return e.next=4,this.loadOrganizationData();case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),addPolicyInstance:function(){var e=Object(I["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$udaru.addOrUpdateOrganizationPolicy(this.organizationId,t);case 2:return e.next=4,this.loadOrganizationData();case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),loadOrganizationData:function(){var e=Object(I["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.loadOrganization(this.organizationId);case 2:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()}),watch:{$route:function(){this.loadOrganization(this.organizationId)}},created:function(){this.loadOrganizationData()}},Ht=Gt,Yt=Object(l["a"])(Ht,gt,bt,!1,null,null,null);Yt.options.__file="Organization.vue";var Zt=Yt.exports,Wt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("md-app",[a("md-app-toolbar",{staticClass:"md-large md-dense md-transparent"},[a("div",{staticClass:"md-toolbar-row"},[a("div",{staticClass:"md-toolbar-section-start"},[a("toolbar-logo"),a("span",{staticClass:"md-title"},[e._v("Organizations")])],1),a("div",{staticClass:"md-toolbar-section-end"},[a("md-button",{staticClass:"md-icon-button",attrs:{to:{name:"settings"}}},[a("md-icon",[e._v("settings")])],1)],1)]),a("div",{staticClass:"md-layout md-toolbar-row md-alignment-center-center"},[a("md-tabs",{staticClass:"md-transparent"},[a("md-tab",{attrs:{to:"/organizations/select","md-icon":"storage"}}),a("md-tab",{attrs:{to:"/organizations/create","md-icon":"add_box"}})],1)],1)]),a("md-app-content",[a("router-view")],1)],1)},Qt=[],Xt={name:"organizations",components:{ToolbarLogo:Je}},ea=Xt,ta=(a("283a"),Object(l["a"])(ea,Wt,Qt,!1,null,"c6c20702",null));ta.options.__file="Organizations.vue";var aa=ta.exports,na=function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.team?a("div",[a("team-details",{attrs:{team:e.team,organizationId:e.organizationId},on:{submit:e.updateTeam}}),a("div",{staticClass:"section"},[a("md-toolbar",{attrs:{"md-elevation":"0"}},[a("span",{staticClass:"md-title",staticStyle:{flex:"1"}},[e._v("Users")]),a("div",{staticClass:"md-toolbar-section-end"},[a("user-select",{attrs:{layout:"box",exclude:e.team.users,organizationId:e.organizationId},model:{value:e.selectedUserId,callback:function(t){e.selectedUserId=t},expression:"selectedUserId"}}),a("md-button",{attrs:{disabled:!e.selectedUserId},on:{click:function(t){e.addUser(e.selectedUserId)}}},[e._v("Add user")])],1)]),a("md-table",{scopedSlots:e._u([{key:"md-table-row",fn:function(t){var n=t.item;return a("md-table-row",{},[a("md-table-cell",{attrs:{"md-label":"ID"}},[a("router-link",{attrs:{to:{name:"user",params:{organizationId:e.organizationId,userId:n.id}}}},[e._v("\n          "+e._s(n.id)+"\n          ")])],1),a("md-table-cell",{attrs:{"md-label":"Name"}},[e._v(e._s(n.name))]),a("md-table-cell",{attrs:{"md-label":"Actions"}},[a("md-button",{staticClass:"md-icon-button md-primary",on:{click:function(t){e.removeUser(n.id)}}},[a("md-icon",[e._v("delete")]),a("md-tooltip",[e._v("Remove user from team")])],1)],1)],1)}}]),model:{value:e.team.users,callback:function(t){e.$set(e.team,"users",t)},expression:"team.users"}},[a("md-table-empty-state",{attrs:{"md-label":"No users","md-description":"The team doesn't have any users"}})],1)],1),a("div",{staticClass:"section"},[a("md-toolbar",{attrs:{"md-elevation":"0"}},[a("span",{staticClass:"md-title",staticStyle:{flex:"1"}},[e._v("Nested teams")]),a("team-select",{attrs:{selectedTeamId:e.selectedTeamId,exclude:e.nestedTeams.concat(e.parentTeams).concat([e.team]),organizationId:e.organizationId},on:{selected:function(t){return e.selectedTeamId=t}}}),a("md-button",{attrs:{disabled:!e.selectedTeamId},on:{click:function(t){e.addNestedTeam(e.selectedTeamId)}}},[e._v("Add nested team")])],1),a("md-table",{scopedSlots:e._u([{key:"md-table-row",fn:function(t){var n=t.item;return a("md-table-row",{},[a("md-table-cell",{attrs:{"md-label":"ID"}},[a("router-link",{attrs:{to:{name:"team",params:{organizationId:e.organizationId,teamId:n.id}}}},[e._v("\n          "+e._s(n.id)+"\n          ")])],1),a("md-table-cell",{attrs:{"md-label":"Name"}},[e._v(e._s(n.name))]),a("md-table-cell",{attrs:{"md-label":"Actions"}},[a("md-button",{staticClass:"md-icon-button md-primary",on:{click:function(t){e.removeNestedTeam(n.id)}}},[a("md-icon",[e._v("delete")]),a("md-tooltip",[e._v("Remove nested team")])],1)],1)],1)}}]),model:{value:e.nestedTeams,callback:function(t){e.nestedTeams=t},expression:"nestedTeams"}},[a("md-table-empty-state",{attrs:{"md-label":"No teams","md-description":"The team doesn't have any nested teams"}})],1)],1),a("policy-associations",{attrs:{policies:e.team.policies,organizationId:e.organizationId,deleteAssociation:e.removePolicyInstance,addAssociation:e.addPolicyInstance}})],1):e._e()},ra=[],ia=(a("6762"),a("2fdb"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("md-autocomplete",{attrs:{disabled:!e.anyUsers,"md-dense":"","md-options":e.users.map(function(e){var t=e.id;return t}),"md-layout":e.layout,"md-input-placeholder":e.anyUsers?"Select a user":"No available users"},model:{value:e.localValue,callback:function(t){e.localValue=t},expression:"localValue"}})}),sa=[],oa={name:"user-select",props:{organizationId:String,value:String,layout:{type:String},exclude:{type:Array,default:function(){return[]}}},computed:Object($["a"])({},Object(A["c"])(["getUsers"]),{users:function(){return Object(xt["differenceBy"])("id",this.getUsers(this.organizationId))(this.exclude)},anyUsers:function(){return!!this.users.length},localValue:{get:function(){return this.value},set:function(e){this.$emit("input",e)}}}),methods:Object($["a"])({},Object(ge["a"])([ae])),created:function(){var e=Object(I["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:this.loadUsers(this.organizationId);case 1:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},ca=oa,ua=(a("a220"),Object(l["a"])(ca,ia,sa,!1,null,null,null));ua.options.__file="UserSelect.vue";var la=ua.exports,da=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("form",{key:e.team.id,attrs:{"data-vv-scope":e.team.id,novalidate:"",autocomplete:"off"},on:{submit:function(t){return t.preventDefault(),e.validate(t)}}},[a("div",{staticClass:"section"},[a("md-toolbar",{attrs:{"md-elevation":"0"}},[a("span",{staticClass:"md-title",staticStyle:{flex:"1"}},[e._v(e._s(e.creating?"Create team":"Team"))]),a("md-button",{on:{click:function(t){e.creating&&e.$router.go(-1)}}},[e._v("Cancel")]),a("md-button",{attrs:{disabled:!e.isFormChanged(e.localTeam.id),type:"submit"}},[e._v(e._s(e.creating?"Create":"Save"))])],1),a("md-content",[a("div",{staticClass:"md-layout md-alignment-center-center"},[a("div",{staticClass:"md-layout-item md-size-50"},[a("div",[a("md-field",{class:{"md-invalid":e.errors.has("id")}},[a("label",{attrs:{for:"id"}},[e._v("Team ID")]),a("md-input",{directives:[{name:"validate",rawName:"v-validate",value:{required:!0,udaru_id:!0,excluded:e.teamIds},expression:"{required:true, udaru_id: true, excluded: teamIds}"}],attrs:{id:"id",name:"id",autofocus:"",readonly:!e.creating},model:{value:e.localTeam.id,callback:function(t){e.$set(e.localTeam,"id",t)},expression:"localTeam.id"}}),a("span",{staticClass:"md-error"},[e._v(e._s(e.errors.first("id")))])],1)],1),a("div",[a("md-field",{class:{"md-invalid":e.errors.has("name")}},[a("label",{attrs:{for:"name"}},[e._v("Team name")]),a("md-input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{id:"name",name:"name"},model:{value:e.localTeam.name,callback:function(t){e.$set(e.localTeam,"name",t)},expression:"localTeam.name"}}),a("span",{staticClass:"md-error"},[e._v(e._s(e.errors.first("name")))])],1)],1),a("div",[a("md-field",{class:{"md-invalid":e.errors.has("description")}},[a("label",{attrs:{for:"description"}},[e._v("Team description")]),a("md-input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{id:"description",name:"description"},model:{value:e.localTeam.description,callback:function(t){e.$set(e.localTeam,"description",t)},expression:"localTeam.description"}}),a("span",{staticClass:"md-error"},[e._v(e._s(e.errors.first("description")))])],1)],1),a("div",[a("md-field",{class:{"md-invalid":e.errors.has("metadata")}},[a("label",{attrs:{for:"metadata"}},[e._v("Metadata")]),a("md-textarea",{directives:[{name:"validate",rawName:"v-validate",value:"json",expression:"'json'"}],attrs:{id:"metadata",name:"metadata"},model:{value:e.localTeam.metadata,callback:function(t){e.$set(e.localTeam,"metadata",t)},expression:"localTeam.metadata"}}),a("span",{staticClass:"md-error"},[e._v(e._s(e.errors.first("metadata")))])],1)],1),e.creating?a("div",[a("md-field",{class:{"md-invalid":e.errors.has("userId")}},[a("label",{attrs:{for:"userId"}},[e._v("Administrator ID")]),a("md-input",{directives:[{name:"validate",rawName:"v-validate",value:"udaru_id",expression:"'udaru_id'"}],attrs:{id:"userId",name:"userId",autofocus:"",readonly:!e.creating},model:{value:e.localTeam.user.id,callback:function(t){e.$set(e.localTeam.user,"id",t)},expression:"localTeam.user.id"}}),a("span",{staticClass:"md-error"},[e._v(e._s(e.errors.first("userId")))])],1)],1):e._e(),e.creating?a("div",[a("md-field",{class:{"md-invalid":e.errors.has("userName")}},[a("label",{attrs:{for:"userName"}},[e._v("Administrator name")]),a("md-input",{attrs:{id:"userName",name:"userName"},model:{value:e.localTeam.user.name,callback:function(t){e.$set(e.localTeam.user,"name",t)},expression:"localTeam.user.name"}}),a("span",{staticClass:"md-error"},[e._v(e._s(e.errors.first("userName")))])],1)],1):e._e()])])])],1)])},ma=[],pa={name:"team-details",mixins:[ct],props:{organizationId:{type:String,required:!0},team:{type:Object,default:function(){return{id:null,name:null,description:null,metadata:{},user:{}}}}},watch:{team:function(){this.createLocalTeam()}},computed:Object($["a"])({},Object(A["c"])(["getTeams"]),{teamIds:function(){return this.creating&&(this.getTeams(this.organizationId)||[]).map(function(e){var t=e.id;return t})},creating:function(){return!this.team.id}}),methods:Object($["a"])({},Object(ge["a"])(re),{validate:function(){var e=Object(I["a"])(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$validator.validateAll();case 2:if(!e.sent){e.next=6;break}t=Object($["a"])({},this.localTeam),!this.creating||this.localTeam.user.id&&this.localTeam.user.name||delete t.user,this.$emit("submit",t);case 6:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),createLocalTeam:function(){return this.localTeam=Object($["a"])({},this.team,{metadata:JSON.stringify(this.team.metadata,null,2)})}}),data:function(){return{localTeam:this.createLocalTeam()}},mounted:function(){this.loadTeams(this.organizationId)}},ha=pa,fa=Object(l["a"])(ha,da,ma,!1,null,null,null);fa.options.__file="TeamDetails.vue";var va=fa.exports,ga=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("md-field",{staticClass:"team-select-field"},[a("md-select",{attrs:{disabled:!e.anyTeams,"md-dense":"",placeholder:e.anyTeams?"Select a team":"No available teams",value:e.selectedTeamId},on:{"md-selected":function(t){return e.$emit("selected",t)}}},e._l(e.teams,function(t){return a("md-option",{key:t.id,attrs:{value:t.id}},[e._v(e._s(t.name))])}))],1)},ba=[],ya={name:"team-select",props:{organizationId:String,exclude:Array,selectedTeamId:String},computed:Object($["a"])({},Object(A["c"])(["getTeams"]),{teams:function(){return Object(xt["differenceBy"])("id",this.getTeams(this.organizationId))(this.exclude)},anyTeams:function(){return!!this.teams.length}}),methods:Object($["a"])({},Object(ge["a"])([re])),created:function(){var e=Object(I["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:this.loadTeams(this.organizationId);case 1:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},Ia=ya,_a=(a("5fd1"),Object(l["a"])(Ia,ga,ba,!1,null,null,null));_a.options.__file="TeamSelect.vue";var Oa=_a.exports,xa={name:"team",props:{organizationId:String,teamId:String},components:{PolicyAssociations:Jt,UserSelect:la,TeamSelect:Oa,TeamDetails:va},data:function(){return{selectedUserId:null,selectedTeamId:null}},computed:Object($["a"])({},Object(A["c"])(["getTeam","getTeams"]),{team:function(){return this.getTeam(this.organizationId,this.teamId)},nestedTeams:function(){var e=this;return Object(xt["flow"])(Object(xt["defaultTo"])([]),Object(xt["filter"])(function(t){var a=t.id,n=t.path;return n.includes("".concat(e.teamId,".").concat(a))}))(this.getTeams(this.organizationId))},parentTeams:function(){var e=this;return Object(xt["flow"])(Object(xt["defaultTo"])([]),Object(xt["filter"])(function(t){var a=t.id;return e.team.path.includes("".concat(a,"."))}))(this.getTeams(this.organizationId))}}),watch:{$route:function(){this.loadTeamData(),this.loadTeamsData()}},methods:Object($["a"])({},Object(ge["a"])([ie,re,ue,le,de]),{updateTeam:function(){var e=Object(I["a"])(regeneratorRuntime.mark(function e(t){var a,n,r;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return a=t.name,n=t.description,r=t.metadata,e.prev=1,e.next=4,this.$udaru.updateTeam(this.organizationId,this.teamId,{name:a,description:n,metadata:r});case 4:this.changeSnackbarMessage({message:"Team saved!"}),e.next=10;break;case 7:e.prev=7,e.t0=e["catch"](1),this.changeSnackbarMessage({message:'Error saving team: "'.concat(e.t0,'"')});case 10:this.loadTeamData();case 11:case"end":return e.stop()}},e,this,[[1,7]])}));return function(t){return e.apply(this,arguments)}}(),addUser:function(){var e=Object(I["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.addUserToTeam({organizationId:this.organizationId,teamId:this.teamId,userId:t});case 3:this.changeSnackbarMessage({message:"User successfully added to team"}),this.loadTeamData(),e.next=10;break;case 7:e.prev=7,e.t0=e["catch"](0),this.changeSnackbarMessage({message:"Error adding user to team: ".concat(e.t0)});case 10:case"end":return e.stop()}},e,this,[[0,7]])}));return function(t){return e.apply(this,arguments)}}(),removeUser:function(){var e=Object(I["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.removeUserFromTeam({organizationId:this.organizationId,teamId:this.teamId,userId:t});case 3:this.changeSnackbarMessage({message:"User successfully removed from team"}),this.loadTeamData(),e.next=10;break;case 7:e.prev=7,e.t0=e["catch"](0),this.changeSnackbarMessage({message:"Error removing user from team: ".concat(e.t0)});case 10:case"end":return e.stop()}},e,this,[[0,7]])}));return function(t){return e.apply(this,arguments)}}(),removePolicyInstance:function(){var e=Object(I["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$udaru.removeTeamPolicy(this.organizationId,this.teamId,t);case 2:return e.next=4,this.loadTeamData();case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),addPolicyInstance:function(){var e=Object(I["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$udaru.addOrUpdateTeamPolicy(this.organizationId,this.teamId,t);case 2:return e.next=4,this.loadTeamData();case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),removeNestedTeam:function(){var e=Object(I["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$udaru.removeNestedTeam(this.organizationId,t);case 2:return e.next=4,this.loadTeamData();case 4:return e.next=6,this.loadTeamsData();case 6:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),addNestedTeam:function(){var e=Object(I["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$udaru.addNestedTeam(this.organizationId,this.teamId,t);case 2:return this.selectedTeamId=null,e.next=5,this.loadTeamData();case 5:return e.next=7,this.loadTeamsData();case 7:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),loadTeamsData:function(){this.loadTeams(this.organizationId)},loadTeamData:function(){this.loadTeam({organizationId:this.organizationId,teamId:this.teamId})}}),created:function(){this.loadTeamData(),this.loadTeamsData()}},za=xa,wa=Object(l["a"])(za,na,ra,!1,null,null,null);wa.options.__file="Team.vue";var ka=wa.exports,ja=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("team-details",{attrs:{organizationId:e.organizationId},on:{submit:e.doCreateTeam}})},Ca=[],Ra={name:"team-create",props:{organizationId:String},components:{TeamDetails:va},methods:Object($["a"])({},Object(ge["a"])(me,de),{doCreateTeam:function(){var e=Object(I["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.createTeam({organizationId:this.organizationId,team:t});case 3:this.changeSnackbarMessage({message:"Team created!"}),this.$router.push({name:"teams",params:{organizationId:this.organizationId}}),e.next=10;break;case 7:e.prev=7,e.t0=e["catch"](0),this.changeSnackbarMessage({message:'Error creating team: "'.concat(e.t0,'"')});case 10:case"end":return e.stop()}},e,this,[[0,7]])}));return function(t){return e.apply(this,arguments)}}()})},Ta=Ra,Ua=Object(l["a"])(Ta,ja,Ca,!1,null,null,null);Ua.options.__file="TeamCreate.vue";var Sa=Ua.exports,Pa=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"teams"},[e.idToDelete?a("md-dialog-confirm",{attrs:{"md-active":!!e.idToDelete,"md-title":"Confirm delete","md-content":"Delete team "+e.idToDelete+"?"},on:{"md-cancel":e.onCancel,"md-confirm":e.onConfirm}}):e._e(),a("div",{staticClass:"section"},[a("md-toolbar",{attrs:{"md-elevation":"0"}},[a("span",{staticClass:"md-title",staticStyle:{flex:"1"}},[e._v("Teams")]),a("md-button",{attrs:{to:{name:"team-create",params:{organizationId:e.organizationId}}}},[e._v("\n        Create new team\n      ")])],1),e.searched?a("md-table",{scopedSlots:e._u([{key:"md-table-row",fn:function(t){var n=t.item;return a("md-table-row",{},[a("md-table-cell",{attrs:{"md-label":"ID"}},[a("router-link",{attrs:{to:{name:"team",params:{organizationId:e.organizationId,teamId:n.id}}}},[e._v("\n            "+e._s(n.id)+"\n          ")])],1),a("md-table-cell",{attrs:{"md-label":"Name"}},[e._v(e._s(n.name))]),a("md-table-cell",{attrs:{"md-label":"Metadata"}},[a("metadata",{attrs:{value:n.metadata}})],1),a("md-table-cell",{attrs:{"md-label":"# Users","md-numeric":""}},[e._v(e._s(n.usersCount||"-"))]),a("md-table-cell",{attrs:{"md-label":"Actions"}},[a("md-button",{staticClass:"md-icon-button md-dense md-primary",on:{click:function(t){e.deleteTeam(n.id)}}},[a("md-icon",[e._v("delete")]),a("md-tooltip",[e._v("Delete team")])],1)],1)],1)}}]),model:{value:e.searched,callback:function(t){e.searched=t},expression:"searched"}},[a("md-table-toolbar",[a("div",{staticClass:"md-toolbar-section-end"},[a("md-field",{attrs:{"md-clearable":""}},[a("md-input",{attrs:{placeholder:"Search teams..."},on:{input:e.searchOnTable},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})],1)],1)]),a("md-table-empty-state",{attrs:{"md-label":"No teams found","md-description":e.search&&"No team found for this '"+e.search+"' query. Try a different search term or create a new team."}})],1):e._e()],1)],1)},Da=[],$a=(a("386d"),a("6b54"),function(e){return e.toString().toLowerCase()}),Aa=function(e,t){return t?e.filter(function(e){return $a(e.name).includes($a(t))}):e},Ea={name:"teams",props:{organizationId:String},components:{Metadata:Kt},computed:Object($["a"])({},Object(A["c"])(["getTeams"]),{searched:function(){return this.searchResults||this.getTeams(this.organizationId)}}),data:function(){return{idToDelete:null,search:null,searchResults:null}},methods:Object($["a"])({},Object(ge["a"])(re,de),{searchOnTable:function(){this.searchResults=Aa(this.getTeams(this.organizationId),this.search)},deleteTeam:function(e){this.idToDelete=e},onConfirm:function(){var e=Object(I["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.$udaru.deleteTeam(this.idToDelete);case 3:this.idToDelete=null,this.changeSnackbarMessage({message:"Team deleted"}),this.loadTeamsData(),e.next=11;break;case 8:e.prev=8,e.t0=e["catch"](0),this.changeSnackbarMessage({message:"Error deleting team: ".concat(e.t0)});case 11:case"end":return e.stop()}},e,this,[[0,8]])}));return function(){return e.apply(this,arguments)}}(),onCancel:function(){this.idToDelete=null},loadTeamsData:function(){this.loadTeams(this.organizationId)}}),mounted:function(){var e=Object(I["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:this.loadTeamsData();case 1:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},Na=Ea,Ma=(a("464c"),Object(l["a"])(Na,Pa,Da,!1,null,"19c37aae",null));Ma.options.__file="Teams.vue";var qa=Ma.exports,Ba=function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.user?a("div",[a("user-details",{attrs:{user:e.user,organizationId:e.organizationId},on:{submit:e.updateUser}}),a("div",{staticClass:"section"},[a("md-toolbar",{attrs:{"md-elevation":"0"}},[a("span",{staticClass:"md-title",staticStyle:{flex:"1"}},[e._v("Teams")]),a("team-select",{attrs:{selectedTeamId:e.selectedTeamId,exclude:e.user.teams,organizationId:e.organizationId},on:{selected:function(t){return e.selectedTeamId=t}}}),a("md-button",{attrs:{disabled:!e.selectedTeamId},on:{click:function(t){e.addToTeam(e.selectedTeamId)}}},[e._v("Add to team")])],1),a("md-table",{scopedSlots:e._u([{key:"md-table-row",fn:function(t){var n=t.item;return a("md-table-row",{},[a("md-table-cell",{attrs:{"md-label":"ID"}},[a("router-link",{attrs:{to:{name:"team",params:{organizationId:e.organizationId,teamId:n.id}}}},[e._v("\n          "+e._s(n.id)+"\n          ")])],1),a("md-table-cell",{attrs:{"md-label":"Name"}},[e._v(e._s(n.name))]),a("md-table-cell",{attrs:{"md-label":"Actions"}},[a("md-button",{staticClass:"md-icon-button md-primary",on:{click:function(t){e.removeFromTeam(n.id)}}},[a("md-icon",[e._v("delete")]),a("md-tooltip",[e._v("Remove from team")])],1)],1)],1)}}]),model:{value:e.user.teams,callback:function(t){e.$set(e.user,"teams",t)},expression:"user.teams"}},[a("md-table-empty-state",{attrs:{"md-label":"No teams","md-description":"The user doesn't belong to any teams"}})],1)],1),a("policy-associations",{attrs:{policies:e.user.policies,organizationId:e.organizationId,deleteAssociation:e.removePolicyInstance,addAssociation:e.addPolicyInstance}})],1):e._e()},Ka=[],La=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("form",{key:e.user.id,attrs:{"data-vv-scope":e.user.id,novalidate:"",autocomplete:"off"},on:{submit:function(t){return t.preventDefault(),e.validate(t)}}},[a("div",{staticClass:"section"},[a("md-toolbar",{attrs:{"md-elevation":"0"}},[a("span",{staticClass:"md-title",staticStyle:{flex:"1"}},[e._v(e._s(e.creating?"Create user":"User"))]),a("md-button",{on:{click:function(t){e.creating&&e.$router.go(-1)}}},[e._v("Cancel")]),a("md-button",{attrs:{disabled:!e.isFormChanged(e.localUser.id),type:"submit"}},[e._v(e._s(e.creating?"Create":"Save"))])],1),a("md-content",[a("div",{staticClass:"md-layout md-alignment-center-center"},[a("div",{staticClass:"md-layout-item md-size-50"},[a("div",[a("md-field",{class:{"md-invalid":e.errors.has("id")}},[a("label",{attrs:{for:"id"}},[e._v("User ID")]),a("md-input",{directives:[{name:"validate",rawName:"v-validate",value:{required:!0,udaru_id:!0,excluded:e.userIds},expression:"{required: true, udaru_id: true, excluded: userIds}"}],attrs:{id:"id",name:"id",autofocus:"",readonly:!e.creating},model:{value:e.localUser.id,callback:function(t){e.$set(e.localUser,"id",t)},expression:"localUser.id"}}),a("span",{staticClass:"md-error"},[e._v(e._s(e.errors.first("id")))])],1)],1),a("div",[a("md-field",{class:{"md-invalid":e.errors.has("name")}},[a("label",{attrs:{for:"name"}},[e._v("User name")]),a("md-input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{id:"name",name:"name"},model:{value:e.localUser.name,callback:function(t){e.$set(e.localUser,"name",t)},expression:"localUser.name"}}),a("span",{staticClass:"md-error"},[e._v(e._s(e.errors.first("name")))])],1)],1),a("div",[a("md-field",{class:{"md-invalid":e.errors.has("metadata")}},[a("label",{attrs:{for:"metadata"}},[e._v("Metadata")]),a("md-textarea",{directives:[{name:"validate",rawName:"v-validate",value:"json",expression:"'json'"}],attrs:{id:"metadata",name:"metadata"},model:{value:e.localUser.metadata,callback:function(t){e.$set(e.localUser,"metadata",t)},expression:"localUser.metadata"}}),a("span",{staticClass:"md-error"},[e._v(e._s(e.errors.first("metadata")))])],1)],1)])])])],1)])},Fa=[],Va={name:"user-details",mixins:[ct],props:{organizationId:{type:String,required:!0},user:{type:Object,default:function(){return{id:null,name:null,metadata:{}}}}},computed:Object($["a"])({},Object(A["c"])(["getUsers"]),{userIds:function(){return this.creating&&(this.getUsers(this.organizationId)||[]).map(function(e){var t=e.id;return t})},creating:function(){return!this.user.id}}),watch:{user:function(){this.createLocalUser()}},methods:Object($["a"])({},Object(ge["a"])(ae),{validate:function(){var e=Object(I["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$validator.validateAll();case 2:if(!e.sent){e.next=4;break}this.$emit("submit",this.localUser);case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),createLocalUser:function(){return this.localUser=Object($["a"])({},this.user,{metadata:JSON.stringify(this.user.metadata,null,2)})}}),data:function(){return{localUser:this.createLocalUser()}},created:function(){this.loadUsers(this.organizationId)}},Ja=Va,Ga=Object(l["a"])(Ja,La,Fa,!1,null,null,null);Ga.options.__file="UserDetails.vue";var Ha=Ga.exports,Ya={name:"user",props:{organizationId:String,userId:String},components:{PolicyAssociations:Jt,TeamSelect:Oa,UserDetails:Ha},data:function(){return{selectedTeamId:null}},computed:Object($["a"])({},Object(A["c"])(["getUser"]),{user:function(){return this.getUser(this.organizationId,this.userId)}}),methods:Object($["a"])({},Object(ge["a"])(ne,ue,le,de),{updateUser:function(){var e=Object(I["a"])(regeneratorRuntime.mark(function e(t){var a,n;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return a=t.name,n=t.metadata,e.prev=1,e.next=4,this.$udaru.updateUser(this.organizationId,this.userId,{name:a,metadata:n});case 4:this.changeSnackbarMessage({message:"User saved!"}),e.next=10;break;case 7:e.prev=7,e.t0=e["catch"](1),this.changeSnackbarMessage({message:'Error saving user: "'.concat(e.t0,'"')});case 10:this.loadUserData();case 11:case"end":return e.stop()}},e,this,[[1,7]])}));return function(t){return e.apply(this,arguments)}}(),addToTeam:function(){var e=Object(I["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.addUserToTeam({organizationId:this.organizationId,userId:this.userId,teamId:t});case 2:this.selectedTeamId=null,this.loadUserData();case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),removeFromTeam:function(){var e=Object(I["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.removeUserFromTeam({organizationId:this.organizationId,userId:this.userId,teamId:t});case 2:this.selectedTeamId=null,this.loadUserData();case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),removePolicyInstance:function(){var e=Object(I["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$udaru.removeUserPolicy(this.organizationId,this.userId,t);case 2:return e.next=4,this.loadUserData();case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),addPolicyInstance:function(){var e=Object(I["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$udaru.addOrUpdateUserPolicy(this.organizationId,this.userId,t);case 2:return e.next=4,this.loadUserData();case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),loadUserData:function(){this.loadUser({organizationId:this.organizationId,userId:this.userId})}}),created:function(){this.loadUserData()}},Za=Ya,Wa=Object(l["a"])(Za,Ba,Ka,!1,null,null,null);Wa.options.__file="User.vue";var Qa=Wa.exports,Xa=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("user-details",{attrs:{organizationId:e.organizationId},on:{submit:e.doCreateUser}})},en=[],tn={name:"user-create",props:{organizationId:String},components:{UserDetails:Ha},methods:Object($["a"])({},Object(ge["a"])(pe,de),{doCreateUser:function(){var e=Object(I["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.createUser({organizationId:this.organizationId,user:t});case 3:this.changeSnackbarMessage({message:"User created!"}),this.$router.push({name:"users",params:{organizationId:this.organizationId}}),e.next=10;break;case 7:e.prev=7,e.t0=e["catch"](0),this.changeSnackbarMessage({message:'Error creating user: "'.concat(e.t0,'"')});case 10:case"end":return e.stop()}},e,this,[[0,7]])}));return function(t){return e.apply(this,arguments)}}()})},an=tn,nn=Object(l["a"])(an,Xa,en,!1,null,null,null);nn.options.__file="UserCreate.vue";var rn=nn.exports,sn=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"users"},[e.idToDelete?a("md-dialog-confirm",{attrs:{"md-active":!!e.idToDelete,"md-title":"Confirm delete","md-content":"Delete user "+e.idToDelete+"?"},on:{"md-cancel":e.onCancel,"md-confirm":e.onConfirm}}):e._e(),a("div",{staticClass:"section"},[a("md-toolbar",{attrs:{"md-elevation":"0"}},[a("div",{staticClass:"md-title",staticStyle:{flex:"1"}},[e._v("Users")]),a("md-button",{attrs:{to:{name:"user-create",params:{organizationId:e.organizationId}}}},[e._v("\n        Create new user\n      ")])],1),e.searched?a("md-table",{scopedSlots:e._u([{key:"md-table-row",fn:function(t){var n=t.item;return a("md-table-row",{},[a("md-table-cell",{staticClass:"user-id",attrs:{"md-label":"ID"}},[a("router-link",{attrs:{to:{name:"user",params:{organizationId:e.organizationId,userId:n.id}}}},[e._v("\n            "+e._s(n.id)+"\n          ")])],1),a("md-table-cell",{attrs:{"md-label":"Name"}},[e._v(e._s(n.name))]),a("md-table-cell",{attrs:{"md-label":"Metadata"}},[a("metadata",{attrs:{value:n.metadata}})],1),a("md-table-cell",{attrs:{"md-label":"Actions"}},[a("md-button",{staticClass:"md-icon-button md-dense md-primary",attrs:{disabled:e.isCurrentUser(n.id)},on:{click:function(t){e.deleteUser(n.id)}}},[a("md-icon",[e._v("delete")])],1),a("md-tooltip",[e._v(e._s(e.isCurrentUser(n.id)?"You cannot delete your own user":"Delete user"))])],1)],1)}}]),model:{value:e.searched,callback:function(t){e.searched=t},expression:"searched"}},[a("md-table-toolbar",[a("div",{staticClass:"md-toolbar-section-end"},[a("md-field",{attrs:{"md-clearable":""}},[a("md-input",{attrs:{placeholder:"Search users..."},on:{input:e.searchOnTable},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})],1)],1)]),a("md-table-empty-state",{attrs:{"md-label":"No users found","md-description":e.search&&"No user found for this '"+e.search+"' query. Try a different search term or create a new user."}})],1):e._e()],1)],1)},on=[],cn=function(e){return e.toString().toLowerCase()},un=function(e,t){return t?e.filter(function(e){return cn(e.name).includes(cn(t))}):e},ln={name:"users",props:{organizationId:String},components:{Metadata:Kt},computed:Object($["a"])({},Object(A["c"])(["getUsers"]),Object(A["d"])(["currentUser"]),{searched:function(){return this.searchResults||this.getUsers(this.organizationId)}}),data:function(){return{idToDelete:null,search:null,searchResults:null}},methods:Object($["a"])({},Object(ge["a"])(ae,de,ve),{searchOnTable:function(){this.searchResults=un(this.getUsers(this.organizationId),this.search)},deleteUser:function(e){this.idToDelete=e},onConfirm:function(){var e=Object(I["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.$udaru.deleteUser(this.idToDelete);case 3:this.idToDelete=null,this.changeSnackbarMessage({message:"User deleted"}),this.loadUsersData(),e.next=11;break;case 8:e.prev=8,e.t0=e["catch"](0),this.changeSnackbarMessage({message:"Error deleting user: ".concat(e.t0)});case 11:case"end":return e.stop()}},e,this,[[0,8]])}));return function(){return e.apply(this,arguments)}}(),onCancel:function(){this.idToDelete=null},isCurrentUser:function(e){return this.currentUser&&this.currentUser.id===e},loadUsersData:function(){this.loadUsers(this.organizationId)}}),mounted:function(){var e=Object(I["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:this.loadUsersData(),this.loadCurrentUser();case 2:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},dn=ln,mn=(a("2d5f"),Object(l["a"])(dn,sn,on,!1,null,"71d73901",null));mn.options.__file="Users.vue";var pn=mn.exports,hn=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"policies"},[a("service-key-dialog",{attrs:{operation:e.serviceKeyOperation},on:{cancel:e.onCancel}}),a("div",{staticClass:"section"},[a("md-toolbar",{attrs:{"md-elevation":"0"}},[a("div",{staticClass:"md-title",staticStyle:{flex:"1"}},[e._v("Policies")]),a("md-button",{attrs:{to:{name:"policy-create",params:{organizationId:e.organizationId}}}},[e._v("\n        Create new policy\n      ")])],1),e.searched?a("md-table",{scopedSlots:e._u([{key:"md-table-row",fn:function(t){var n=t.item;return a("md-table-row",{},[a("md-table-cell",{attrs:{"md-label":"ID"}},[a("router-link",{attrs:{to:{name:"policy",params:{organizationId:e.organizationId,policyId:n.id}}}},[e._v("\n            "+e._s(n.id)+"\n          ")])],1),a("md-table-cell",{attrs:{"md-label":"Name"}},[e._v(e._s(n.name))]),a("md-table-cell",{attrs:{"md-label":"Statements"}},[n.statements.Statement?a("ul",e._l(n.statements.Statement,function(t,n){var r=t.Action,i=t.Effect,s=t.Resource;return a("li",{key:n},[a("strong",[e._v(e._s(i))]),r.length>1||s.length>1?a("ul",[a("li",[e._v("\n                  action"+e._s(r.length>1?"s":"")+" "),a("code",[e._v(e._s(r.join(", ")))])]),a("li",[e._v("\n                  on resource"+e._s(s.length>1?"s":"")+" "),a("code",[e._v(e._s(s.join(", ")))])])]):a("span",[e._v("\n                action "),a("code",[e._v(e._s(r[0]))]),e._v(" on resource "),a("code",[e._v(e._s(s[0]))])])])})):a("span",[e._v(" - ")])]),a("md-table-cell",{attrs:{"md-label":"Version","md-numeric":""}},[e._v(e._s(n.version))]),a("md-table-cell",{attrs:{"md-label":"Actions"}},[a("md-button",{staticClass:"md-icon-button md-dense md-primary",on:{click:function(t){e.deletePolicy(n.id)}}},[a("md-icon",[e._v("delete")]),a("md-tooltip",[e._v("Delete policy")])],1)],1)],1)}}]),model:{value:e.searched,callback:function(t){e.searched=t},expression:"searched"}},[a("md-table-toolbar",[a("div",{staticClass:"md-toolbar-section-end"},[a("md-field",{attrs:{"md-clearable":""}},[a("md-input",{attrs:{placeholder:"Search policies..."},on:{input:e.searchOnTable},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})],1)],1)]),a("md-table-empty-state",{attrs:{"md-label":"No policies found","md-description":e.search&&"No policy found for this '"+e.search+"' query. Try a different search term or create a new policy."}})],1):e._e()],1)],1)},fn=[],vn=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("md-dialog",{attrs:{"md-active":!!e.operation}},[a("md-dialog-title",[e._v("Service key required")]),a("md-dialog-content",[a("p",[e._v("This operation requires a service key. Please enter it below to proceed.")]),a("form",{attrs:{autocomplete:"off",novalidate:""},on:{submit:function(t){return t.preventDefault(),e.validate(t)}}},[a("md-field",{class:{"md-invalid":e.errors.has("serviceKey")}},[a("label",{attrs:{for:"serviceKey"}},[e._v("Service key")]),a("md-input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{type:"password",id:"serviceKey",name:"serviceKey"},model:{value:e.serviceKey,callback:function(t){e.serviceKey=t},expression:"serviceKey"}}),a("span",{staticClass:"md-error"},[e._v(e._s(e.errors.first("serviceKey")))])],1),a("md-checkbox",{attrs:{id:"remember",name:"remember"},model:{value:e.remember,callback:function(t){e.remember=t},expression:"remember"}},[e._v("Remember")])],1)]),a("md-dialog-actions",[a("md-button",{on:{click:function(t){e.$emit("cancel")}}},[e._v("Cancel")]),a("md-button",{staticClass:"md-primary",on:{click:e.validate}},[e._v("Proceed")])],1)],1)},gn=[],bn={name:"service-key-operation",props:{operation:{type:Function}},data:function(){return{remember:!0,serviceKey:sessionStorage.getItem("serviceKey")}},methods:{validate:function(){var e=Object(I["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$validator.validateAll();case 2:if(!e.sent){e.next=5;break}this.remember&&sessionStorage.setItem("serviceKey",this.serviceKey),this.operation(this.serviceKey);case 5:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()}},yn=bn,In=Object(l["a"])(yn,vn,gn,!1,null,null,null);In.options.__file="ServiceKeyDialog.vue";var _n=In.exports,On=function(e){return e.toString().toLowerCase()},xn=function(e,t){return t?e.filter(function(e){return On(e.name).includes(On(t))}):e},zn={name:"policies",props:{organizationId:String},components:{ServiceKeyDialog:_n},computed:Object($["a"])({},Object(A["c"])(["getPolicies"]),{searched:function(){return this.searchResults||this.getPolicies(this.organizationId)}}),data:function(){return{serviceKeyOperation:null,search:null,searchResults:null}},methods:Object($["a"])({},Object(ge["a"])(se,de),{searchOnTable:function(){this.searchResults=xn(this.getPolicies(this.organizationId),this.search)},deletePolicy:function(e){var t=this;this.serviceKeyOperation=function(a){return t.onConfirm(e,a)}},onConfirm:function(){var e=Object(I["a"])(regeneratorRuntime.mark(function e(t,a){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.$udaru.deletePolicy(this.organizationId,t,a);case 3:this.changeSnackbarMessage({message:"Policy deleted"}),this.loadPoliciesData(),e.next=10;break;case 7:e.prev=7,e.t0=e["catch"](0),this.changeSnackbarMessage({message:"Error deleting policy: ".concat(e.t0)});case 10:return e.prev=10,this.serviceKeyOperation=null,e.finish(10);case 13:case"end":return e.stop()}},e,this,[[0,7,10,13]])}));return function(t,a){return e.apply(this,arguments)}}(),onCancel:function(){this.serviceKeyOperation=null},loadPoliciesData:function(){this.loadPolicies(this.organizationId)}}),mounted:function(){var e=Object(I["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:this.loadPoliciesData();case 1:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},wn=zn,kn=(a("ecb6"),Object(l["a"])(wn,hn,fn,!1,null,"3388a175",null));kn.options.__file="Policies.vue";var jn=kn.exports,Cn=function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.policy?a("div",[a("service-key-dialog",{attrs:{operation:e.serviceKeyOperation},on:{cancel:e.onCancel}}),a("policy-details",{attrs:{policy:e.policy,organizationId:e.organizationId},on:{submit:e.doUpdatePolicy}}),a("policy-statements",{attrs:{policy:e.policy},on:{submit:e.doUpdatePolicy}}),a("policy-instances",{attrs:{"organization-id":e.organizationId,"policy-id":e.policyId}})],1):e._e()},Rn=[],Tn=a("133d"),Un=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("form",{attrs:{novalidate:"",autocomplete:"off"},on:{submit:function(t){return t.preventDefault(),e.validate(t)}}},[a("div",{staticClass:"section"},[a("md-toolbar",{attrs:{"md-elevation":"0"}},[a("span",{staticClass:"md-title",staticStyle:{flex:"1"}},[e._v(e._s(e.creating?"Create policy":"Policy"))]),a("md-button",{on:{click:function(t){e.creating&&e.$router.go(-1)}}},[e._v("Cancel")]),a("md-button",{attrs:{disabled:!e.isFormChanged(),type:"submit"}},[e._v(e._s(e.creating?"Create":"Save"))])],1),a("md-content",[a("div",{staticClass:"md-layout md-alignment-center-center"},[a("div",{staticClass:"md-layout-item md-size-50"},[a("div",[a("md-field",{class:{"md-invalid":e.errors.has("id")}},[a("label",{attrs:{for:"id"}},[e._v("Policy ID")]),a("md-input",{directives:[{name:"validate",rawName:"v-validate",value:{required:!0,udaru_id:!0,excluded:e.policyIds},expression:"{required: true, udaru_id: true, excluded: policyIds}"}],attrs:{id:"id",name:"id",autofocus:"",readonly:!e.creating},model:{value:e.localPolicy.id,callback:function(t){e.$set(e.localPolicy,"id",t)},expression:"localPolicy.id"}}),a("span",{staticClass:"md-error"},[e._v(e._s(e.errors.first("id")))])],1)],1),a("div",[a("md-field",{class:{"md-invalid":e.errors.has("name")}},[a("label",{attrs:{for:"name"}},[e._v("Policy name")]),a("md-input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{id:"name",name:"name"},model:{value:e.localPolicy.name,callback:function(t){e.$set(e.localPolicy,"name",t)},expression:"localPolicy.name"}}),a("span",{staticClass:"md-error"},[e._v(e._s(e.errors.first("name")))])],1)],1),a("div",[a("md-field",{class:{"md-invalid":e.errors.has("version")}},[a("label",{attrs:{for:"version"}},[e._v("Policy version")]),a("md-input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{id:"version",name:"version"},model:{value:e.localPolicy.version,callback:function(t){e.$set(e.localPolicy,"version",t)},expression:"localPolicy.version"}}),a("span",{staticClass:"md-error"},[e._v(e._s(e.errors.first("version")))])],1)],1)])])])],1)])},Sn=[],Pn={name:"policy-details",mixins:[ct],props:{organizationId:{type:String,required:!0},policy:{type:Object,default:function(){return{id:null,version:null,name:null,statements:{}}}}},computed:Object($["a"])({},Object(A["c"])(["getPolicies"]),{policyIds:function(){return this.creating&&(this.getPolicies(this.organizationId)||[]).map(function(e){var t=e.id;return t})},creating:function(){return!this.policy.id}}),methods:Object($["a"])({},Object(ge["a"])(se),{validate:function(){var e=Object(I["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$validator.validateAll();case 2:if(!e.sent){e.next=4;break}this.$emit("submit",this.localPolicy);case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()}),data:function(){return{localPolicy:Object($["a"])({},this.policy)}},created:function(){this.loadPolicies(this.organizationId)}},Dn=Pn,$n=Object(l["a"])(Dn,Un,Sn,!1,null,null,null);$n.options.__file="PolicyDetails.vue";var An=$n.exports,En=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("form",{attrs:{novalidate:"",autocomplete:"off"},on:{submit:function(t){return t.preventDefault(),e.validate(t)}}},[a("div",{staticClass:"section"},[a("md-toolbar",{attrs:{"md-elevation":"0"}},[a("span",{staticClass:"md-title",staticStyle:{flex:"1"}},[e._v("Statements")]),a("md-button",{on:{click:e.addStatement}},[e._v("Add statement")]),a("md-button",{on:{click:e.validate}},[e._v("Save")])],1),e.localPolicy.statements.Statement?a("md-table",{scopedSlots:e._u([{key:"md-table-row",fn:function(t){var n=t.item;return a("md-table-row",{},[a("md-table-cell",{attrs:{"md-label":"Actions"}},[a("md-chips",{model:{value:n.Action,callback:function(t){e.$set(n,"Action",t)},expression:"item.Action"}})],1),a("md-table-cell",{attrs:{"md-label":"Effect"}},[a("md-field",[a("md-select",{model:{value:n.Effect,callback:function(t){e.$set(n,"Effect",t)},expression:"item.Effect"}},[a("md-option",{attrs:{value:"Allow"}},[e._v("Allow")]),a("md-option",{attrs:{value:"Deny"}},[e._v("Deny")])],1)],1)],1),a("md-table-cell",{attrs:{"md-label":"Resources"}},[a("md-chips",{model:{value:n.Resource,callback:function(t){e.$set(n,"Resource",t)},expression:"item.Resource"}})],1),a("md-table-cell",[a("md-button",{staticClass:"md-icon-button md-dense md-primary",on:{click:function(t){e.removeStatement(n)}}},[a("md-icon",[e._v("delete")]),a("md-tooltip",[e._v("Remove statement")])],1)],1)],1)}}]),model:{value:e.localPolicy.statements.Statement,callback:function(t){e.$set(e.localPolicy.statements,"Statement",t)},expression:"localPolicy.statements.Statement"}},[a("md-table-empty-state",{attrs:{"md-label":"No statements","md-description":"No policy statements."}},[a("md-button",{staticClass:"md-primary",on:{click:e.addStatement}},[e._v("Add statement")])],1)],1):e._e()],1)])},Nn=[],Mn={name:"policy-statements",props:{policy:{type:Object,required:!0}},methods:{addStatement:function(){this.localPolicy.statements.Statement.push({Action:[],Effect:"Allow",Resource:[]})},removeStatement:function(e){this.localPolicy.statements.Statement.splice(this.localPolicy.statements.Statement.indexOf(e),1)},validate:function(){var e=Object(I["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$validator.validateAll();case 2:if(!e.sent){e.next=4;break}this.$emit("submit",this.localPolicy);case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},data:function(){return{localPolicy:Object($["a"])({},this.policy,{statements:{Statement:this.policy.statements.Statement?Object(xt["cloneDeep"])(this.policy.statements.Statement):[]}})}}},qn=Mn,Bn=Object(l["a"])(qn,En,Nn,!1,null,null,null);Bn.options.__file="PolicyStatements.vue";var Kn=Bn.exports,Ln=function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.instances?a("div",{staticClass:"section"},[a("md-toolbar",{attrs:{"md-elevation":"0"}},[a("span",{staticClass:"md-title",staticStyle:{flex:"1"}},[e._v("Policy instances")])]),a("md-table",{scopedSlots:e._u([{key:"md-table-row",fn:function(t){var n,r=t.item;return a("md-table-row",{},[a("md-table-cell",{attrs:{"md-label":"Entity ID"}},[a("router-link",{attrs:{to:{name:r.entityType,params:(n={organizationId:e.organizationId},n[r.entityType+"Id"]=r.entityId,n)}}},[e._v("\r\n        "+e._s(r.entityId)+"\r\n        ")])],1),a("md-table-cell",{attrs:{"md-label":"Entity type"}},[a("md-icon",[e._v(e._s(e.mapEntityTypeToIcon(r.entityType)))]),a("span",{staticClass:"entity-type"},[e._v(" "+e._s(r.entityType))])],1),a("md-table-cell",{attrs:{"md-label":"Variables"}},[a("metadata",{attrs:{value:r.variables}})],1),a("md-table-cell",{attrs:{"md-label":"Instance","md-numeric":""}},[e._v(e._s(r.instance))])],1)}}]),model:{value:e.instances,callback:function(t){e.instances=t},expression:"instances"}},[a("md-table-empty-state",{attrs:{"md-label":"No instances","md-description":"Assign to Organizations, Teams or Users to create instances of this policy."}})],1)],1):e._e()},Fn=[],Vn={name:"policy-instances",props:{organizationId:{type:String,required:!0},policyId:{type:String,required:!0}},components:{Metadata:Kt},computed:Object($["a"])({},Object(A["c"])(["getPolicyInstances"]),{instances:function(){return this.getPolicyInstances(this.organizationId,this.policyId)}}),methods:Object($["a"])({},Object(ge["a"])(oe),{mapEntityTypeToIcon:function(e){switch(e){case"organization":return"group_work";case"team":return"group";case"user":return"person_outline"}}}),created:function(){this.loadPolicyInstances({organizationId:this.organizationId,policyId:this.policyId})}},Jn=Vn,Gn=(a("33c5"),Object(l["a"])(Jn,Ln,Fn,!1,null,"bd8944f0",null));Gn.options.__file="PolicyInstances.vue";var Hn=Gn.exports,Yn={name:"policy",props:{organizationId:String,policyId:String},components:{PolicyDetails:An,PolicyStatements:Kn,PolicyInstances:Hn,ServiceKeyDialog:_n},data:function(){return{serviceKeyOperation:null}},computed:Object($["a"])({},Object(A["c"])(["getPolicy"]),{policy:function(){return this.getPolicy(this.organizationId,this.policyId)}}),methods:Object($["a"])({},Object(ge["a"])(ce,de),{doUpdatePolicy:function(e){var t=this;this.serviceKeyOperation=function(a){return t.onConfirm(e,a)}},onConfirm:function(){var e=Object(I["a"])(regeneratorRuntime.mark(function e(t,a){var n,r;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return n=t.id,r=Object(Tn["a"])(t,["id"]),0===r.statements.Statement.length&&this.$delete(r.statements,"Statement"),e.prev=2,e.next=5,this.$udaru.updatePolicy(this.organizationId,n,r,a);case 5:this.changeSnackbarMessage({message:"Policy saved"}),this.loadPolicyData(),e.next=12;break;case 9:e.prev=9,e.t0=e["catch"](2),this.changeSnackbarMessage({message:"Error saving policy: ".concat(e.t0)});case 12:return e.prev=12,this.serviceKeyOperation=null,e.finish(12);case 15:case"end":return e.stop()}},e,this,[[2,9,12,15]])}));return function(t,a){return e.apply(this,arguments)}}(),onCancel:function(){this.serviceKeyOperation=null},loadPolicyData:function(){return this.loadPolicy({organizationId:this.organizationId,policyId:this.policyId})}}),created:function(){this.loadPolicyData()}},Zn=Yn,Wn=Object(l["a"])(Zn,Cn,Rn,!1,null,null,null);Wn.options.__file="Policy.vue";var Qn=Wn.exports,Xn=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("service-key-dialog",{attrs:{operation:e.serviceKeyOperation},on:{cancel:e.onCancel}}),a("policy-details",{attrs:{organizationId:e.organizationId},on:{submit:e.doCreatePolicy}})],1)},er=[],tr={name:"policy-create",props:{organizationId:String},components:{PolicyDetails:An,ServiceKeyDialog:_n},data:function(){return{serviceKeyOperation:null}},methods:Object($["a"])({},Object(ge["a"])(he,de),{doCreatePolicy:function(e){var t=this;this.serviceKeyOperation=function(a){return t.onConfirm(e,a)}},onConfirm:function(){var e=Object(I["a"])(regeneratorRuntime.mark(function e(t,a){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.createPolicy({organizationId:this.organizationId,policy:t,serviceKey:a});case 3:this.changeSnackbarMessage({message:"Policy created"}),this.$router.push({name:"policies",params:{organizationId:this.organizationId}}),e.next=10;break;case 7:e.prev=7,e.t0=e["catch"](0),this.changeSnackbarMessage({message:"Error creating policy: ".concat(e.t0)});case 10:return e.prev=10,this.serviceKeyOperation=null,e.finish(10);case 13:case"end":return e.stop()}},e,this,[[0,7,10,13]])}));return function(t,a){return e.apply(this,arguments)}}(),onCancel:function(){this.serviceKeyOperation=null}})},ar=tr,nr=Object(l["a"])(ar,Xn,er,!1,null,null,null);nr.options.__file="PolicyCreate.vue";var rr=nr.exports,ir=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("md-app",[a("md-app-toolbar",{staticClass:"md-transparent"},[a("div",{staticClass:"md-toolbar-section-start"},[a("toolbar-logo"),a("span",{staticClass:"md-title"},[e._v("Settings")])],1)]),a("md-app-content",[a("div",{staticClass:"section"},[a("md-toolbar",{attrs:{"md-elevation":"0"}},[a("span",{staticClass:"md-title"},[e._v("Configuration wizard")])]),a("md-content",[a("div",{staticStyle:{display:"flex","justify-content":"center"}},[a("md-steppers",{attrs:{"md-active-step":e.activeStep,"md-vertical":"","md-linear":""},on:{"update:mdActiveStep":function(t){e.activeStep=t}}},[a("md-step",{attrs:{id:e.STEPS.server,"md-label":e.checkingUrl?"Checking server...":"Configure server","md-error":e.urlError,"md-done":e.urlDone}},[a("form",{attrs:{novalidate:"",autocomplete:"off"},on:{submit:function(t){return t.preventDefault(),e.configureServer(t)}}},[a("md-field",{class:{"md-invalid":e.errors.has("url")}},[a("label",{attrs:{for:"url"}},[e._v("Server url")]),a("md-input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{id:"url",name:"url",type:"url"},model:{value:e.url,callback:function(t){e.url=t},expression:"url"}}),a("span",{staticClass:"md-helper-text"},[e._v("We need to know where your Udaru server is")]),a("span",{staticClass:"md-error"},[e._v(e._s(e.errors.first("url")))])],1),a("div",{staticClass:"divider"}),a("md-button",{staticClass:"md-raised md-primary",attrs:{type:"submit"}},[e._v("Save and continue")])],1)]),a("md-step",{attrs:{id:e.STEPS.user,"md-label":e.checkingUserId?"Checking user...":"Configure user","md-error":e.userIdError,"md-done":e.userIdDone}},[a("form",{attrs:{novalidate:"",autocomplete:"off"},on:{submit:function(t){return t.preventDefault(),e.configureUser(t)}}},[a("md-field",{class:{"md-invalid":e.errors.has("userId")}},[a("label",{attrs:{for:"userId"}},[e._v("User ID")]),a("md-input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{id:"userId",name:"userId"},model:{value:e.userId,callback:function(t){e.userId=t},expression:"userId"}}),a("span",{staticClass:"md-helper-text"},[e._v("The user should be a super admin")]),a("span",{staticClass:"md-error"},[e._v(e._s(e.errors.first("userId")))])],1),a("div",{staticClass:"divider"}),a("md-button",{staticClass:"md-raised md-primary",attrs:{type:"submit"}},[e._v("Save and continue")])],1)]),a("md-step",{attrs:{id:e.STEPS.done,"md-label":"Done!","md-done":e.urlDone&&e.userIdDone}},[a("div",{staticStyle:{display:"flex","align-items":"center"}},[a("div",{staticStyle:{"margin-right":"20px"}},[a("p",{staticClass:"md-title"},[e._v("Configuration complete!")]),a("p",{staticClass:"md-body-1"},[e._v("You can now start using the application")])]),a("md-button",{staticClass:"md-raised md-primary",attrs:{to:{name:"select-organization"}}},[e._v("Go to application")])],1)])],1)],1)])],1),a("github-corner")],1)],1)},sr=[],or=(a("a481"),{server:"server",user:"user",done:"done"}),cr={name:"settings",components:{ToolbarLogo:Je,GithubCorner:Ce},data:function(){return{STEPS:or,activeStep:or.server,userId:null,userIdError:null,userIdSuccess:!1,url:null,urlError:null,urlSuccess:!1,checkingUrl:!1,checkingUserId:!1}},computed:{urlDone:function(){return this.urlSuccess&&!this.checkingUrl},userIdDone:function(){return this.urlDone&&this.userIdSuccess&&!this.checkingUserId}},created:function(){var e=Object(I["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(this.url=this.$settings.getUrl(),this.userId=this.$settings.getUserId(),!this.url){e.next=5;break}return e.next=5,this.configureServer();case 5:if(this.urlError||!this.userId){e.next=8;break}return e.next=8,this.configureUser();case 8:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),methods:{configureServer:function(){var e=Object(I["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(!this.errors.has("url")){e.next=2;break}return e.abrupt("return");case 2:return this.url=this.url.replace(/\/+$/g,""),e.prev=3,this.checkingUrl=!0,this.$settings.setUrl(this.url),e.next=8,h.a.get("".concat(this.url,"/ping"));case 8:this.urlError=null,this.urlSuccess=!0,this.activeStep=or.user,e.next=17;break;case 13:e.prev=13,e.t0=e["catch"](3),this.urlError=e.t0.message||"Cannot reach server",this.urlSuccess=!1;case 17:return e.prev=17,this.checkingUrl=!1,e.finish(17);case 20:case"end":return e.stop()}},e,this,[[3,13,17,20]])}));return function(){return e.apply(this,arguments)}}(),configureUser:function(){var e=Object(I["a"])(regeneratorRuntime.mark(function e(){var t,a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(!this.errors.has("userId")){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,this.checkingUserId=!0,this.$settings.setUserId(this.userId),e.next=7,h.a.get("".concat(this.url,"/authorization/access/").concat(encodeURIComponent(this.userId),"/*/*"),{headers:{authorization:this.userId}});case 7:if(t=e.sent,a=t.data.access,a){e.next=11;break}throw new Error("User does not have sufficient privileges");case 11:this.userIdError=null,this.userIdSuccess=!0,this.activeStep=or.done,e.next=20;break;case 16:e.prev=16,e.t0=e["catch"](2),this.userIdError=e.t0.message||"Cannot log in with the specified user",this.userIdSuccess=!1;case 20:return e.prev=20,this.checkingUserId=!1,e.finish(20);case 23:case"end":return e.stop()}},e,this,[[2,16,20,23]])}));return function(){return e.apply(this,arguments)}}()}},ur=cr,lr=(a("b2d2"),Object(l["a"])(ur,ir,sr,!1,null,"0711c9ab",null));lr.options.__file="Settings.vue";var dr=lr.exports,mr=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"section"},[a("md-toolbar",{attrs:{"md-elevation":"0"}},[a("div",{staticClass:"md-title",staticStyle:{flex:"1"}},[e._v("Authorization check")]),a("md-button",{attrs:{disabled:!e.canCheck},on:{click:e.checkAccess}},[e._v("Check access")])],1),a("md-content",[a("div",{staticClass:"md-subheading description"},[e._v("Check if a user can perform an action on a resource")]),a("div",{staticClass:"md-layout md-alignment-center-center"},[a("div",{staticClass:"md-layout-item md-size-50"},[a("form",{attrs:{novalidate:"",autocomplete:"off"}},[a("user-select",{attrs:{organizationId:e.organizationId},model:{value:e.selectedUserId,callback:function(t){e.selectedUserId=t},expression:"selectedUserId"}}),a("md-autocomplete",{attrs:{"md-options":e.actions,"md-input-placeholder":e.actions.length?"Select an action":"No available actions"},model:{value:e.selectedAction,callback:function(t){e.selectedAction=t},expression:"selectedAction"}}),a("md-autocomplete",{attrs:{"md-options":e.resources,"md-input-placeholder":e.resources.length?"Select a resource":"No available resources"},model:{value:e.selectedResource,callback:function(t){e.selectedResource=t},expression:"selectedResource"}})],1)])]),a("div",{staticClass:"md-layout md-alignment-center-center result"},[a("div",{staticClass:"md-item"},[a("md-icon",{staticClass:"md-size-4x",class:{"md-primary":!0===e.access,"md-accent":!1===e.access},style:{visibility:null!==e.access?"visible":"hidden"}},[e._v("\n          "+e._s("thumb_"+e.upOrDown)+"\n      ")])],1),a("div",{staticClass:"md-item result-text md-display-2"},[e._v("\n        "+e._s(null!==e.access?"Access "+(e.access?"granted":"denied"):"")+"\n      ")])])])],1)},pr=[],hr=a("8afe"),fr={name:"authorization-check",props:{organizationId:String},components:{UserSelect:la},data:function(){return{access:null,actions:[],resources:[],selectedAction:null,selectedResource:null,selectedUserId:null}},computed:{upOrDown:function(){return this.access?"up":"down"},canCheck:function(){return this.selectedUserId&&this.selectedAction&&this.selectedResource}},watch:{selectedAction:function(){this.access=null},selectedResource:function(){this.access=null}},methods:{checkAccess:function(){var e=Object(I["a"])(regeneratorRuntime.mark(function e(){var t,a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$udaru.canAccess(this.organizationId,this.selectedUserId,this.selectedAction,this.selectedResource);case 2:t=e.sent,a=t.access,this.access=a;case 5:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},created:function(){var e=Object(I["a"])(regeneratorRuntime.mark(function e(){var t,a,n,r;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$udaru.getPolicies(this.organizationId);case 2:t=e.sent.data,a=Object(xt["flow"])(Object(xt["flatMap"])(Object(xt["get"])("statements.Statement")),Object(xt["reduce"])(function(e,t){var a=e.actions,n=e.resources,r=t.Action,i=t.Resource;return{actions:Object(xt["uniq"])(Object(hr["a"])(a).concat(Object(hr["a"])(r))),resources:Object(xt["uniq"])(Object(hr["a"])(n).concat(Object(hr["a"])(i)))}},{actions:[],resources:[]}))(t),n=a.actions,r=a.resources,this.actions=n,this.resources=r;case 6:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},vr=fr,gr=(a("4678"),Object(l["a"])(vr,mr,pr,!1,null,"4d4fd6f1",null));gr.options.__file="AuthorizationCheck.vue";var br=gr.exports;n["default"].use(z["a"]);var yr=new z["a"]({routes:[{path:"/",component:Se,meta:{requiresSettings:!0},children:[{path:"",redirect:{name:"select-organization"}},{path:"organizations",component:aa,children:[{path:"",redirect:{name:"select-organization"}},{path:"select",name:"select-organization",component:at},{path:"create",name:"create-organization",component:vt}]},{path:"/organizations/:organizationId",component:Ze,props:!0,children:[{path:"",redirect:function(e){var t=e.params;return{name:"organization",params:t}}},{path:"details",name:"organization",props:!0,component:Zt},{path:"users",name:"users",props:!0,component:pn},{path:"teams",name:"teams",props:!0,component:qa},{path:"policies",name:"policies",props:!0,component:jn},{path:"users/create",name:"user-create",props:!0,component:rn},{path:"teams/create",name:"team-create",props:!0,component:Sa},{path:"user/:userId",name:"user",props:!0,component:Qa},{path:"team/:teamId",name:"team",props:!0,component:ka},{path:"policies/create",name:"policy-create",props:!0,component:rr},{path:"policy/:policyId",name:"policy",props:!0,component:Qn},{path:"authorization-check",name:"authorization-check",props:!0,component:br}]}]},{path:"/settings",name:"settings",component:dr}]});yr.beforeEach(function(){var e=Object(I["a"])(regeneratorRuntime.mark(function e(t,a,r){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(!t.matched.some(function(e){return e.meta.requiresSettings})||n["default"].settings.isConfigured()){e.next=2;break}return e.abrupt("return",r({name:"settings"}));case 2:r();case 3:case"end":return e.stop()}},e,this)}));return function(t,a,n){return e.apply(this,arguments)}}());var Ir=yr,_r=a("e2de");n["default"].use(A["a"]);var Or=new A["a"].Store({strict:!1,state:{loading:0,snackbarMessage:null,currentUser:null,organizations:[],organizationsById:{},usersByOrganizationId:{},teamsByOrganizationId:{},policiesByOrganizationId:{},teamsById:{},usersById:{},policiesById:{},policyInstancesById:{}},getters:{getOrganization:function(e){return function(t){return e.organizationsById[t]}},getUsers:function(e){return function(t){return e.usersByOrganizationId[t]}},getTeams:function(e){return function(t){return e.teamsByOrganizationId[t]}},getPolicies:function(e){return function(t){return e.policiesByOrganizationId[t]}},getUser:function(e){return function(t,a){return e.usersById[t]&&e.usersById[t][a]}},getTeam:function(e){return function(t,a){return e.teamsById[t]&&e.teamsById[t][a]}},getPolicy:function(e){return function(t,a){return e.policiesById[t]&&e.policiesById[t][a]}},getPolicyInstances:function(e){return function(t,a){return e.policyInstancesById[t]&&e.policyInstancesById[t][a]}}},mutations:Object(_r["a"])([q,B,V,K,L,F,H,J,G,Y,Z,W,Q]),actions:{createOrganization:fe,loadOrganizations:ee,loadOrganization:te,createUser:pe,loadUser:ne,loadUsers:ae,loadTeams:re,loadTeam:ie,createTeam:me,addUserToTeam:ue,removeUserFromTeam:le,loadPolicies:se,createPolicy:he,loadPolicy:ce,loadPolicyInstances:oe,changeSnackbarMessage:de,loadCurrentUser:ve}});a("51de"),a("f843");n["default"].config.productionTip=!1,n["default"].use(f),n["default"].use(v),n["default"].use(y),n["default"].use(_),n["default"].use(x),n["default"].use(i.a),new n["default"]({router:Ir,store:Or,render:function(e){return e(m)}}).$mount("#root")},"57d1":function(e,t,a){},"5fd1":function(e,t,a){"use strict";var n=a("0d37"),r=a.n(n);r.a},7439:function(e,t,a){},"74aa":function(e,t,a){},7870:function(e,t,a){"use strict";var n=a("9af8"),r=a.n(n);r.a},"7e20":function(e,t,a){"use strict";var n=a("57d1"),r=a.n(n);r.a},8493:function(e,t,a){"use strict";var n=a("47b5"),r=a.n(n);r.a},9224:function(e){e.exports={a:"https://github.com/simoneb/vuedaru"}},"9af8":function(e,t,a){},a220:function(e,t,a){"use strict";var n=a("14ba"),r=a.n(n);r.a},aaef:function(e,t,a){"use strict";var n=a("3e79"),r=a.n(n);r.a},b2d2:function(e,t,a){"use strict";var n=a("7439"),r=a.n(n);r.a},c4f8:function(e,t,a){},cdd5:function(e,t,a){"use strict";var n=a("21a7"),r=a.n(n);r.a},db7b:function(e,t,a){},ddb1:function(e,t,a){},eb21:function(e,t,a){},ecb6:function(e,t,a){"use strict";var n=a("201b"),r=a.n(n);r.a},f843:function(e,t,a){}});
//# sourceMappingURL=app.a4549349.js.map